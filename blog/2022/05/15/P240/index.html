<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/star.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/star.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/star.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/blog/lib/pace/pace-theme-minimal.min.css">
  <script src="/blog/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mazui3.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":265,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":{"text":"Load Disqus","order":-1}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="来源Linkedin learning.万物皆可接API!!">
<meta property="og:type" content="article">
<meta property="og:title" content="关于在python中写SQL的笔记">
<meta property="og:url" content="https://mazui3.github.io/blog/2022/05/15/P240/index.html">
<meta property="og:site_name" content="Underlake Reading Room">
<meta property="og:description" content="来源Linkedin learning.万物皆可接API!!">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mazui3.github.io/blog/2022/05/15/P240/P240_1.jpg">
<meta property="og:image" content="https://mazui3.github.io/blog/2022/05/15/P240/P240_2.jpg">
<meta property="og:image" content="https://mazui3.github.io/blog/2022/05/15/P240/P240_3.jpg">
<meta property="article:published_time" content="2022-05-15T04:59:47.000Z">
<meta property="article:modified_time" content="2022-06-15T20:39:31.468Z">
<meta property="article:author" content="Mazui">
<meta property="article:tag" content="编码">
<meta property="article:tag" content="以头抢地(诚)">
<meta property="article:tag" content="data">
<meta property="article:tag" content="SQL">
<meta property="article:tag" content="python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mazui3.github.io/blog/2022/05/15/P240/P240_1.jpg">

<link rel="canonical" href="https://mazui3.github.io/blog/2022/05/15/P240/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>关于在python中写SQL的笔记 | Underlake Reading Room</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Underlake Reading Room</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">这里是图书馆外的阅览室🌟</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/blog/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-friendlink">

    <a href="/blog/link/" rel="section"><i class="fas fa-user-friends fa-fw"></i>FriendLink</a>

  </li>
        <li class="menu-item menu-item-back">

    <a href="https://mazui3.github.io/" rel="section"><i class="fa fa-cloud fa-fw"></i>Back</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mazui3.github.io/blog/2022/05/15/P240/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/logo_9.png">
      <meta itemprop="name" content="Mazui">
      <meta itemprop="description" content="与孤独和平共处.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Underlake Reading Room">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          关于在python中写SQL的笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-15 00:59:47" itemprop="dateCreated datePublished" datetime="2022-05-15T00:59:47-04:00">2022-05-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-15 16:39:31" itemprop="dateModified" datetime="2022-06-15T16:39:31-04:00">2022-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E5%AD%A6%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">数学笔记</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/blog/2022/05/15/P240/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/05/15/P240/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="C">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="T">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>14 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>来源Linkedin learning.<br>万物皆可接API!!</p>
<span id="more"></span>
<p>忘记装matplotlib.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install -U matplotlib</span><br></pre></td></tr></table></figure>

<br>
<br>
<br>
<br>

<h1 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h1><p>Create a SQL lite database using python.</p>
<h2 id="Add-data"><a href="#Add-data" class="headerlink" title="Add data"></a>Add data</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line"><span class="comment"># create connection object with the connect function</span></span><br><span class="line"><span class="comment"># save the connection object in a variable called &quot;connection&quot;</span></span><br><span class="line"></span><br><span class="line">connection = sqlite3.connect(<span class="string">&#x27;movies.db&#x27;</span>) <span class="comment"># 这里的movies.db可以改成任何的directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># since we do not any database yet, this function will create the database</span></span><br><span class="line"><span class="comment"># next time this code will just connect with the database movies.db</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># we create a cursor(光标)</span></span><br><span class="line"><span class="comment"># cursor有点像pointer</span></span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># we need to put sql command in tripe quotes</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;&#x27;&#x27; CREATE TABLE IF NOT EXISTS Movies</span></span><br><span class="line"><span class="string">  (Title TEXT, Director TEXT, Year INT)&#x27;&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">connection.commit() <span class="comment"># commit create table changes to the database</span></span><br><span class="line">connection.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Save as movies.py.<br>Execute command.</p>
<br>
<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 movies.py</span><br></pre></td></tr></table></figure>

<p>这时候就已经生成一个movies.db在对应的directory中.</p>
<br>
<br>

<p>Add more data example.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line">connection = sqlite3.connect(<span class="string">&#x27;movies.db&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&quot; INSERT INTO Movies VALUES</span></span><br><span class="line"><span class="string">  (&#x27;Taxi Driver&#x27;,&#x27;Martin Scorsese&#x27;, 1976) &quot;</span>)</span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&quot; SELECT * FROM Movies&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># to retrieve it in python, we need not only select data</span></span><br><span class="line"><span class="comment"># we can use fetchone function to retrieve a single row</span></span><br><span class="line"><span class="comment"># or use fetchall</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cursor.fetchone()) <span class="comment"># will print the taxi driver line</span></span><br><span class="line"></span><br><span class="line">connection.commit()</span><br><span class="line">connection.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>
<br>

<p>Add more lines at once</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line">connection = sqlite3.connect(<span class="string">&#x27;movies.db&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line">famousFilms = [(<span class="string">&#x27;Pulp Fiction&#x27;</span>, <span class="string">&#x27;Quentin Tarantino&#x27;</span>, <span class="number">1994</span>),</span><br><span class="line">               (<span class="string">&#x27;Back to the Future&#x27;</span>, <span class="string">&#x27;Steven Spielberg&#x27;</span>, <span class="number">1985</span>),</span><br><span class="line">               (<span class="string">&#x27;Moonrise Kingdom&#x27;</span>, <span class="string">&#x27;Wes Anderson&#x27;</span>, <span class="number">2012</span>)]</span><br><span class="line"></span><br><span class="line">cursor.executemany(<span class="string">&#x27;INSERT INTO Movies VALUES (?,?,?)&#x27;</span>, famousFiles)</span><br><span class="line"><span class="comment"># 三个问号对应每行数据的三个part</span></span><br><span class="line"></span><br><span class="line">records = cursor.execute(<span class="string">&quot; SELECT * FROM Movies&quot;</span>)</span><br><span class="line"><span class="comment">#records储存了select的return</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以用loop来fetch one by one</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for record in records:</span></span><br><span class="line"><span class="comment">#    print(record)</span></span><br><span class="line"></span><br><span class="line">connection.commit()</span><br><span class="line">connection.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>因为cursor works like a pointer.所以当cursor跑过result了之后,就不能再用cursor在iterate了.<br>的意思是,我们已经用fetchall把select的东西跑完了,再用fetchone,是不会回到第一行的数据的,会return empty.<br>所以把东西存在records里,是做一个copy,不会动cursor里的东西.<br>Cursor resets after each execute, execute many command.</p>
<br>
<br>

<h2 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line">connection = sqlite3.connect(<span class="string">&#x27;movies.db&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line">release_year = (<span class="number">1985</span>, )</span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&quot;SELECT * FROM Movies WHERE year=?&quot;</span>, release_year)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br><span class="line"></span><br><span class="line">connection.commit()</span><br><span class="line">connection.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Tuples (in python) are used to store multiple items in a single variable.</p>
<blockquote>
<p>mytuple = (“apple”, “banana”, “cherry”)</p>
</blockquote>
<p>这里,我们要找数据中year为1985年的数据.<br>使用tuple的instead of string是为了prevent SQL injection attack.<br>如果要用python的variable来比较,得像这样,use question mark placeholder,做一个tuple values as the second argument.</p>
<br>
<br>

<h1 id="Object-relational-mapping-ORM"><a href="#Object-relational-mapping-ORM" class="headerlink" title="Object-relational mapping(ORM)"></a>Object-relational mapping(ORM)</h1><p>ORM也是可以query and manipulate data的一种方式.<br>也有很多libraries implement ORM-like functionality.<br>其中有SQLAlchemy,它是一个SQL toolkit.</p>
<p>要使用SQLAlchemy ORM,首先要装pip.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --user --upgrade pip</span><br></pre></td></tr></table></figure>

<p>视频推荐先装个virtual环境再在环境里装SQLAlchemy.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --user virtualenv</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m venv sqlalchemy-workspace</span><br></pre></td></tr></table></figure>
<p>在对应的directory下生成了sqlalchemy-workspace的文件夹.<br>cd进去后,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source bin/activate</span><br></pre></td></tr></table></figure>
<p>active虚拟环境,再,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install sqlalchemy</span><br></pre></td></tr></table></figure>
<p>btw离开虚拟环境是,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure>

<br>
<br>

<p>然后我们可以使用sqlalchemy了.</p>
<h2 id="Import-and-add-data"><a href="#Import-and-add-data" class="headerlink" title="Import and add data"></a>Import and add data</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sqlalchemy <span class="keyword">as</span> db</span><br><span class="line"></span><br><span class="line">engine = db.create_engine(<span class="string">&#x27;sqlitle:///movies.db&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># engine is not same as python database APIs connection object</span></span><br><span class="line"><span class="comment"># engine allows your application to have multiple database connections</span></span><br><span class="line"><span class="comment"># and it manages those connections</span></span><br><span class="line"></span><br><span class="line">connection = engine.connect()</span><br><span class="line"><span class="comment"># this connection is actually a proxy for the true python database API connection</span></span><br><span class="line"></span><br><span class="line">metadata = db.MetaData()</span><br><span class="line"><span class="comment"># this metadata will hold all info about our table</span></span><br><span class="line"></span><br><span class="line">movies = db.Table(<span class="string">&#x27;Movies&#x27;</span>, metadata, autoload=<span class="literal">True</span>, autoload_with=engine)</span><br><span class="line"></span><br><span class="line">query = db.select([movies])</span><br><span class="line"></span><br><span class="line">result_proxy = connection.execute(query)</span><br><span class="line"><span class="comment"># this result proxy proxies the cursor object from the python database API</span></span><br><span class="line"><span class="comment"># we can use the result proxy to retrieve the data</span></span><br><span class="line"></span><br><span class="line">result_set = result_proxy.fetchall()</span><br><span class="line"><span class="comment"># result set is the actual data</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result_set[<span class="number">0</span>]) <span class="comment"># asscess to the first object</span></span><br><span class="line"><span class="built_in">print</span>(result_set[:<span class="number">2</span>]) <span class="comment"># first two objects</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add another row of data</span></span><br><span class="line">query = movies.insert().values(Title=<span class="string">&quot;Psycho&quot;</span>, Director=<span class="string">&quot;Alfred Hitchcock&quot;</span>, Year=<span class="string">&quot;1960&quot;</span>)</span><br><span class="line">connection.execute(query) <span class="comment"># pass the query object to connection to execute</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check the database</span></span><br><span class="line">query = db.select([movies])</span><br><span class="line">result_proxy = connection.execute(query)</span><br><span class="line">result_set = result_proxy.fetchall()</span><br><span class="line"></span><br><span class="line"><span class="comment"># print all</span></span><br><span class="line"><span class="built_in">print</span>(result_set)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="Create-table"><a href="#Create-table" class="headerlink" title="Create table"></a>Create table</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> sqlalchemy <span class="keyword">as</span> db</span><br><span class="line"></span><br><span class="line">engine = db.create_engine(<span class="string">&#x27;sqlitle:///users-sqlalchemy.db&#x27;</span>)</span><br><span class="line">metadata = db.MetaData()</span><br><span class="line">connection = engine.connect()</span><br><span class="line"></span><br><span class="line">users = db.Table(<span class="string">&#x27;Users&#x27;</span>, metadata,</span><br><span class="line">  db.Column(<span class="string">&#x27;user_id&#x27;</span>, db.Integer, primary_key=<span class="literal">True</span>),</span><br><span class="line">  db.Column(<span class="string">&#x27;first_name&#x27;</span>, db.Text),</span><br><span class="line">  db.Column(<span class="string">&#x27;last_name&#x27;</span>, db.Text),</span><br><span class="line">  db.Column(<span class="string">&#x27;email_address&#x27;</span>, db.Text))</span><br><span class="line"></span><br><span class="line">metadata.create_all(engine) <span class="comment"># will create the table</span></span><br><span class="line">insertion_query = users.insert().values([</span><br><span class="line">  &#123;<span class="string">&quot;first_name&quot;</span>:<span class="string">&quot;Tina&quot;</span>,<span class="string">&quot;last_name&quot;</span>:<span class="string">&quot;Mccoy&quot;</span>,<span class="string">&quot;email_address&quot;</span>:<span class="string">&quot;tmccoyl@gmail.com&quot;</span>&#125;</span><br><span class="line">  ])</span><br><span class="line"></span><br><span class="line">connection.execute(insertion_query)</span><br><span class="line"></span><br><span class="line">selection_query = db.select([users.column.email_address])</span><br><span class="line">selection_result = connection.execute(selection_query)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(selection_result.fetchall())</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>
<br>
<br>
<br>

<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>Mysql will put database on a server instead of directly on the file system.<br>Follows a client/server relationship. Need to send requests to the server to access or modify data in the database.<br>In order to send requests to the database, we need to install the correct driver.</p>
<p>视频讲首先要下载<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">MySQL community</a>.<br>然后install + set root password via installer.</p>
<p>当在command line里输入mysql或者mysql.server没有被认出来时,得更改PATH variable.<br>在mac中可以:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/path</span><br></pre></td></tr></table></figure>

<p>加入mysql的path</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/mysql/bin</span><br><span class="line">/usr/local/mysql/support-files</span><br></pre></td></tr></table></figure>

<br>
<br>

<p>记得重启terminal.</p>
<p>要写mysql得把server给run起来.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql.server start</span><br><span class="line">sudo mysql.server stop</span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="MySQL-shell"><a href="#MySQL-shell" class="headerlink" title="MySQL shell"></a>MySQL shell</h2><p>Login:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<p>然后可以直接在command line上写mysql.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE projects;</span><br></pre></td></tr></table></figure>

<p><strong>以下都是command line里的mysql</strong><br>create了之后. To configure the databse we’re working with.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use projects;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> projects(project_id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, title <span class="type">VARCHAR</span>(<span class="number">30</span>), description <span class="type">VARCHAR</span>(<span class="number">255</span>), PRIMARY_KEY(project_id));</span><br></pre></td></tr></table></figure>

<p>查看生成的table.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tasks(task_id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, project_id <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, description <span class="type">VARCHAR</span>(<span class="number">255</span>), PRIMARY_KEY(task_id), <span class="keyword">FOREIGN</span> KEY(project_id) <span class="keyword">REFERENCES</span> project(project_id));</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> projects(title, description) <span class="keyword">VALUES</span> (&quot;Organize Photos&quot;, &quot;Organize old iPhone photos by year&quot;);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tasks(description,project_id) <span class="keyword">VALUES</span> (&quot;Organize 2020 Photos&quot;, &quot;1&quot;);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tasks(description,project_id) <span class="keyword">VALUES</span> (&quot;Organize 2019 Photos&quot;, &quot;1&quot;);</span><br></pre></td></tr></table></figure>
<p>Project_id是auto increment的所以是1和2.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> projects(title, description) <span class="keyword">VALUES</span> (&quot;Read more&quot;, &quot;Read a book a month this year&quot;);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tasks(description,project_id) <span class="keyword">VALUES</span> (&quot;Read the huntress&quot;, &quot;2&quot;);</span><br></pre></td></tr></table></figure>

<p>With the task table, having that foreign key constraint, we cannot inset a task without a corresponding project ID. We will also have to delete tasks before we delete the corresponding project. With special operators, such as on delete cascade, we can avoid this.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> projects;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tasks;</span><br></pre></td></tr></table></figure>

<p>顺便一提出去mysql环境:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\q</span><br></pre></td></tr></table></figure>

<br>
<br>

<h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p>要在python里写,首先要下载compliant module.</p>
<p>进入虚拟环境.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">virtualenv mysql-workspace</span><br><span class="line">cd mysql-workspace</span><br><span class="line">source bin/active</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysql-connector-python</span><br></pre></td></tr></table></figure>

<p>在此workspace(directory)下建立mysql-database.py<br>就可以开始写python了.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector <span class="keyword">as</span> mysql</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">db_name</span>):</span></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">      <span class="keyword">return</span> mysql.connect(</span><br><span class="line">        host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password=<span class="string">&#x27;password&#x27;</span>, <span class="comment"># the password to your database</span></span><br><span class="line">        database=db_name</span><br><span class="line">        )</span><br><span class="line">  <span class="keyword">except</span> Error <span class="keyword">as</span> e:</span><br><span class="line">      <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  db = connect(<span class="string">&quot;projects&quot;</span>)</span><br><span class="line">  cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">  cursor.execute(<span class="string">&quot;SELECT * FROM projects&quot;</span>)</span><br><span class="line">  project_records = cursor.fetchall()</span><br><span class="line">  <span class="built_in">print</span>(project_records)</span><br><span class="line"></span><br><span class="line">  db.close()</span><br></pre></td></tr></table></figure>

<p>For the host parameter we could put in some remote server running in AWS, but initially with MySQL installation, the host is where the database lives. Our application will send requests back and forth, to this location our localhost.</p>
<p>Run the file.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 mysql-database.py</span><br></pre></td></tr></table></figure>

<br>
<br>
<br>

<p>Create function to replace SQL command:</p>
<h2 id="Create-function"><a href="#Create-function" class="headerlink" title="Create function"></a>Create function</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector <span class="keyword">as</span> mysql</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">db_name</span>):</span></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">      <span class="keyword">return</span> mysql.connect(</span><br><span class="line">        host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">        user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password=<span class="string">&#x27;password&#x27;</span>, <span class="comment"># the password to your database</span></span><br><span class="line">        database=db_name</span><br><span class="line">        )</span><br><span class="line">  <span class="keyword">except</span> Error <span class="keyword">as</span> e:</span><br><span class="line">      <span class="built_in">print</span>(e)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_new_project</span>(<span class="params">cursor, project_title, project_description, task_descriptions</span>):</span></span><br><span class="line">  project_data = (project_title, project_description)</span><br><span class="line">  cursor.execute(<span class="string">&#x27;&#x27;&#x27;INSERT INTO projects(title, description)</span></span><br><span class="line"><span class="string">    VALUES (%s, %s)&#x27;&#x27;&#x27;</span>, project_data ) <span class="comment"># triple quotes is for code in different lines</span></span><br><span class="line"></span><br><span class="line">  project_id = cursor.lastrowid <span class="comment"># the 自动生成的id</span></span><br><span class="line"></span><br><span class="line">  tasks_data = []</span><br><span class="line">  <span class="keyword">for</span> description <span class="keyword">in</span> task_descriptions:</span><br><span class="line">    task_data = (project_id, description)</span><br><span class="line">    tasks_data.append(task_data)</span><br><span class="line"></span><br><span class="line">  cursor.executemany(<span class="string">&#x27;&#x27;&#x27;INSERT INTO tasks(project_id, description)</span></span><br><span class="line"><span class="string">    VALUES (%s, %s)&#x27;&#x27;&#x27;</span>, tasks_data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">  db = connect(<span class="string">&quot;projects&quot;</span>)</span><br><span class="line">  cursor = db.cursor()</span><br><span class="line"></span><br><span class="line">  tasks = [<span class="string">&quot;Clean bathroom&quot;</span>, <span class="string">&quot;Clean kitchen&quot;</span>, <span class="string">&quot;Clean living room&quot;</span>]</span><br><span class="line"></span><br><span class="line">  add_new_project(cursor, <span class="string">&quot;Clean house&quot;</span>,<span class="string">&quot;Clean house by room&quot;</span>,tasks)</span><br><span class="line">  db.commit() <span class="comment">#commit database changes</span></span><br><span class="line"></span><br><span class="line">  cursor.execute(<span class="string">&quot;SELECT * FROM projects&quot;</span>)</span><br><span class="line">  project_records = cursor.fetchall()</span><br><span class="line">  <span class="built_in">print</span>(project_records)</span><br><span class="line"></span><br><span class="line">  cursor.execute(<span class="string">&quot;SELECT * FROM tasks&quot;</span>)</span><br><span class="line">  tasks_records = cursor.fetchall()</span><br><span class="line">  <span class="built_in">print</span>(tasks_records)</span><br><span class="line"></span><br><span class="line">  db.close()</span><br></pre></td></tr></table></figure>

<br>
<br>
<br>

<p>注意以上的code中hard code成分还是很多,用了column name直接进入了code.<br>可塑性很差,以下改良.</p>
<h2 id="SQLAlchemy"><a href="#SQLAlchemy" class="headerlink" title="SQLAlchemy"></a>SQLAlchemy</h2><p>Get into the mysql.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE household;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\q</span><br></pre></td></tr></table></figure>
<p>建立好table退出.</p>
<br>
<br>

<p>进入个有sqlalchemy的虚拟环境.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">virtualenv mysql-sqlalchemy-workspace</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd mysql-sqlalchemy-workspace</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source bin/active</span><br></pre></td></tr></table></figure>

<p>然后装一下主角.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysql-connector-python</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install sqlalchemy</span><br></pre></td></tr></table></figure>

<p>虽然不理解但视频是这么说的:</p>
<blockquote>
<p>Now let’s connect to our database using SQLAlchemy from a Python file.<br>We’ll be using the ORM components of SQLAlchemy.</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, String, ForeignKey</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker, relationship</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declaractive <span class="keyword">import</span> declarative_base</span><br><span class="line"></span><br><span class="line">engine = create_engine(<span class="string">&quot;mysql+mysqlconnector://root:password@localhost:3306/household&quot;</span>, echo=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这句话我也没听懂</span></span><br><span class="line"><span class="comment"># to connect our database</span></span><br><span class="line"><span class="comment"># syntax is the database type along with the driver</span></span><br><span class="line"><span class="comment"># database type -&gt; mysql</span></span><br><span class="line"><span class="comment"># plus(+) the driver -&gt; mysqlconnector</span></span><br><span class="line"><span class="comment"># then give user and password</span></span><br><span class="line"><span class="comment"># replace the password into your actual password</span></span><br><span class="line"><span class="comment"># then the host for our database</span></span><br><span class="line"><span class="comment"># by default it&#x27;s at port 3306</span></span><br><span class="line"><span class="comment"># household is the database we just create</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># echo=True makes SQLAlchemy points out SQL statement</span></span><br><span class="line"></span><br><span class="line">base = declarative_base()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Project</span>(<span class="params">Base</span>):</span> <span class="comment"># also can be called as models</span></span><br><span class="line">  __tablename__ = <span class="string">&#x27;projects&#x27;</span></span><br><span class="line">  __table_args__ = &#123;<span class="string">&#x27;schema&#x27;</span>:<span class="string">&#x27;household&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">  project_id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">  title = Column(String(length=<span class="number">50</span>))</span><br><span class="line">  description = Column(String(length=<span class="number">50</span>))</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;Project(title&#x27;&#123;0&#125;&#x27;, description=&#x27;&#123;1&#125;&#x27;)&gt;&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">      self.title, self.description</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">clase Task(Base):</span><br><span class="line">  __tablename__ = <span class="string">&#x27;tasks&#x27;</span></span><br><span class="line">  __table_args__ = &#123;<span class="string">&#x27;schema&#x27;</span>:<span class="string">&#x27;household&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">  task_id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">  project_id = Column(Integer, ForeignKey(<span class="string">&#x27;household.projects.project_id&#x27;</span>))</span><br><span class="line">  description = Column(String(length=<span class="number">50</span>))</span><br><span class="line"></span><br><span class="line">  <span class="comment"># define foreign key relationship</span></span><br><span class="line">  project = relationship(<span class="string">&quot;Project&quot;</span>)</span><br><span class="line">  <span class="comment"># notice we use project the name of the class not the name of the table</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;Task(description=&#x27;&#123;0&#125;&#x27;)&gt;&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">      self.description</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">Base.metadata.create_all(engine) <span class="comment"># pass in the engine</span></span><br><span class="line"><span class="comment"># for the create all function, if the table already exist</span></span><br><span class="line"><span class="comment"># then SQLAlchemy will use the already existing table rather than creating new tables</span></span><br><span class="line"></span><br><span class="line">session_maker = sessionmaker()</span><br><span class="line">session_maker.configure(bind=engine)</span><br><span class="line">session = session_maker()</span><br><span class="line"></span><br><span class="line"><span class="comment"># session can create data transaction</span></span><br><span class="line"><span class="comment"># transaction is a set of all or nothing queries</span></span><br><span class="line"><span class="comment"># we either want all of them to run or none of them to run</span></span><br><span class="line"><span class="comment"># we never leave the database in half done state</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># create the data</span></span><br><span class="line">organize_closet_project = Project(title=<span class="string">&#x27;Organize closet&#x27;</span>, description=<span class="string">&#x27;In a cool way&#x27;</span>)</span><br><span class="line"><span class="comment"># insert into database</span></span><br><span class="line">session.add(organize_closet_project)</span><br><span class="line">session.commit()</span><br><span class="line"></span><br><span class="line">tasks = [Task(project_id=organize_closet_project.project_id, description=<span class="string">&#x27;Decide what close to donate&#x27;</span>),</span><br><span class="line">Task(project_id=organize_closet_project.project_id, description=<span class="string">&#x27;Organize winter clothes&#x27;</span>),</span><br><span class="line">Task(project_id=organize_closet_project.project_id, description=<span class="string">&#x27;Organize summer clothes&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># to make project_id work, we need to commit the project edition first</span></span><br><span class="line"><span class="comment"># we have to do this because auto incrementation of the primary key doesn&#x27;t happen until after</span></span><br><span class="line"><span class="comment"># the project has been added to the database</span></span><br><span class="line"><span class="comment"># once the project insertion is committed, the database will initialize that project_id attribute</span></span><br><span class="line"><span class="comment"># the project object itself will also be updated so project_id will no longer be null</span></span><br><span class="line"></span><br><span class="line">session.bulk_save_objects(tasks) <span class="comment"># to save a lot of data at one time</span></span><br><span class="line">session.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># select the organized closet project</span></span><br><span class="line">our_project = session.query(Project).filter_by(title=<span class="string">&#x27;Organize closet&#x27;</span>).first()</span><br><span class="line"><span class="comment"># this could return lots of results, but we add first for specific instance</span></span><br><span class="line"><span class="built_in">print</span>(our_project)</span><br><span class="line"></span><br><span class="line"><span class="comment"># retrieve all of the task data</span></span><br><span class="line">our_task = session.query(Task).<span class="built_in">all</span>()</span><br><span class="line"><span class="built_in">print</span>(our_task)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="Add-CSV"><a href="#Add-CSV" class="headerlink" title="Add CSV"></a>Add CSV</h2><p>We have a database called ‘sales’.</p>
<p>记得.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysql-connector-python</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector <span class="keyword">as</span> mysql</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">connect = mysql.connect(</span><br><span class="line">  host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  password=<span class="string">&#x27;password&#x27;</span>, <span class="comment"># the password to your database</span></span><br><span class="line">  database=<span class="string">&#x27;sales&#x27;</span>,</span><br><span class="line">  allow_local_infile=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line">create_query = <span class="string">&#x27;&#x27;&#x27;CREATE TABLE salesperson(</span></span><br><span class="line"><span class="string">  id INT(255) NOT NULL AUTO_INCREMENT,</span></span><br><span class="line"><span class="string">  first_name VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">  last_name VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">  email_address VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">  city VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">  state VARCHAR(255) NOT NULL,</span></span><br><span class="line"><span class="string">  PRIMARY KEY(id))&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&quot;DROP TABLE IF EXISTS salesperson&quot;</span>)</span><br><span class="line"></span><br><span class="line">cursor.execute(create_query)</span><br><span class="line"></span><br><span class="line"><span class="comment"># this will read everything into string</span></span><br><span class="line"><span class="comment"># with open(&#x27;./salesperson.csv&#x27;, &#x27;r&#x27;) as f: # read only format</span></span><br><span class="line"><span class="comment">#  csv_data = csv.reader(f)</span></span><br><span class="line"><span class="comment">#  for row in csv_data:</span></span><br><span class="line"><span class="comment">#    print(row)</span></span><br><span class="line"><span class="comment">#    row_tuple = tuple(row)</span></span><br><span class="line"><span class="comment">#    cursor.execute(&#x27;INSERT INTO salesperson(first_name, last_name, email_address, city, state) VALUES(&quot;%s&quot;,&quot;%s&quot;,&quot;%s&quot;,&quot;%s&quot;,&quot;%s&quot;)&#x27;, row_tuple)</span></span><br><span class="line"><span class="comment">## we do have to insert each row individually since we have to do that tuple conversion</span></span><br><span class="line"></span><br><span class="line">q = <span class="string">&#x27;&#x27;&#x27;LOAD DATA LOCAL INFILE &#x27;/Users/.../salesperson.csv&#x27; INTO TABLE salesperson FIELDS TERMINATED BY &#x27;,&#x27; ENCLOSED by &#x27;&quot;&#x27; (first_name, last_name, email_address, city, state);&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">cursor.execute(q)</span><br><span class="line"></span><br><span class="line">connection.commit()</span><br><span class="line"></span><br><span class="line">curosr.execute(<span class="string">&quot;SELECT * FROM salesperson LIMIT 10&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br><span class="line"></span><br><span class="line">connection.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<br>
<br>

<h1 id="ETL"><a href="#ETL" class="headerlink" title="ETL"></a>ETL</h1><p>因为大多是讲API如何在python中使用,tool&gt;knowledge的成分多,就没有继续记下去了.<br>但这一块讲ETL的挺好所以单独记一下.</p>
<img src="/blog/2022/05/15/P240/P240_1.jpg" class="">
<img src="/blog/2022/05/15/P240/P240_2.jpg" class="">

<p>ETL, also known as extract, transformation and load.<br>Idea is we extract or we read the data from it source, database or spreadsheet. Or we extract it from applications of IoT data streams, and then we do things to transform the data.<br>We can think of each data source as a puzzle piece, and the transformation is the operations that help us reshape those puzzle pieces so that they all fit together in a logical way.<br>Finally once we have the data transformed then we can load it into a relational database, at which point we can then start using SQL to analyze it.</p>
<img src="/blog/2022/05/15/P240/P240_3.jpg" class="">

<p>Transformation is a board topic, it could be as simple as removing out the white spaces or tabs at the beginning or end of the text.<br>We also have to reformat dates. Different system use different representation for dates, so we want to make sure we have a consistent way of looking at dates.<br>Also two different system that talks about the same thing, say for example, the departments in your organization they might use different codes to refer to them. So one application might use two letter codes to refer to departments and another application might spell out the whole name of the application. When transform, we need to pick the standard way of categorizing data or standard sets of codes and make sure we consistently use those.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/%E7%BC%96%E7%A0%81/" rel="tag"># 编码</a>
              <a href="/blog/tags/%E4%BB%A5%E5%A4%B4%E6%8A%A2%E5%9C%B0-%E8%AF%9A/" rel="tag"># 以头抢地(诚)</a>
              <a href="/blog/tags/data/" rel="tag"># data</a>
              <a href="/blog/tags/SQL/" rel="tag"># SQL</a>
              <a href="/blog/tags/python/" rel="tag"># python</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2022/05/15/P241/" rel="prev" title="垂死病中惊坐起">
      <i class="fa fa-chevron-left"></i> 垂死病中惊坐起
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2022/05/12/P238/" rel="next" title="从零开始的finance旅途">
      从零开始的finance旅途 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SQLite"><span class="nav-number">1.</span> <span class="nav-text">SQLite</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Add-data"><span class="nav-number">1.1.</span> <span class="nav-text">Add data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tuple"><span class="nav-number">1.2.</span> <span class="nav-text">Tuple</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Object-relational-mapping-ORM"><span class="nav-number">2.</span> <span class="nav-text">Object-relational mapping(ORM)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Import-and-add-data"><span class="nav-number">2.1.</span> <span class="nav-text">Import and add data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-table"><span class="nav-number">2.2.</span> <span class="nav-text">Create table</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL"><span class="nav-number">3.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-shell"><span class="nav-number">3.1.</span> <span class="nav-text">MySQL shell</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python"><span class="nav-number">4.</span> <span class="nav-text">Python</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-function"><span class="nav-number">4.1.</span> <span class="nav-text">Create function</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQLAlchemy"><span class="nav-number">4.2.</span> <span class="nav-text">SQLAlchemy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Add-CSV"><span class="nav-number">4.3.</span> <span class="nav-text">Add CSV</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ETL"><span class="nav-number">5.</span> <span class="nav-text">ETL</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mazui"
      src="/blog/images/logo_9.png">
  <p class="site-author-name" itemprop="name">Mazui</p>
  <div class="site-description" itemprop="description">与孤独和平共处.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">257</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:mazui.and.rio@gmail.com" title="E-Mail → mailto:mazui.and.rio@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3032131561?topnav=1&wvr=6&topsug=1&ssl_rnd=1606158448.6943&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;3032131561?topnav&#x3D;1&amp;wvr&#x3D;6&amp;topsug&#x3D;1&amp;ssl_rnd&#x3D;1606158448.6943&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/mazui_3" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/mazui_3" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </div>

<br>
      <!--new music test-->

  <!--网易云插件-->
<iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/4mCwspCTPF1aoWUNxsS5aD?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mazui</span>

<!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>


    <span title="C">1.1m</span>
  -->

  <!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="T">17:03</span>

  -->

</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
<br>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">阅览室一共有1.1m的老兔正在打瞌睡</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://mazui3-com.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://mazui3.github.io/blog/2022/05/15/P240/";
    this.page.identifier = "2022/05/15/P240/";
    this.page.title = "关于在python中写SQL的笔记";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://mazui3-com.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
