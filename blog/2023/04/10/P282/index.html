<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/star.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/star.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/star.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/blog/lib/pace/pace-theme-minimal.min.css">
  <script src="/blog/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mazui3.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":265,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":{"text":"Load Disqus","order":-1}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="这里是捣鼓renpy时的自用代码笔记.虽说是笔记,图省力有些内容直接copy&amp;paste各路教程,如果没标注原文链接就是忘了(对不起).">
<meta property="og:type" content="article">
<meta property="og:title" content="Renpy坐牢记录">
<meta property="og:url" content="https://mazui3.github.io/blog/2023/04/10/P282/index.html">
<meta property="og:site_name" content="Underlake Reading Room">
<meta property="og:description" content="这里是捣鼓renpy时的自用代码笔记.虽说是笔记,图省力有些内容直接copy&amp;paste各路教程,如果没标注原文链接就是忘了(对不起).">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://mazui3.github.io/blog/2023/04/10/P282/P282_1.gif">
<meta property="og:image" content="https://mazui3.github.io/blog/2023/04/10/P282/P282_3.jpeg">
<meta property="og:image" content="https://mazui3.github.io/blog/2023/04/10/P282/P282_2.gif">
<meta property="article:published_time" content="2023-04-10T04:50:40.000Z">
<meta property="article:modified_time" content="2024-01-01T16:36:10.344Z">
<meta property="article:author" content="Mazui">
<meta property="article:tag" content="C4ToolBox">
<meta property="article:tag" content="Renpy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mazui3.github.io/blog/2023/04/10/P282/P282_1.gif">

<link rel="canonical" href="https://mazui3.github.io/blog/2023/04/10/P282/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Renpy坐牢记录 | Underlake Reading Room</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Underlake Reading Room</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">这里是图书馆外的阅览室🌟</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/blog/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-zone">

    <a href="https://cerulean-raclette-358.notion.site/QQ-7770800c659c4c5cbda0ba1b6720dec8" rel="noopener" target="_blank"><i class="fab fa-diaspora fa-fw"></i>Zone</a>

  </li>
        <li class="menu-item menu-item-back">

    <a href="https://mazui3.github.io/" rel="section"><i class="fa fa-cloud fa-fw"></i>Back</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mazui3.github.io/blog/2023/04/10/P282/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/logo_11.jpg">
      <meta itemprop="name" content="Mazui">
      <meta itemprop="description" content="与孤独和平共处.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Underlake Reading Room">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Renpy坐牢记录
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-10 12:50:40" itemprop="dateCreated datePublished" datetime="2023-04-10T12:50:40+08:00">2023-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2024-01-02 00:36:10" itemprop="dateModified" datetime="2024-01-02T00:36:10+08:00">2024-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/GameDev%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">GameDev笔记</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/blog/2023/04/10/P282/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/04/10/P282/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="C">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>24k</span>
            </span>
            <span class="post-meta-item" title="T">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>22 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <img src="/blog/2023/04/10/P282/P282_1.gif" class="" width="128" height="200" title="跟大家分享一下colin老师的可爱ddl">

<p>这里是捣鼓renpy时的<strong>自用</strong>代码笔记.<br>虽说是笔记,图省力有些内容直接copy&amp;paste各路教程,<del>如果没标注原文链接就是忘了(对不起).</del></p>
<span id="more"></span>

<br>
<br>
<br>

<h1 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=FGFRTQIrn4k">代码structure建议.</a></p>
</blockquote>
<h2 id="更改对话框"><a href="#更改对话框" class="headerlink" title="更改对话框"></a>更改对话框</h2><p>参数在gui.rpy的Dialogue section下.<br>没什么特别的,更换图片,按着参数慢慢改.</p>
<br>
<br>

<h2 id="文字描边"><a href="#文字描边" class="headerlink" title="文字描边"></a>文字描边</h2><p>我在同样是gui.rpy的dialogue section下自加了一下代码.实现的是全文描边.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define gui.dialogue_text_outlines = [ (<span class="number">0</span>, <span class="string">&quot;#4a0303&quot;</span>, <span class="number">1</span>, <span class="number">1</span>) ]</span><br><span class="line">define gui.charaters_text_outlines = [ (<span class="number">0</span>, <span class="string">&quot;#4a0303&quot;</span>, <span class="number">1</span>, <span class="number">1</span>) ]</span><br><span class="line">define gui.name_text_outlines = [ (<span class="number">0</span>, <span class="string">&quot;#4a0303&quot;</span>, <span class="number">1</span>, <span class="number">1</span>) ]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>gui.dialogue_text_outlines应该是系统自带参数.</p>
</blockquote>
<p>关于<a target="_blank" rel="noopener" href="https://www.reddit.com/r/RenPy/comments/ugu1is/outline_to_single_word/">single word描边</a>,使用部分outline.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;You &#123;outlinecolor=#FFC&#125;did&#123;/outlinecolor&#125; it!&quot;</span></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="开屏页面-splashscreen"><a href="#开屏页面-splashscreen" class="headerlink" title="开屏页面(splashscreen)"></a>开屏页面(splashscreen)</h2><p><a target="_blank" rel="noopener" href="https://www.renpy.org/doc/html/splashscreen_presplash.html">Renpy doc</a>.<br>在script.rpy加就好.<br><del>但是不知道为什么我第一次加的时候就是不work可能某个设置冲突了.只要删了重来.</del><br><del>所以推荐一开始把这些基础设定都设定好再ry.</del></p>
<div class="note ">
            <p>Ren’Py中自带了几个默认的文本标签，是在主菜单(main menu)界面之前执行的。<br>详情可参考如下链接：<a target="_blank" rel="noopener" href="https://www.renpy.org/doc/html/label.html#special-labels">doc</a>.<br>此处可用的特殊文本标签有3个：splashscreen、before_main_menu和main_menu。<br>这3个文本标签在新建工程生成的脚本中并不存在(screen.rpy中的main_menu是screen名，不是label名，请勿混淆)。<br>我们可以在工程自动生成的任意一个rpy文件中添加这些文本标签，或者可以自己新建一个rpy文件并添加这些文本标签。</p>
          </div>

<div class="note ">
            <p>按照上面的办法显示的logo，鼠标一点就直接跳过了，有没有办法让logo不能跳过？<br>办法的确是有的……使用 renpy.pause 函数。<br>在每一个不想被跳过的scene、show和hide语句后面，都加上一句：</p>
          </div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ renpy.pause(<span class="number">1</span>, hard=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<div class="note ">
            <p>开头的刀乐符号($)表示后面是一个python函数，入参的数字1表示持续(event)的时间为1秒，hard为True表示鼠标点击不能打断暂停。<br>官方文档对hard赋值为True用法的建议是——Use this sparingly, as it’s hard to distinguish a hard pause from a crashing game(谨慎使用，因为很难区分硬性暂停和程序卡死)。</p>
          </div>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/54110016">知乎章鱼大佬:自定义开场画面</a>.</p>
</blockquote>
<br>
<br>

<h2 id="封面-menu"><a href="#封面-menu" class="headerlink" title="封面(menu)"></a>封面(menu)</h2><p>menu分多种,quick menu是进入游戏后,对话框下面的save load and skip.<br>menu指的是刚进入页面的封面.</p>
<p>screen main_menu是在load这个main menu游戏时的function.<br><a target="_blank" rel="noopener" href="https://www.reddit.com/r/RenPy/wiki/guides/menus/">main_menu和game_menu还是两个东西.</a></p>
<blockquote>
<p>The difference is simple: Game Menu is shown when the game is in progress, i.e. right-click or Escape would take you back to playing.<br>Main Menu is shown when the gameplay has not started, or the player has exited to Main Menu. So screen main_menu and screen game_menu both include (“ use “) screen navigation .</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/346838182">知乎章鱼大佬:GUI定制化之主菜单</a>.</p>
</blockquote>
<br>
<br>

<h2 id="Image-buttom"><a href="#Image-buttom" class="headerlink" title="Image buttom"></a>Image buttom</h2><p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=34373">Image scale</a>.<a target="_blank" rel="noopener" href="https://www.renpy.org/doc/html/screens.html">Imagebutton</a>.<br>图案按钮,图案的缩小方式立绘,背景可以用zoom(控制摄像机和镜头的距离),链接里讲的im.Scale function也许是直接改scale.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">image quick button option size = im.Scale(<span class="string">&quot;images/UI/quick_option_%s.png&quot;</span>, <span class="number">50</span>,<span class="number">50</span>)</span><br></pre></td></tr></table></figure>

<p>楼主还说快速的话可以直接zoom buttom:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">init:</span><br><span class="line">    transform customzoom:</span><br><span class="line">        zoom <span class="number">0.8</span></span><br><span class="line"></span><br><span class="line">screen blah:</span><br><span class="line">    imagebutton:</span><br><span class="line">        idle <span class="string">&#x27;blah&#x27;</span></span><br><span class="line">        hover <span class="string">&#x27;blah</span></span><br><span class="line"><span class="string">        action blah</span></span><br><span class="line"><span class="string">        at customzoom # this line</span></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="图像-image"><a href="#图像-image" class="headerlink" title="图像(image)"></a>图像(image)</h2><div class="note ">
            <p>第一个问题：如何定义图像(image)？</p><p>答：定义图像(image)的方法有两种：1. 把图片文件(png和jpg格式)放入images目录。2. 在脚本中使用图像定义语句。</p><p>第一种方法的关键在于：图片文件的命名。去掉文件扩展名之后，图片名字符串强制转换为小写，字符串第一个空格前的子字符串就是图像的名称(也就是说不支持中文)，如果没有文件名没有空格分隔则整个字符串就是图像名称。<br>例如，我们请来了尼禄(?)，图片名称为“nero normal.png”，直接放入image目录中(再次建议最好单独建一个character子目录专门放角色图片，甚至每个角色建立单独目录)，在脚本中不需要任何定义就可以直接使用show语句显示：</p>
          </div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># show语句的用法在后面</span></span><br><span class="line">show nero normal</span><br></pre></td></tr></table></figure>

<div class="note ">
            <p>Ren’Py会自动搜索所有在images目录及其子目录下的图片资源，并根据图片文件名定义好图像(image)便于直接在脚本中使用。<br>如果存在同名图片，则按照拉丁字母排序遍历整个目录结构后得到的顺序，使用最先匹配到的那张图。<br>如果不能理解上一句话，就改为记住：“避免图片重名！”图片同名，但扩展名不同的也属于图片重名。<br>图片名如果使用空格分隔成几个字段的话，第一个字段就表示图像标签(tag)，后面的字段都表示图像属性(attribute)。图像标签和图像属性在后面的几个语句中会解释，主要作用是用来提(tou)效(lan)。</p><p>image语句还可以把一些图片合并起来使用，比如：</p>
          </div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">image nero double = HBox(</span><br><span class="line">    <span class="string">&quot;images/charater/nero normal.png&quot;</span>,</span><br><span class="line">    <span class="string">&quot;images/charater/nero normal.png&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<div class="note ">
            <p>附带说明，纯色(solid)也可以使用image语句直接定义。特别是常用的全黑和全白，在转场之类的时候有用：</p>
          </div>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">image black = <span class="string">&quot;#000&quot;</span></span><br><span class="line">image white = <span class="string">&quot;#ffffff&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/55809477">知乎章鱼大佬:图像、图层以及4个常用语句</a>.</p>
</blockquote>
<br>
<br>

<h2 id="rollback"><a href="#rollback" class="headerlink" title="rollback"></a>rollback</h2><p>Renpy自带返回上一句台词,叫rollback.<br>在gui.py里加一句:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">define config.rollback_enable = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>就可以取消rollback.</p>
<br>
<br>

<h2 id="increase-space-between-lines-of-text"><a href="#increase-space-between-lines-of-text" class="headerlink" title="increase space between lines of text"></a><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=32770">increase space between lines of text</a></h2><p>在script.py里增加:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">init -<span class="number">2</span>:</span><br><span class="line">    style say_thought:</span><br><span class="line">        line_spacing <span class="number">20</span></span><br><span class="line">    style say_dialogue:</span><br><span class="line">        line_spacing <span class="number">20</span></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="打字机效果-每个字符出现"><a href="#打字机效果-每个字符出现" class="headerlink" title="打字机效果(每个字符出现)"></a>打字机效果(每个字符出现)</h2><p>需要调cp(characters per second)值.<br>如果是全局的话可以在option.py的preferences.text_cps里调.</p>
<br>
<br>

<p>(cps以外的)</p>
<h2 id="速度與等待"><a href="#速度與等待" class="headerlink" title="速度與等待"></a>速度與等待</h2><p>cps：<br>本標籤可以控制文字每秒顯示的字數。<br>可以是一個絕對的數字，也可以是基於當前顯示速度的變化值。比方說「{cps=*2}文字文字文字{/cps}」這樣。<br>fast：<br>這個標籤前的文字會瞬間顯示出來，無視於 cps 或其他設定。<br>nw：<br>表示 no wait（不等待）。本行文字顯示完後，「不用按滑鼠」就能自動前進到下一行的腳本指令。<br>p：<br>等待指定的秒數或經過滑鼠點擊，然後才換行繼續。<br>w：<br>同 p 不過不換行。</p>
<br>
<br>

<h2 id="整体设置的聲音調控"><a href="#整体设置的聲音調控" class="headerlink" title="整体设置的聲音調控"></a>整体设置的聲音調控</h2><p>您可以指定讓遊戲在某些特殊時刻，播放特殊的音樂或音效。</p>
<p>比較常用的有下面幾個：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># config.enter_sound = &quot;click.wav&quot;          # 進入 game menu 時的音效</span></span><br><span class="line"><span class="comment"># config.exit_sound = &quot;click.wav&quot;           # 離開 game menu 時的音效</span></span><br><span class="line"><span class="comment"># style.button.activate_sound = &quot;click.wav&quot; # 在遊戲中按按鈕時，會發出的音效</span></span><br><span class="line"><span class="comment"># config.main_menu_music = &quot;main_menu_theme.ogg&quot; # 這行定義在主選單 (main menu) 中，會播放什麼音</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注,繁体字的一些是从12年的【雪凡与朋友们系列】ctrl c+v过来的.没有校对现今的版本冲突问题.</p>
</blockquote>
<br>
<br>

<h2 id="加密與略去"><a href="#加密與略去" class="headerlink" title="加密與略去"></a>加密與略去</h2><p>Ren’Py 遊戲引擎支援替遊戲資源「加密」的功能。</p>
<p>簡單地說吧。這個功能可確保玩家無法手動挖掘您的遊戲資料夾，偷看您的遊戲圖檔與故事腳本。人性本惡是個好假設，否則網路上也就不會有那麼多ＣＧ包在四處流傳了。<br>我們可在建立分發版時，透過 build.classify() 函式來加密（或略去）某些檔案。</p>
<p>它是這樣用的：</p>
<p>build.classify(檔名匹配模式, 分類名)<br>build.classify() 會將所有滿足「檔名匹配模式」的檔案，歸入指定的「分類」中。依檔案所屬分類不同，遊戲在打包這些檔案時也會採用不同的處理方式。</p>
<p>舉例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">build.classify(<span class="string">&#x27;game/char/**&#x27;</span>, <span class="string">&#x27;archive&#x27;</span>)    <span class="comment"># 將 game/char 資料夾下的一切檔案放入 archive 分類中</span></span><br><span class="line">build.classify(<span class="string">&#x27;game/*.rpy&#x27;</span>, <span class="string">&#x27;archive&#x27;</span>)      <span class="comment"># 將 game 資料夾下，附檔名為 rpy 的檔案放入 archive 分類中</span></span><br><span class="line">build.classofy(<span class="string">&#x27;README_win.html&#x27;</span>, <span class="string">&#x27;windows&#x27;</span>) <span class="comment"># 將 base 資料夾下的 README_win.html 檔案放入 windows 分類中</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>我记得这个在config文件?中有默认的一些代码,可以跟着代码续写需要隐藏的文件.</p>
</blockquote>
<br>
<br>

<h2 id="自動圖片定義"><a href="#自動圖片定義" class="headerlink" title="自動圖片定義"></a>自動圖片定義</h2><div class="note info:warning">
            <p>这个功能倒是真的没听说过,得研究一下.</p>
          </div>

<p>透過設定以下兩個變數：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">config.automatic_images = [<span class="string">&#x27;_&#x27;</span>, <span class="string">&#x27;/&#x27;</span>] <span class="comment"># 定義分隔符號</span></span><br><span class="line">config.automatic_images_strip = [<span class="string">&#x27;char&#x27;</span>, <span class="string">&#x27;bg&#x27;</span>] <span class="comment"># 刪掉不需要的前綴</span></span><br></pre></td></tr></table></figure>
<p>Ren’Py 會掃描 game 資料夾下所有檔案，並將 png 與 jpg 圖檔找出來，然後把副檔名去掉。接著用 config.automatic_image 所設定的分隔符號，將（包含路徑的）檔名切開。</p>
<p>比方說以下幾個檔案：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">item/ufo_black.png</span><br><span class="line">char/info_happy.png</span><br><span class="line">bg/library.png</span><br><span class="line">bg/library_night.jpg</span><br></pre></td></tr></table></figure>
<p>依照前面 config.automatic_images 設定的值，圖片名稱將會被切割成：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">item ufo black    <span class="comment"># / 與 _ 成為分隔符號</span></span><br><span class="line">char info happy   <span class="comment"># / 與 _ 成為分隔符號</span></span><br><span class="line">bg library        <span class="comment"># 只有 / 成為分隔符號</span></span><br><span class="line">bg library night  <span class="comment"># / 與 _ 成為分隔符號</span></span><br></pre></td></tr></table></figure>
<p>然後再用 config.automatic_images_strip 中設定的內容，將不必要的前綴裁掉。</p>
<p>依照先前的設定為例，圖片名字將變成為：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">item ufo black  <span class="comment"># 沒有任何東西被裁掉</span></span><br><span class="line">info happy      <span class="comment"># char 被裁掉</span></span><br><span class="line">library         <span class="comment"># bg 被裁掉</span></span><br><span class="line">library night   <span class="comment"># bg 被裁掉</span></span><br></pre></td></tr></table></figure>
<p>而其中，「只有圖片名字在兩截以上」的圖片，才會列入自動圖片定義的範圍。</p>
<p>所以最後您會得到三個被定義好的圖片，分別為：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">item ufo black</span><br><span class="line">info happy</span><br><span class="line">library night</span><br></pre></td></tr></table></figure>
<p>以上三張圖片的自動定義，等效於手打以下三行：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">image item ufo black = <span class="string">&quot;item/ufo_black.png&quot;</span></span><br><span class="line">image info happy = <span class="string">&quot;char/info_happy.png&quot;</span></span><br><span class="line">image library night = <span class="string">&quot;bg/library_night.jpg&quot;</span></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="滑鼠游標自定義"><a href="#滑鼠游標自定義" class="headerlink" title="滑鼠游標自定義"></a>滑鼠游標自定義</h2><p>黑白箭頭的游標實在太過無趣？想換滑鼠游標，怎麼辦？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cursor_default_frame1 = (<span class="string">&quot;檔名1&quot;</span>, hotspot_x, hotspot_y) <span class="comment"># 設定一個單獨的「禎」</span></span><br><span class="line">cursor_default_frame2 = (<span class="string">&quot;檔名2&quot;</span>, hotspot_x, hotspot_y) <span class="comment"># 設定另一禎，多禎交替播放能造成動畫效果。</span></span><br><span class="line"></span><br><span class="line">cursor_default = [cursor_default_frame1, cursor_default_frame2] <span class="comment"># 將多個禎放在列表中，會依序播放。</span></span><br><span class="line"></span><br><span class="line">config.mouse = &#123;<span class="string">&#x27;default&#x27;</span>: cursor_default&#125; <span class="comment"># 將設定好的游標（含動畫）定名為 &#x27;default&#x27;</span></span><br></pre></td></tr></table></figure>
<p>每個單獨的游標－－如上面範例中的 cursor_default－－都是由一個 list（列表）構成的。而列表中的每一個元素，都代表了一「禎 (frame)」，游標會以每秒 20 禎的播放速度（也就是 20 Hz）在禎與禎之間進行切換，由此組成游標動畫。</p>
<p>每一個單獨的「禎」，都是一個有三項元素的元組 (tuple)。</p>
<p>元組中第一個元素代表著該禎所用的圖檔檔名，而後兩個元素則代表著這張圖片的 hotspot 的座標。</p>
<p>config.mouse 是一個存放著遊戲中所有可用滑鼠游標的字典 (dict)，其「鍵」就是游標的名稱。預設名稱包括：”default”, “say”, “with”, “menu”, “prompt”, “imagemap”, “pause”, “mainmenu” 與 “gamemenu”……這些名字應該很容易顧名思義，故不特別介紹。</p>
<p>如果您實在搞不懂，如同上面的示範，只設定 “default” 一項就準沒錯了。</p>
<div class='spoiler collapsed'>
    <div class='spoiler-title'>
        “【hotspot 熱點】”
    </div>
    <div class='spoiler-content'>
        <p>hotspot 是游標的一項重要屬性。</p>
<p>您可以想像一下，一張游標圖片本身有寬度也有高度。假設您現在正在玩踩地雷遊戲，遊戲中的地雷格子很小又全部擠成一團，當您按下滑鼠左鍵，想要點一個格子時，究竟是哪個格子被點到呢？畢竟游標的圖片比較大，一次壓到了四五個格子啊！</p>
<p>所謂的 hotspot 就是說明，圖片中究竟是哪個點（用座標表示）才會實際和電腦中的元件互動，至於其他部份，僅僅只是當作視覺上的裝飾品而已。<br>通常箭頭形游標會將熱點設在箭頭尖端，手指形游標會設在指尖，圓形或 I 形游標會設在圖片中間……總之熱點各有不同。</p>
<p>無論如何，您可以透過開發者工具中的 Image Location Picker 來確認圖片上的座標，進而去設定熱點的位置。</p>

    </div>
</div>

<br>
<br>

<h2 id="區段觀念"><a href="#區段觀念" class="headerlink" title="區段觀念"></a>區段觀念</h2><p><strong>初始區段 (init block):</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">init:</span><br><span class="line">    <span class="comment"># 這個內部就是初始區段</span></span><br><span class="line">    image library = <span class="string">&quot;bg/library.png&quot;</span></span><br></pre></td></tr></table></figure>
<p>此處複習一下：您在初始區段中進行的設定，會在遊戲被載入的瞬間－－也就是在連主選單都還沒出現之前－－就被立刻執行完畢。不管這個區塊是被放在遊戲的哪個檔案中，又或是被放在檔案的最尾端，那都不例外。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">init -<span class="number">1</span>:</span><br><span class="line">    <span class="comment"># 後執行的內容</span></span><br><span class="line">init -<span class="number">2</span>:</span><br><span class="line">    <span class="comment"># 先執行的內容</span></span><br></pre></td></tr></table></figure>
<p>您可以在 init 後面加上數字，數字愈小的區段就會愈先被執行完畢；至於數字相同的初始區段，其執行順序是不分先後的，只能放入平行性質的工作。</p>
<p>初始區段的執行順序如果沒有被顯式指定的話，那預設就是 0。</p>
<p>init python: 這種區段，就僅僅只是把 Python 區段與 init 區段合併起來而已。</p>
<br>
<br>

<h2 id="特殊字體調整"><a href="#特殊字體調整" class="headerlink" title="特殊字體調整"></a>特殊字體調整</h2><p>以下標籤同樣與字體呈現方式有關，也需要透過前後兩個標籤標明影響範圍才能使用；但除此之外，這些還有些別的參數需要指定。</p>
<p>color：輸入 #f00 之類的色碼，控制文字顏色<br>size：指定字體大小。可以用 =+10 來增大減小，也可以設為絕對值<br>font：字型，輸入為檔名。<br><strong>k：字元間距。可以加大每個字之間的距離。</strong></p>
<p>下兩個標籤可以增加空白量，而且使用時都不需要加上尾部標籤。</p>
<p>space:在當前行中，加入指定數量的空白量，單位是像素。<br>vspace:會立刻分行，並在下一行的垂直方向中，加入指定像素的額外行高。<br>使用範例見此：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;用一般分行方式\n分出來的行高&#123;vspace=0&#125;與用 vspace = 0 分出來的行，高度一樣；&#123;vspace=20&#125;而透過 vspace = ? 可以增加額外的行高。&#123;vspace=-10&#125;vspace 設為負數並沒有作用。&quot;</span></span><br><span class="line"><span class="string">&quot;用在增加一段&#123;space=50&#125;額外空白上&quot;</span></span><br></pre></td></tr></table></figure>

<br>
<br>

<h2 id="ruby-text"><a href="#ruby-text" class="headerlink" title="ruby text"></a><a target="_blank" rel="noopener" href="https://www.renpy.org/doc/html/text.html#ruby-text">ruby text</a></h2><p>嘩哈！終於出現了！上次預告過的，充滿著愛與夢想，還害咱被貼上醫療廢棄物標誌塞進垃圾桶的東西。</p>
<p>先貼張圖來：</p>
<img src="/blog/2023/04/10/P282/P282_3.jpeg" class="">

<p>要在文字中產生 ruby text 效果，您必須同時使用兩個標籤：rb 與 rt。頂部的小字是由 rt (ruby on top) 定義，rb 則用來註記底部的字。比方說，剛剛那個範例事實上是這樣寫的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;在&#123;rb&#125;ＤＭＺ&#123;/rb&#125;&#123;rt&#125;非武裝區&#123;/rt&#125;的便利商店中，\n&#123;rb&#125;ＡＴＭ&#123;/rb&#125;&#123;rt&#125;自動櫃員機&#123;/rt&#125;與&#123;rb&#125;ＡＴＭ&#123;/rb&#125;&#123;rt&#125;反戰車飛彈&#123;/rt&#125;的差別可是很重要的。&quot;</span></span><br></pre></td></tr></table></figure>

<p>rb、rt 標籤的使用規則如下：</p>
<p>rb 標籤須寫在前面，rt 標籤則緊跟在後。<br>有時您也可以不寫 rb 標籤，僅僅只去寫 rt 標籤。不過這樣一來，rt 文字就只會出現在「前一個字符」的上面，而不是「前面整個詞」的上面。</p>
<p>您現在可能很想馬上試試看 ruby text 效果，不過……<br>直接使用 ruby text，你會收到一個 “Ruby glyph out of bounds” 的錯誤。</p>
<p>以上錯誤的意思是說，您要求顯示一個 ruby 文字，但您沒有給他足夠的顯示空間……是的，Ren’Py 並不會自動替 ruby text 勻空間出來。想要使用 ruby text，您得自己動手，做一些事前配置。</p>
<p>自己動手豐衣足食，請看下面的設定方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先設定您所打算使用的 ruby 文字的特徵，這包括……</span></span><br><span class="line">init -<span class="number">1</span> python:</span><br><span class="line">    style.ruby_style = Style(style.default) <span class="comment"># 這行表示用預設的 style 為模版，建立一個全新的 style，名字為 style.ruby_style</span></span><br><span class="line">    style.ruby_style.size = <span class="number">12</span>      <span class="comment"># 設定 ruby 的字體大小是多少</span></span><br><span class="line">    style.ruby_style.yoffset = -<span class="number">20</span>  <span class="comment"># 「文字的高度」要「往下」偏移多少。因為期望中 ruby text 要往上偏，所以應該設成負值的。</span></span><br></pre></td></tr></table></figure>
<p>以上區塊可以貼在任何地方，不過作為設定的一部份，建議貼在 options.rpy 中比較適當。</p>
<p>前面的手續完成，新的 ruby style 就算是建立好了，然而建立好歸建立好，這個全新的 style 目前卻沒有被套用到任何實際顯示項目中。您必須再去設定對話者，讓對話者去使用這個 ruby style：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 隨便找一個 init block，來設定敘事者（您也可以設定在 script.rpy 檔案最上方）。</span></span><br><span class="line">init:</span><br><span class="line">    define ruby = Character(what_ruby_style = style.ruby_style, what_line_leading = <span class="number">10</span>) <span class="comment"># 一個沒有名稱的敘事者（旁白）</span></span><br><span class="line">    define info = Character(<span class="string">&quot;音符&quot;</span>,  color = <span class="string">&quot;#fff3c4&quot;</span>) <span class="comment"># 一個沒有 ruby 能力的敘事者，寫在這裡只是和下方做對比</span></span><br><span class="line">    define info_ruby = Character(<span class="string">&quot;音符&quot;</span>,  color = <span class="string">&quot;#fff3c4&quot;</span>, what_ruby_style = style.ruby_style, what_line_leading = <span class="number">10</span>) <span class="comment"># 一個帶有名字的敘事者</span></span><br></pre></td></tr></table></figure>
<p>和平常的敘事者設定相比，追加了兩個參數，包括：</p>
<p>what_ruby_style<br>將您剛剛設定好的 ruby style 指定給它，讓它使用您指定的字體大小、高度渲染。<br>what_line_leading<br>這個參數將定義「文字行上方」會被留下多少空間。數字愈大，每行文字的行高也會愈高。</p>
<p>對於擁有 ruby 文字支援能力的敘事者來說，就算您沒有真的在文字中插入 ruby 字，line_leading 也會空在那裡，不會消失。而又因為平常沒在使用 ruby text 時，上面空著一大截空間很難看，故建議各位平常寫腳本時別用 ruby 敘事者說話，只要在 ruby 字出現時小用一下就好，這樣應該是比較妥當的用法。</p>
<p>以上全數完成後，您就可以愉快地使用 ruby text 了，不過即使如此，如果不小心照顧她，您依然難免會在使用過程中碰上 “Ruby glyph out of bounds” 的問題，這是因為您雖然運用 line_leading 騰出了縱向行高，但是對於 ruby text 來說，其實橫向的寬度也是有限制的－－您不能讓 rt 字超出底部字 (rb) 允許的橫向空間太多。</p>
<p>換句話說，小字的字數會受到大字的寬度所限制。要是您打太多字、字太長，那就會愉快地爆格……</p>
<p>……嗯？您居然不覺得愉快？真是的，所以說這就是您嫩的地方了啊。具體地說，對於蹂躪不能坦率地感到歡愉，是無法從事這種好比幫地獄挖地窖的，充滿著燦爛希望的好工作啊……您看，地窖的天花板正在您頭頂上閃閃發亮呢。這是多麼美麗的現實啊！</p>
<blockquote>
<p>作者您十年前的精神状态还好吗.</p>
</blockquote>
<p>之前沒有特別提及，除了小字字數太多以外，還有另外一種狀況也會導致 “Ruby glyph out of bounds”，就是敘事者的 line_leading 與 ruby style 中的 size 尺寸不匹配－－簡單地說，ruby 文字的字體太大而文字上方留空空間不夠大，也會讓 Ren’Py 抗議沒有空間可以顯示。還請注意。</p>
<p>請注意ruby官網範例中，將新設定的 ruby_style 指定給 style.default－－這種作法會讓遊戲中的所有文字（包括按鈕上的文字，所有的！），全都能使用 ruby style 效果，但副作用就是讓所有文字的上方都多出不自然的空白空間……故並不推荐直接套用。</p>
<br>
<br>

<h2 id="標準式命名空間建立法"><a href="#標準式命名空間建立法" class="headerlink" title="標準式命名空間建立法"></a>標準式命名空間建立法</h2><p>請看下方的例子，您可以像這樣建立並使用一個命名空間：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在開始區段建立一個名叫 Lancelot 的命名空間</span></span><br><span class="line">init python <span class="keyword">in</span> Lancelot:</span><br><span class="line">    <span class="keyword">pass</span> <span class="comment"># 可以在此做一些初始化。但也可以不做任何初始化，簡單跳過。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遊戲開始</span></span><br><span class="line">label start:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 您可以直接使用這個命名空間內的變數，為各種變數設值</span></span><br><span class="line">    $ Lancelot.pilot = <span class="string">&quot;Suzaku&quot;</span></span><br><span class="line">    $ Lancelot.HP = <span class="number">100</span></span><br><span class="line">    $ Lancelot.SP = <span class="number">50</span></span><br><span class="line">    $ Lancelot.weapon = [<span class="string">&quot;VARIS&quot;</span>, <span class="string">&quot;MVS&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 像用普通變數那樣，直接去使用命名空間中的變數</span></span><br><span class="line">    <span class="string">&quot;我的名字是[Lancelot.pilot]！&quot;</span></span><br></pre></td></tr></table></figure>

<p>「標準式命名空間」的優勢，是可以在某些特定的狀況下，手動「進入」命名空間！</p>
<p>如下範例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">label start:</span><br><span class="line"></span><br><span class="line">    python <span class="keyword">in</span> Lancelot:   <span class="comment"># 進入名叫 Lancelot 的命名空間……</span></span><br><span class="line"></span><br><span class="line">        pilot = <span class="string">&quot;Suzaku&quot;</span>  <span class="comment"># 在命名空間中，不用多事替變數指定命名空間的名稱。</span></span><br><span class="line">        HP = HP + SP      <span class="comment"># 省了好多打字數！看起來也更清晰了。</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;我的名字是[Lancelot.pilot]！&quot;</span></span><br></pre></td></tr></table></figure>    
<p>在特定命名空間中，您不用囉唆地輸入全名－－這也是理所當然的！就好像您在班上大喊「座號 39 號是誰」時，別人絕不會認為您在問隔壁班或隔壁學校 39 號一樣。這在某些計算密集的場合中有其方便之處。</p>
<p>如果對 in 的用法還是不明白，官方在 changelog 中有一些說明，還請參考看看 。</p>
<p>用了命名空間之後，遊戲中就不會一堆沒頭沒腦不知道是誰的 HP 滿地滾了。當您要製作一些規模更大、資料量也更多的遊戲時，這會讓遊戲變得更強健更好管理。還能最大限度避免打錯字。命名空間大致都能自動幫您找出問題。</p>
<p>物件式命名空間建立法<br>除了前述的「標準式命名空間」外，您還可以用另一種手法建立許多獨立的命名空間：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ Lancelot = store.<span class="built_in">object</span>()    <span class="comment"># 用 store.object() 建立物件式命名空間。</span></span><br><span class="line"><span class="comment"># 如果沒有這行就直接設值給 Lancelot.xxx，則會出現錯誤訊息。</span></span><br></pre></td></tr></table></figure>
<p>此種命名空間的建立法，咱稱之為「物件式」，因為它是用 python 物件模擬出一個命名空間。在 Ren’Py 6.13 版之前（含），這也是唯一一種命名空間的啟用方式。早期版本使用者請注意這點。</p>
<p>同標準式命名空間那般，您可以透過「命名空間名稱」與點號 (.) 來精確指出變數：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">label start:</span><br><span class="line">    <span class="comment"># 以下這些變數都能被正常使用，也能正確地被儲存系統收錄</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用法沒啥不一樣，只是非得要輸入全名而已</span></span><br><span class="line">    python:</span><br><span class="line">        Lancelot.pilot = <span class="string">&quot;Suzaku&quot;</span></span><br><span class="line">        Lancelot.HP = <span class="number">100</span></span><br><span class="line">        Lancelot.SP = <span class="number">50</span></span><br><span class="line">        Lancelot.weapon = [<span class="string">&quot;VARIS&quot;</span>, <span class="string">&quot;MVS&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;我的名字是[Lancelot.pilot]！&quot;</span></span><br></pre></td></tr></table></figure>

<p>但請特別注意！物件式命名空間不支援 python in XXX 語法！</p>
<p>請看以下範例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">label start:</span><br><span class="line">   <span class="string">&quot;開始實驗囉，請保持好心情～&quot;</span></span><br><span class="line"></span><br><span class="line">   $ somebody = <span class="built_in">object</span>()       <span class="comment"># 指定 somebody 為一個物件型命名空間</span></span><br><span class="line">   $ somebody.emotion = <span class="string">&#x27;x_x&#x27;</span></span><br><span class="line">   python <span class="keyword">in</span> somebody:         <span class="comment"># 嘗試運用標準型命名空間專用的方式來修改它……</span></span><br><span class="line">       emotion = <span class="string">&#x27;^_^&#x27;</span>         <span class="comment"># Ren&#x27;Py 不會提示您做錯任何事情</span></span><br><span class="line"></span><br><span class="line">   <span class="string">&quot;您的心情是「[somebody.emotion]」&quot;</span> <span class="comment"># 警告－－此處的結果絕非您想要的！！</span></span><br></pre></td></tr></table></figure>    
<p>結果為：</p>
<p>您的心情是「x_x」<br>過程中您不會得到藍白錯誤畫面，只會在最後得到一個不仔細看很難發現的錯誤結果，因此絕對不要混用兩種方法！絕對！</p>
<p>【store.object 的命名？】<br>如果您對「物件式命名空間」進行深入測試的話，可能會發現除了 store.object() 以外，object() 與 renpy.store.object() 也都代表了相同的意思。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">label start:</span><br><span class="line">    $ t1 = <span class="built_in">object</span>()</span><br><span class="line">    $ t2 = store.<span class="built_in">object</span>()</span><br><span class="line">    $ t3 = renpy.store.<span class="built_in">object</span>()</span><br></pre></td></tr></table></figure>
<p>以上三個命名空間 t1、t2、t3 都可以正確工作無誤，而事實上他們的意思也的確都是相等的：變數 t1、t2、t3 都會成為一個 renpy.python.RevertableObject 類型的物件。</p>
<p>也就是說 renpy.store.object() 是全名，而其他的名稱則都是別名。</p>
<p>更有甚者您還能發現，被變數也可以依此種命名方式設定或取回使用。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">label start:</span><br><span class="line"></span><br><span class="line">    $ count = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    baka <span class="string">&quot;這是……蘿妲之果？居然一次拿到[store.count]顆！&quot;</span> <span class="comment"># 5 顆。</span></span><br><span class="line"></span><br><span class="line">    $ fruit = <span class="built_in">object</span>()</span><br><span class="line">    $ fruit.name = <span class="string">&quot;蘋果&quot;</span></span><br><span class="line"></span><br><span class="line">    friend <span class="string">&quot;只是普通的[renpy.store.fruit.name]而已吧！&quot;</span> <span class="comment"># 蘋果</span></span><br></pre></td></tr></table></figure>
<p>有經驗的電腦玩家應該已經看出來了－－Ren’Py 的主程式其實本身就是跑在名叫 renpy.store 的命名空間中，而所有我們自訂的遊戲變數，預設也都是被存放在這個空間裡。</p>
<br>
<br>

<p>透過自定義類別 (class) 來控制物件式命名空間<br>從上面的介紹看起來，自從 6.14 版以後，標準式命名空間顯然更適合用來收藏變數。</p>
<p>不過之所以刻意介紹物件式命名空間，是因為這種命名空間的本質是物件－－換言之，您可以用自訂類別 (class) 的方式來引導命名空間做一些特別的事情。像是進行一些限制或自動化什麼的。</p>
<p>以下是個限制變數名稱的範例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">init python:</span><br><span class="line">    <span class="comment"># 自行定義一個叫作 Someone 的類別，用來存放角色的內部資料。</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 注意 class 一定要繼承自「store.object」，否則內部資料不會被儲存。</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Someone</span>(<span class="params">store.<span class="built_in">object</span></span>):</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 這個類別的特徵是「您只能設定某些變數名稱」，此處指示本類別只能設定 name、race、description 三種東西。</span></span><br><span class="line">        <span class="comment"># 如此一來可以有效避免打錯字。</span></span><br><span class="line">        <span class="comment"># 比方說失手把 name 打成 mame 時，一旦腳本執行到此處就會立刻報錯，而不會就默不作聲地執行過去。</span></span><br><span class="line"></span><br><span class="line">        acceptable_attribute = &#123;<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;description&#x27;</span>, <span class="string">&#x27;race&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__setattr__</span>(<span class="params">self, name, value</span>):</span></span><br><span class="line">            <span class="keyword">if</span> name <span class="keyword">not</span> <span class="keyword">in</span> <span class="built_in">type</span>(self).acceptable_attribute:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">&#x27;Not allow this variable&#x27;</span>)</span><br><span class="line">            <span class="built_in">super</span>(store.<span class="built_in">object</span>, self).__setattr__(name, value)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 實際使用看看</span></span><br><span class="line">label start:</span><br><span class="line"></span><br><span class="line">    $ baka = Someone()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 試著設定各種數值</span></span><br><span class="line">    $ baka.name        = <span class="string">&#x27;⑨&#x27;</span></span><br><span class="line">    $ baka.race        = <span class="string">&#x27;妖精&#x27;</span></span><br><span class="line">    $ baka.description = <span class="string">&#x27;⑨應該不需要解釋&#x27;</span></span><br><span class="line"></span><br><span class="line">    $ baka.excuse      = <span class="string">&#x27;那個⑨是怎樣！我才不……&#x27;</span>     <span class="comment"># 這行會提示錯誤，因為 &quot;excuse&quot; 並不包括在可設定的變數之中……Resistance is futile.</span></span><br></pre></td></tr></table></figure>

<p>因為這種可以被用來自訂的特質，所以物件式命名空間在某種意義上其實更具彈性。當然，如果您用不到自訂 class 的功能，用標準型命名空間也是完全足夠的。</p>
<p>【自訂 class 的注意事項】<br>如果您用一些自訂類別 (class) 的物件來存放變數，則這個變數「一定要繼承自 store.object」，否則內部變數的變化，並不會被 Ren’Py 的 state 系統處理，當然也就無法收錄進存檔中，因此完全不能用。</p>
<p>繼承 store.object 是最重要的事情。絕對不可以忘！</p>
<br>
<br>

<h2 id="Map-Navigation"><a href="#Map-Navigation" class="headerlink" title="Map Navigation"></a>Map Navigation</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=o699N1TdlZ8&ab_channel=ZeilLearnings">Map Navigation in RenPy | Vlog #4 Creating a Map Screen</a>.</p>
<br>
<br>

<h2 id="行内字体描边"><a href="#行内字体描边" class="headerlink" title="行内字体描边"></a>行内字体描边</h2><blockquote>
<p>转载自<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/380667420">Ren’Py 无上限！</a></p>
</blockquote>
<blockquote>
<p>在同一行内设置不同的字体描边。<br>因为文本样式标签不继承 outlines 属性，所以需要特殊的方法实现。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">style border_ <span class="keyword">is</span> text:</span><br><span class="line">    color <span class="string">&quot;#fff&quot;</span></span><br><span class="line">    outlines [(<span class="number">5</span>, <span class="string">&quot;#000&quot;</span>, <span class="number">0</span>, <span class="number">0</span>)]</span><br><span class="line">    ypos -<span class="number">0.2</span></span><br><span class="line"></span><br><span class="line">style borderbox_:</span><br><span class="line">    xmaximum <span class="number">24</span> <span class="comment"># 此处适用于字号为22的情况</span></span><br><span class="line"></span><br><span class="line">init python:</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">border_tag</span>(<span class="params">tag, argument, contents</span>):</span>        </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>([</span><br><span class="line">            [(</span><br><span class="line">                renpy.TEXT_DISPLAYABLE,</span><br><span class="line">                Fixed(Text(c, style=<span class="string">&quot;border_&quot;</span>), style=<span class="string">&quot;borderbox_&quot;</span>)</span><br><span class="line">            ) <span class="keyword">for</span> c <span class="keyword">in</span> text]</span><br><span class="line">            <span class="keyword">if</span> kind == renpy.TEXT_TEXT</span><br><span class="line">            <span class="keyword">else</span> [(kind, text)]</span><br><span class="line">            <span class="keyword">for</span> kind, text <span class="keyword">in</span> contents</span><br><span class="line">        ], [])</span><br><span class="line"></span><br><span class="line">    config.custom_text_tags[<span class="string">&quot;border&quot;</span>] = border_tag</span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">    <span class="string">&quot;Yiri&quot;</span> <span class="string">&quot;有时候需要一点&#123;border&#125;&#123;cps=20&#125;恐怖的文字&#123;/cps&#125;&#123;/border&#125;。&quot;</span></span><br></pre></td></tr></table></figure>


<blockquote>
<p>原理是把需要改变描边放到 Text 中，这样就能设置单独的 style。为了实现慢速显示，这里为每一个字都包装了单独的 Text，并且外包 Fixed 来控制字间距。</p>
</blockquote>
<br>
<br>

<h2 id="Screens"><a href="#Screens" class="headerlink" title="Screens"></a>Screens</h2><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=R4Vvv_uapbk&t=0s&ab_channel=VisualNovelDesign">Ren’py Screens Tutorial</a></p>
<p>Screen是「一群 UI 元件的在螢幕上的排列組合」。</p>
<p>依據官方手冊的說明，Screen 可能因為以下四種原因被呼叫出來：</p>
<p>隱式呼叫：比方說讓 Ren’Py 顯示對話時，會自然叫出一個名叫 “say” 的 Screen，專門負責顯示對話框與對話內容。<br>自動呼叫：比方說啟動遊戲時，會自動秀出名叫 “main_menu” 的 Screen，這就是遊戲的封面主選單。<br>被現存的 UI 元件呼叫：「呼叫 Screen」這件事，有可能被當作一個行動 (action) 繫結到某些使用者操作上：如按螢幕上某個按鈕、按鍵盤的某個熱鍵等。此時可能呼叫出 Screen 來。<br>舉例而言，在遊戲中按右鍵，預設會叫出遊戲選單 (game_menu) 。<br>顯式呼叫：使用 “show screen” 指令，就會像顯示圖片那樣將 screen 直接顯示在螢幕上。</p>
<p>此處稍加提醒：Screen 總是會出現在其他圖片上。這是因為 Screen 使用的圖層和 show 圖用的圖層並不相同的緣故，設計 Screen 時還請注意這個特性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ================= 定義圖片與轉場特效 ===================</span></span><br><span class="line"></span><br><span class="line">define blight = Fade(<span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">1.5</span>, color = <span class="string">&quot;#FFF&quot;</span>)    <span class="comment"># 爆炸轉場特效，與 screen 無關</span></span><br><span class="line">image bg = <span class="string">&quot;bg.jpg&quot;</span>                                     <span class="comment"># 背景素材，與 screen 無關</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ================= screens.rpy ======================</span></span><br><span class="line"><span class="comment"># 以下是關於 screen 的定義</span></span><br><span class="line"></span><br><span class="line">screen timer:                 <span class="comment"># screen 定義在此，僅僅就只有四行而已。看起來有點複雜？等會兒再細講！</span></span><br><span class="line">    default time = <span class="number">30</span></span><br><span class="line">    timer time action [Hide(<span class="string">&quot;timer&quot;</span>), Jump(<span class="string">&quot;gameover&quot;</span>)]</span><br><span class="line">    add DynamicDisplayable(countdown, sec = time) align (<span class="number">0.5</span>, <span class="number">0.3</span>)  <span class="comment"># DynamicDisplayable 在此</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">init python:                  <span class="comment"># countdown 是 DynamicDisplayable 所使用的函式，第六章有提到這是怎麼定義的，以及幹什麼用。不重複。</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countdown</span>(<span class="params">show_time, same_tag_show_time, sec</span>):</span></span><br><span class="line">        remain_sec = sec - show_time</span><br><span class="line">        remain_text = Text(<span class="string">&#x27;剩下 &#123;:.1f&#125; 秒&#x27;</span>.<span class="built_in">format</span>(remain_sec), size = <span class="number">40</span>)</span><br><span class="line">        <span class="keyword">return</span> (remain_text, <span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ================= script.rpy =======================</span></span><br><span class="line"><span class="comment"># 以下是使用示範</span></span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">    scene bg</span><br><span class="line">    <span class="string">&quot;我迅速打開箱子的最底層，扳過計時器&quot;</span></span><br><span class="line"></span><br><span class="line">    show screen timer(time = <span class="number">10</span>)                        <span class="comment"># 顯示出計時器 screen: &quot;timer&quot;</span></span><br><span class="line">    <span class="string">&quot;炸彈爆炸只剩十秒！該死……要剪紅線還是黃線？&quot;</span></span><br><span class="line"></span><br><span class="line">    menu:</span><br><span class="line">        <span class="string">&quot;「看清楚就下手！但是時間……」&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;紅線！&quot;</span>:</span><br><span class="line">            hide screen timer                           <span class="comment"># 收掉計時器 screen: &quot;timer&quot;</span></span><br><span class="line">            jump gameover</span><br><span class="line">        <span class="string">&quot;黃線！&quot;</span>:</span><br><span class="line">            hide screen timer</span><br><span class="line">            jump gameover</span><br><span class="line">        <span class="string">&quot;藍……疑！？&quot;</span>:</span><br><span class="line">            <span class="string">&quot;你猶豫了短短一息，將鐵剪放到藍線之間，深呼吸……&quot;</span></span><br><span class="line"></span><br><span class="line">    hide screen timer</span><br><span class="line">    <span class="keyword">with</span> dissolve</span><br><span class="line">    <span class="string">&quot;喀擦&quot;</span></span><br><span class="line">    <span class="string">&quot;……冷汗流滿了全身，計時器終於停住了。&quot;</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">label gameover:</span><br><span class="line">    <span class="keyword">with</span> blight</span><br><span class="line">    <span class="string">&quot;轟隆的巨響迴盪在城市中間。少女感覺到了什麼，偶然將視線望向遠方。&quot;</span></span><br><span class="line">    <span class="string">&quot;（全篇完）&quot;</span></span><br><span class="line">    <span class="keyword">return</span></span><br></pre></td></tr></table></figure>

<p>看過上面的範例，相信各位已經注意到了，召喚 Screen 的方法就是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show screen 名稱</span><br><span class="line">hide screen 名稱</span><br></pre></td></tr></table></figure>

<p>show screen 不能像 show 那樣，在後方加上 at、with 語句。<br>但 with 語句可以作為獨立的語句而單獨存在，效果依然能套用上去。正如例子中的展示。</p>
<h3 id="阻塞與非阻塞"><a href="#阻塞與非阻塞" class="headerlink" title="阻塞與非阻塞"></a>阻塞與非阻塞</h3><p>用 show screen 呼喚出來的 Screen，是不會「阻塞」遊戲正常進行的。</p>
<p>這個意思是說，screen 只是顯示在螢幕上面，您繼續點滑鼠，故事還是能往下推進，screen 的存在並不會攔截正常遊戲腳本流程。</p>
<p>如果您就是需要一個阻塞效果，讓 screen 攔在玩家面前說：「等等！你得先把我搞定才能繼續去做別的，否則此路不通。」則您必須用 call screen 語句來取代 show screen 語句。如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">call screen 名稱</span><br></pre></td></tr></table></figure>
<p>您大可修改前述的爆炸範例來試試效果。</p>
<p>注意，您只能透過在 screen 中加入兩種 action：”Jump” 和 “Return” 來讓玩家能脫離阻塞狀態。比方說：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">screen some_screen:</span><br><span class="line">    textbuttom <span class="string">&quot;脫離阻塞&quot;</span> action Return() at truecenter</span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">    call screen some_screen</span><br></pre></td></tr></table></figure>
<pre><code>&quot;您必須脫離阻塞才能看到這一行。換句話說，您剛剛按過那個按鈕，執行過 action Return 了。&quot;
</code></pre>
<p>當這兩種 action 的其中之一被運行時，故事才能繼續進行下去。</p>
<br>
<br>

<p>咱們來看看爆炸範例中的 screen 到底是啥意思：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">screen timer:</span><br><span class="line">    default time = <span class="number">30</span></span><br><span class="line">    timer time action [Hide(<span class="string">&quot;timer&quot;</span>), Jump(<span class="string">&quot;gameover&quot;</span>)]</span><br><span class="line">    add DynamicDisplayable(countdown, sec = time) align (<span class="number">0.5</span>, <span class="number">0.3</span>)</span><br></pre></td></tr></table></figure>    
<p>上述爆炸範例中的 Screen，就只是一個計時器，功能只有兩項，非常單純。</p>
<p>首先，它會在被呼喚（show screen 或 call screen）時開始倒數計時，並在倒數歸零時，將敘事線跳轉到 label “gameover” 的地方。其次，它還會在螢幕中央顯示一個大大的倒數計時數字，來提醒玩家還剩多少時間可用。</p>
<br>
<br>

<h3 id="Screen-的參數與設值"><a href="#Screen-的參數與設值" class="headerlink" title="Screen 的參數與設值"></a>Screen 的參數與設值</h3><p>第二行的 default time = 30 表示：time 這個參數預設值為 30。如果在 show screen 時忘了指定要倒數多久，則倒數的時限就會自動被設定為三十秒。建議您觀察一下上面四行中有哪些地方用到了 time 參數，來體會參數的用法。</p>
<p>咱們對照一下顯示 screen 時的指令是什麼：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show screen timer(time = <span class="number">10</span>)</span><br></pre></td></tr></table></figure>    
<p>括號中，變數 time 會被指定為 10……由於我並沒有偷懶或忘記給值，因此 time 在本例中事實上是被設為 10 的。</p>
<p>但如果我這樣寫……</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show screen timer</span><br></pre></td></tr></table></figure>    
<p>這樣腳本也不會出錯，不過 time 沒有給定，就會從 30 秒處開始倒數。</p>
<p>您還可以在此設定別的變數，不過如果 screen 內部沒有用到這個變數，那就只是浪費時間而已：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show screen timer(emotion = <span class="string">&#x27;XD&#x27;</span>) <span class="comment"># 不會出錯，但也沒意義，因為 screen 內部沒有用到 &quot;emotion&quot; 這個參數</span></span><br></pre></td></tr></table></figure>
<br>
<br>

<h2 id="等待一定时间后触发特殊剧情"><a href="#等待一定时间后触发特殊剧情" class="headerlink" title="等待一定时间后触发特殊剧情"></a>等待一定时间后触发特殊剧情</h2><blockquote>
<p>某些隐藏剧情的进入条件是在某一处对话处等待一定时间，可以通过这样的方式实现。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">define y = Character(<span class="string">&quot;Yiri&quot;</span>)</span><br><span class="line">label start:</span><br><span class="line">    $ before_time = renpy.get_game_runtime()</span><br><span class="line">    y <span class="string">&quot;你需要在这里等待5秒钟。&#123;w=5&#125;&#123;nw&#125;&quot;</span></span><br><span class="line">    $ diff_time = renpy.get_game_runtime() - before_time</span><br><span class="line">    <span class="keyword">if</span> diff_time &lt; <span class="number">5</span>: <span class="comment"># 如果等待时间不足，进入正常剧情</span></span><br><span class="line">        y <span class="string">&quot;时间还不到哦。&quot;</span></span><br><span class="line">        y <span class="string">&quot;你只等了[diff_time]秒，你有点缺少耐心了。&quot;</span></span><br><span class="line">    <span class="keyword">else</span>: <span class="comment"># 如果等待时间充足，进入隐藏剧情</span></span><br><span class="line">        y <span class="string">&quot;不错，你等了5秒钟。&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>原理是设置一个超时自动跳过的对话，并记录对话前后的时间，对比时间差。<br>使用renpy.get_game_runtime，不会计算在菜单界面或存档期间的时间。</p>
</blockquote>
<br>
<br>

<h2 id="存档钩子"><a href="#存档钩子" class="headerlink" title="存档钩子"></a>存档钩子</h2><blockquote>
<p>有的时候我们需要在玩家存档、读档时进行一些额外的操作，这就需要拦截FileAction这一行为。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">init -<span class="number">5</span> python:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ActionHook</span>(<span class="params">Action</span>):</span></span><br><span class="line">        alt = <span class="literal">None</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, action, func</span>):</span></span><br><span class="line">            self.action = action</span><br><span class="line">            self.func = func</span><br><span class="line">            self.alt = action.alt</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">get_sensitive</span>(<span class="params">self</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.action.get_sensitive()</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">get_selected</span>(<span class="params">self</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.action.get_selected()</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">get_tooltip</span>(<span class="params">self</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.action.get_tooltip</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">periodic</span>(<span class="params">self, st</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.action.periodic(st)</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">predict</span>(<span class="params">self</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.action.predict()</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.func(self.action)</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">            <span class="keyword">return</span> self.action == other.action <span class="keyword">and</span> self.func == other.func</span><br><span class="line"></span><br><span class="line">    FileActionOld = FileAction</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">FileActionNew</span>(<span class="params">name, page=<span class="literal">None</span>, **kwargs</span>):</span></span><br><span class="line">        action = FileActionOld(name, page=page, **kwargs)</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">do_action</span>(<span class="params">action</span>):</span></span><br><span class="line">            <span class="keyword">if</span> forbid_saving <span class="keyword">and</span> renpy.current_screen().screen_name[<span class="number">0</span>] == <span class="string">&quot;save&quot;</span>:</span><br><span class="line">                renpy.notify(<span class="string">&quot;不，你现在不可以存档。&quot;</span>)</span><br><span class="line">            <span class="keyword">elif</span> forbid_loading <span class="keyword">and</span> renpy.current_screen().screen_name[<span class="number">0</span>] == <span class="string">&quot;load&quot;</span>:</span><br><span class="line">                renpy.notify(<span class="string">&quot;不，你现在不可以读档。&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> action() <span class="comment"># 执行原本的 action</span></span><br><span class="line">        <span class="keyword">return</span> ActionHook(action, do_action)</span><br><span class="line">    FileAction = FileActionNew</span><br><span class="line"></span><br><span class="line">define y = Character(<span class="string">&quot;Yiri&quot;</span>)</span><br><span class="line">default forbid_saving = <span class="literal">False</span></span><br><span class="line">default forbid_loading = <span class="literal">False</span></span><br><span class="line">label start:</span><br><span class="line">    y <span class="string">&quot;接下来是存档测试。&quot;</span></span><br><span class="line">    $ forbid_saving = <span class="literal">True</span></span><br><span class="line">    y <span class="string">&quot;现在，存档被禁止了。&quot;</span></span><br><span class="line">    y <span class="string">&quot;这很有趣，不是吗？&quot;</span></span><br><span class="line">    $ forbid_saving = <span class="literal">False</span></span><br><span class="line">    y <span class="string">&quot;好了，你现在可以存档了。&quot;</span></span><br><span class="line">    $ forbid_loading = <span class="literal">True</span></span><br><span class="line">    y <span class="string">&quot;不过，不能读档。&quot;</span></span><br><span class="line">    $ forbid_saving = <span class="literal">True</span></span><br><span class="line">    y <span class="string">&quot;现在，试试一起被禁用的感觉。&quot;</span></span><br><span class="line">    $ forbid_saving = <span class="literal">False</span></span><br><span class="line">    $ forbid_loading = <span class="literal">False</span></span><br><span class="line">    y <span class="string">&quot;很好，玩笑开够了。你可以继续了。&quot;</span></span><br><span class="line">    <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>简单解释一下上面的代码。<br>首先我们定义了一个ActionHook类，它的作用是包装一个Action并改变它的行为。可以看到它在创建时需要传入一个action和一个func，当获取属性时，返回action的相关属性，但调用（__call__）时改为调用func。<br>然后我们替换掉了原本的FileAction行为，改为创建一个ActionHook，其中调用由do_action执行。在do_action中， 进行是否执行原本行为的判断。<br>理论上用这种方法，可以拦截绝大多数的内置 action。</p>
</blockquote>
<h2 id="存档计数"><a href="#存档计数" class="headerlink" title="存档计数"></a>存档计数</h2><p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=43685">Check if Player saved.</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">define <span class="built_in">help</span> = Character(<span class="string">&#x27;Help&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># By defult we do not know about ambush.</span></span><br><span class="line"><span class="comment"># It is only set at specific point of the game.</span></span><br><span class="line">default ambush_knowledge = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># A function which takes a dictionary and saves value of ambush_knowledge as extra data</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save_extra_info</span>(<span class="params">d</span>):</span></span><br><span class="line">        d[<span class="string">&#x27;ambush_knowledge&#x27;</span>] = ambush_knowledge</span><br><span class="line"></span><br><span class="line">    <span class="comment"># We need to add this function to list of callbacks to actually invoke it as part of save process</span></span><br><span class="line">    config.save_json_callbacks.append(save_extra_info)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># A function to check if we know about ambush in any of the save files</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check_ambush_knowledge</span>():</span></span><br><span class="line">        <span class="comment"># Iterate over list of all save file names</span></span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> renpy.list_saved_games(fast=<span class="literal">True</span>):</span><br><span class="line">            <span class="comment"># Extract extra info</span></span><br><span class="line">            json = renpy.slot_json(name)</span><br><span class="line">            <span class="comment"># Get save value of ambush_knowledge. We are protected from both</span></span><br><span class="line">            <span class="comment"># missing JSON info and missing &#x27;ambush_knowledge&#x27; record</span></span><br><span class="line">            <span class="comment"># this can happen if we add this logic later in later patch and someone has save from previous version</span></span><br><span class="line">            knows_about_ambush = json.get(<span class="string">&#x27;ambush_knowledge&#x27;</span>, <span class="literal">False</span>) <span class="keyword">if</span> json <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line">            <span class="keyword">if</span> knows_about_ambush:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># A help center to hint about need to save in certain moment</span></span><br><span class="line">label knowledge_corner:</span><br><span class="line">    <span class="built_in">help</span> <span class="string">&#x27;You died.&#x27;</span></span><br><span class="line">    <span class="built_in">help</span> <span class="string">&#x27;Well, you had no way to know, what expect you behind that door, right?&#x27;</span></span><br><span class="line">    <span class="built_in">help</span> <span class="string">&#x27;If only you could &#123;color=#00F&#125;remember&#123;/color&#125;...&#123;p&#125;If only there was a way to &#123;color=#00F&#125;save&#123;/color&#125; those memories...&#x27;</span></span><br><span class="line">    <span class="built_in">help</span> <span class="string">&#x27;Maybe then you could find another way out?&#x27;</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">    <span class="string">&#x27;You see a door. There is something written on the door:&#x27;</span></span><br><span class="line">    <span class="string">&#x27;&#123;i&#125;Enter here&#123;/i&#125;&#x27;</span></span><br><span class="line">    menu:</span><br><span class="line">        <span class="string">&#x27;Enter&#x27;</span>:</span><br><span class="line">            <span class="string">&#x27;The door slammed shut behind you.&#x27;</span></span><br><span class="line">            $ ambush_knowledge = <span class="literal">True</span> <span class="comment"># All games saved after that line will pass ambush_knowledge check</span></span><br><span class="line">            <span class="string">&#x27;Suddenly light flooded the room.&#x27;</span></span><br><span class="line">            <span class="string">&#x27;You saw dozens of soldiers surrounding you.&#x27;</span></span><br><span class="line">            <span class="string">&#x27;It is a trap!&#x27;</span></span><br><span class="line">            <span class="string">&#x27;Commander&#x27;</span> <span class="string">&#x27;Fire!&#x27;</span></span><br><span class="line">            <span class="string">&#x27;You died before you even heard first gunshot.&#x27;</span></span><br><span class="line">            $ ambush_knowledge = <span class="literal">False</span> <span class="comment"># If you didn&#x27;t save before, you missed the moment.</span></span><br><span class="line">            <span class="comment"># Show hint if you did not do the right thing</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> check_ambush_knowledge():</span><br><span class="line">                call knowledge_corner</span><br><span class="line">            centered <span class="string">&#x27;YOU HAVE LOST&#x27;</span>            </span><br><span class="line"></span><br><span class="line">        <span class="comment"># This option will only be avaliable if you have a game saved in the ambush scenario</span></span><br><span class="line">        <span class="string">&quot;Don&#x27;t enter&quot;</span> <span class="keyword">if</span> check_ambush_knowledge():</span><br><span class="line">            <span class="string">&#x27;Knowing well, what waits for you behind those doors, you decide not to enter.&#x27;</span></span><br><span class="line">            <span class="string">&#x27;You eveaded the trap!&#x27;</span></span><br><span class="line">            centered <span class="string">&#x27;YOU HAVE WON&#x27;</span></span><br><span class="line">    <span class="keyword">return</span></span><br></pre></td></tr></table></figure>
<p>主要是<a target="_blank" rel="noopener" href="https://www.renpy.org/doc/html/config.html#var-config.save_json_callbacks">save_json_callbacks</a>这个build-in.</p>
<br>
<br>

<h2 id="（数据删除）效果"><a href="#（数据删除）效果" class="headerlink" title="（数据删除）效果"></a>（数据删除）效果</h2><blockquote>
<p>利用负字偶距将大量文字压缩到同一位置，达到（数据删除）的效果。<br>同时，设置 noalt 和 alt，保证历史记录中可以正常显示原本的文字。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">style compress_text <span class="keyword">is</span> text:</span><br><span class="line">    kerning -<span class="number">50</span></span><br><span class="line"></span><br><span class="line">init python:</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">define_text_tag</span>(<span class="params">name</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">func</span>):</span></span><br><span class="line">            config.custom_text_tags[name] = func</span><br><span class="line">            <span class="keyword">return</span> func</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">    @define_text_tag(<span class="params"><span class="string">&quot;erase&quot;</span></span>)    </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">erase_tag</span>(<span class="params">tag, argument, contents</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>([</span><br><span class="line">            [   </span><br><span class="line">                (renpy.TEXT_TAG, <span class="string">&quot;noalt&quot;</span>),</span><br><span class="line">                (renpy.TEXT_TAG, <span class="string">&quot;=compress_text&quot;</span>),</span><br><span class="line">                (renpy.TEXT_TEXT, <span class="string">&#x27;酯裹溴苯荸&#x27;</span>.join(text)),</span><br><span class="line">                (renpy.TEXT_TAG, <span class="string">&quot;/=compress_text&quot;</span>),</span><br><span class="line">                (renpy.TEXT_TEXT, <span class="string">&#x27;  &#x27;</span>),</span><br><span class="line">                (renpy.TEXT_TAG, <span class="string">&quot;/noalt&quot;</span>),</span><br><span class="line">                (renpy.TEXT_TAG, <span class="string">&quot;alt&quot;</span>),</span><br><span class="line">                (renpy.TEXT_TEXT, text),</span><br><span class="line">                (renpy.TEXT_TAG, <span class="string">&quot;/alt&quot;</span>),</span><br><span class="line">            ]</span><br><span class="line">            <span class="keyword">if</span> kind == renpy.TEXT_TEXT</span><br><span class="line">            <span class="keyword">else</span> [(kind, text)]</span><br><span class="line">            <span class="keyword">for</span> kind, text <span class="keyword">in</span> contents</span><br><span class="line">        ], [])</span><br><span class="line"></span><br><span class="line">label start:</span><br><span class="line">     <span class="string">&quot;**&quot;</span> <span class="string">&quot;你和我说的，不会是&#123;erase&#125;数据删除&#123;/erase&#125;吧？&quot;</span></span><br></pre></td></tr></table></figure>


<br>
<br>

<h2 id="在立绘上用气泡标识当前说话人"><a href="#在立绘上用气泡标识当前说话人" class="headerlink" title="在立绘上用气泡标识当前说话人"></a>在立绘上用气泡标识当前说话人</h2><blockquote>
<p>注册全局对话钩子，每当新的对话发出时，获取当前说话人立绘的位置，叠加一个气泡图层上去。<br>此方法需要在创建 Character 时，指定其 image 属性。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">define 北萱草 = Character(<span class="string">&quot;忘忧北萱草&quot;</span>, image=<span class="string">&quot;萱草&quot;</span>)</span><br><span class="line">image speaking = <span class="string">&quot;images/speaking.png&quot;</span>    </span><br><span class="line"></span><br><span class="line">init -<span class="number">1</span> python:</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show_speaking</span>(<span class="params">event, interact=<span class="literal">True</span>, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> interact:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        tag = renpy.get_say_image_tag()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> tag:</span><br><span class="line">            renpy.hide(<span class="string">&quot;speaking&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        bounds = renpy.get_image_bounds(tag)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> bounds:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        x, y, w, h = bounds        </span><br><span class="line">        mstyle = Transform(xpos=x / config.screen_width, ypos=y / config.screen_height)        </span><br><span class="line">        renpy.show(<span class="string">&quot;speaking&quot;</span>, at_list=[mstyle], zorder=<span class="number">1000</span>)        </span><br><span class="line"></span><br><span class="line">    config.all_character_callbacks.append(show_speaking)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此方法需要有一张和角色立绘大小相同的 speaking.png 作为气泡图像。</p>
</blockquote>


<br>
<br>

<h2 id="Omake房间之类的"><a href="#Omake房间之类的" class="headerlink" title="Omake房间之类的"></a>Omake房间之类的</h2><p><a target="_blank" rel="noopener" href="https://www.renpy.org/doc/html/rooms.html">Image Gallery, Music Room, and Replay Actions</a>.</p>
<br>
<br>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p>知乎:被诅咒的章鱼,<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/53084385">Ren’Py引擎从入门到放弃</a>系列.</p>
<blockquote>
<p>很实用,很实用,推荐全看完.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://ossf.denny.one/foss-programs/8811.html">雪凡與好朋友們的 Ren’Py 遊戲引擎初學心得提示</a>系列.</p>
<blockquote>
<p>很实用,很实用,恩师啊.<br>不过这个是12年的写的!!跟现在的renpy版本差很多,需要注意.<br>我是写过一点再回去看看人思路,帮助很大.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://home.gamer.com.tw/creationDetail.php?sn=3755749">renpy小心得</a></p>
<blockquote>
<p>博主的演示.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://forum.gamer.com.tw/C.php?bsn=6629&snA=4378">【心得】用Renpy的一點心得</a></p>
<blockquote>
<p>可能還可以寫的功能有</p>
</blockquote>
<ul>
<li>利用archive打包檔案</li>
<li>影片播放</li>
<li>遊戲劇情回顧</li>
<li>持久性資料(Persistent data)的使用，可處理cg解鎖等問題。</li>
<li>製作翻譯檔</li>
<li>不同語言換字型</li>
<li>外掛玩家翻譯</li>
<li>滑鼠滾輪向上改成歷史訊息而不是直接倒退回上一句</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewforum.php?f=51">Ren’Py Cookbook</a></p>
<blockquote>
<p>一个国外的renpy论坛?<br>救我狗命.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=47820">71 mini game Renpy</a></p>
<blockquote>
<p>互联网佛祖普度众生.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv17013514/">一些有用的Renpy教程链接</a></p>
<blockquote>
<p>黑凤梨大佬普渡众生.</p>
</blockquote>
<div class='spoiler collapsed'>
    <div class='spoiler-title'>
        “黑凤梨教程链接”
    </div>
    <div class='spoiler-content'>
        <p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=61319">人物说话的时候同时移动，callback的用法</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewforum.php?f=52&sid=6842a896fc8b003a82fd3542e575362c">renpy 游戏素材</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=25007">两个角色同时聊天</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=22481">Scrolling Credits 滚动字幕</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=42988">如何给程序增加dlc 程序打包</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=18047&start=15#p395926">简单小游戏</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=5055">对话框在游戏中变化</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=26885">音效循环播放</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=60527">对话框文字动态效果</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=8&t=57408&sid=98dea92a43f94f8e714c1b43fe108d7b#p521935">鼠标点击动画效果</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=51629">主菜单音乐变化</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=24237">主菜单音乐</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=51171#p492438">用真实时间控制游戏</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=53252#p502367">根据真实时间改变图像/屏幕</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?p=472714#p472714">摇动图片或者立绘</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=22196">点击继续按钮 ctc</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=13381">renpy timer的问题</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=47911#p476350">rpg游戏的角色stat</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=44034">射击游戏</a>,<a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=41347">射击游戏2</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=62436">商店</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=17232">自定义nvl 消息框</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=21978">钟表</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=8&t=63344">打字音效</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=28495">鼠标点不到的按钮</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=47482">会跟着鼠标动的图</a>,<a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=42368">会跟着鼠标动的图2</a>,<a target="_blank" rel="noopener" href="http://renpyfordummies.blogspot.com/2022/02/blog-post.html">会跟着鼠标动的图3</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=34323">Animated movement with AlphaMask problem</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=27422">女神异闻录样式日历</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=22636">renpy input box 输入框</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=25579#p313665">物品栏</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=47833#p475886">随机播放音乐</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?p=490843#p490843">renpy 小游戏</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=48233">自动移动鼠标</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=43685#p453004">检查玩家是否存档</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=oUhcXlzc2a4&t=514s">加google广告</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=50764">LayeredImage Tutorial 层叠式图</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=25749">第一视角睁眼效果</a></p>
<p><a target="_blank" rel="noopener" href="https://www.renpy.cn/doc/atl.html#transform-property-xtile">循环图片</a></p>
<p><a target="_blank" rel="noopener" href="http://traumendes-madchen.com/blog/?p=1395">云朵移动效果</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=62120&p=542823&hilit=bar+music#p542823">音乐空间</a></p>
<p><a target="_blank" rel="noopener" href="https://www.renpy.org/wiki/renpy/doc/cookbook/Shake_effect">Shake Effect 抖动效果</a>,<a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=48419">抖动2</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=34328">Prevent users skipping transition effect like dissolve 在变幻的时候禁止用户跳过</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=10584">反复抖动</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?p=135622#p135622">blur effect 模糊效果</a>,<a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?t=35619">模糊效果2</a></p>
<p><a target="_blank" rel="noopener" href="https://lemmasoft.renai.us/forums/viewtopic.php?f=51&t=62837">手机聊天</a></p>

    </div>
</div>

<br>
<br>

<h2 id="Cookbook"><a href="#Cookbook" class="headerlink" title="Cookbook"></a>Cookbook</h2><p>Cookbook之中比较喜欢的:<br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=B3bbdIAq-1M&ab_channel=VisualNovelDesign">Ren’py Cookbook - Kinetic Text!</a></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://wattson.itch.io/kinetic-text-tags">itch</a><br>大多的神秘文字效果都可以用这个包来演出了.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=vZG_fevhjUw&ab_channel=VisualNovelDesign">Ren’py Cookbook: Snow &amp; Particles</a></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://tofurocks.itch.io/snowfall-gui">itch</a></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=0Vjd7XhZNtU&ab_channel=VisualNovelDesign">Ren’py RPG Combat Engine!</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=KoYXzREFx4A&t=0s&ab_channel=VisualNovelDesign">Ren’py Images and Action Editor Tutorial</a></p>
<img src="/blog/2023/04/10/P282/P282_2.gif" class="" width="123" height="200">
<link rel="stylesheet" href="/blog/css/spoiler.css" type="text/css"><script src="/blog/js/spoiler.js" type="text/javascript" async></script>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/C4ToolBox/" rel="tag"># C4ToolBox</a>
              <a href="/blog/tags/Renpy/" rel="tag"># Renpy</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2023/04/17/P290/" rel="prev" title="在VBA里实现的screen scripting">
      <i class="fa fa-chevron-left"></i> 在VBA里实现的screen scripting
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2023/03/27/P289/" rel="next" title="考拉私厨">
      考拉私厨 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%94%E8%AE%B0"><span class="nav-number">1.</span> <span class="nav-text">笔记</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="nav-number">1.1.</span> <span class="nav-text">更改对话框</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E5%AD%97%E6%8F%8F%E8%BE%B9"><span class="nav-number">1.2.</span> <span class="nav-text">文字描边</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%B1%8F%E9%A1%B5%E9%9D%A2-splashscreen"><span class="nav-number">1.3.</span> <span class="nav-text">开屏页面(splashscreen)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%81%E9%9D%A2-menu"><span class="nav-number">1.4.</span> <span class="nav-text">封面(menu)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Image-buttom"><span class="nav-number">1.5.</span> <span class="nav-text">Image buttom</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BE%E5%83%8F-image"><span class="nav-number">1.6.</span> <span class="nav-text">图像(image)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rollback"><span class="nav-number">1.7.</span> <span class="nav-text">rollback</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#increase-space-between-lines-of-text"><span class="nav-number">1.8.</span> <span class="nav-text">increase space between lines of text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%AD%97%E6%9C%BA%E6%95%88%E6%9E%9C-%E6%AF%8F%E4%B8%AA%E5%AD%97%E7%AC%A6%E5%87%BA%E7%8E%B0"><span class="nav-number">1.9.</span> <span class="nav-text">打字机效果(每个字符出现)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9F%E5%BA%A6%E8%88%87%E7%AD%89%E5%BE%85"><span class="nav-number">1.10.</span> <span class="nav-text">速度與等待</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E4%BD%93%E8%AE%BE%E7%BD%AE%E7%9A%84%E8%81%B2%E9%9F%B3%E8%AA%BF%E6%8E%A7"><span class="nav-number">1.11.</span> <span class="nav-text">整体设置的聲音調控</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E5%AF%86%E8%88%87%E7%95%A5%E5%8E%BB"><span class="nav-number">1.12.</span> <span class="nav-text">加密與略去</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%8B%95%E5%9C%96%E7%89%87%E5%AE%9A%E7%BE%A9"><span class="nav-number">1.13.</span> <span class="nav-text">自動圖片定義</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BB%91%E9%BC%A0%E6%B8%B8%E6%A8%99%E8%87%AA%E5%AE%9A%E7%BE%A9"><span class="nav-number">1.14.</span> <span class="nav-text">滑鼠游標自定義</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%80%E6%AE%B5%E8%A7%80%E5%BF%B5"><span class="nav-number">1.15.</span> <span class="nav-text">區段觀念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%AD%97%E9%AB%94%E8%AA%BF%E6%95%B4"><span class="nav-number">1.16.</span> <span class="nav-text">特殊字體調整</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ruby-text"><span class="nav-number">1.17.</span> <span class="nav-text">ruby text</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%99%E6%BA%96%E5%BC%8F%E5%91%BD%E5%90%8D%E7%A9%BA%E9%96%93%E5%BB%BA%E7%AB%8B%E6%B3%95"><span class="nav-number">1.18.</span> <span class="nav-text">標準式命名空間建立法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Map-Navigation"><span class="nav-number">1.19.</span> <span class="nav-text">Map Navigation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%8C%E5%86%85%E5%AD%97%E4%BD%93%E6%8F%8F%E8%BE%B9"><span class="nav-number">1.20.</span> <span class="nav-text">行内字体描边</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Screens"><span class="nav-number">1.21.</span> <span class="nav-text">Screens</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%98%BB%E5%A1%9E%E8%88%87%E9%9D%9E%E9%98%BB%E5%A1%9E"><span class="nav-number">1.21.1.</span> <span class="nav-text">阻塞與非阻塞</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Screen-%E7%9A%84%E5%8F%83%E6%95%B8%E8%88%87%E8%A8%AD%E5%80%BC"><span class="nav-number">1.21.2.</span> <span class="nav-text">Screen 的參數與設值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%89%E5%BE%85%E4%B8%80%E5%AE%9A%E6%97%B6%E9%97%B4%E5%90%8E%E8%A7%A6%E5%8F%91%E7%89%B9%E6%AE%8A%E5%89%A7%E6%83%85"><span class="nav-number">1.22.</span> <span class="nav-text">等待一定时间后触发特殊剧情</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E6%A1%A3%E9%92%A9%E5%AD%90"><span class="nav-number">1.23.</span> <span class="nav-text">存档钩子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E6%A1%A3%E8%AE%A1%E6%95%B0"><span class="nav-number">1.24.</span> <span class="nav-text">存档计数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EF%BC%88%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4%EF%BC%89%E6%95%88%E6%9E%9C"><span class="nav-number">1.25.</span> <span class="nav-text">（数据删除）效果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8%E7%AB%8B%E7%BB%98%E4%B8%8A%E7%94%A8%E6%B0%94%E6%B3%A1%E6%A0%87%E8%AF%86%E5%BD%93%E5%89%8D%E8%AF%B4%E8%AF%9D%E4%BA%BA"><span class="nav-number">1.26.</span> <span class="nav-text">在立绘上用气泡标识当前说话人</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Omake%E6%88%BF%E9%97%B4%E4%B9%8B%E7%B1%BB%E7%9A%84"><span class="nav-number">1.27.</span> <span class="nav-text">Omake房间之类的</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">2.</span> <span class="nav-text">Reference</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookbook"><span class="nav-number">2.1.</span> <span class="nav-text">Cookbook</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mazui"
      src="/blog/images/logo_11.jpg">
  <p class="site-author-name" itemprop="name">Mazui</p>
  <div class="site-description" itemprop="description">与孤独和平共处.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">347</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">73</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:mazui.and.rio@gmail.com" title="E-Mail → mailto:mazui.and.rio@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3032131561?topnav=1&wvr=6&topsug=1&ssl_rnd=1606158448.6943&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;3032131561?topnav&#x3D;1&amp;wvr&#x3D;6&amp;topsug&#x3D;1&amp;ssl_rnd&#x3D;1606158448.6943&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/mazui_3" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/mazui_3" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </div>

<br>
      <!--new music test-->

  <!--网易云插件-->
<iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/4mCwspCTPF1aoWUNxsS5aD?utm_source=generator" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mazui</span>

<!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>


    <span title="C">2m</span>
  -->

  <!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="T">30:05</span>

  -->

</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
<br>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">阅览室一共有2m的老兔正在打瞌睡</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://mazui3-com.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://mazui3.github.io/blog/2023/04/10/P282/";
    this.page.identifier = "2023/04/10/P282/";
    this.page.title = "Renpy坐牢记录";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://mazui3-com.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
