<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/star.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/star.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/star.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mazui3.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":265,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":{"text":"Load Disqus","order":-1}},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="接着上一回的笔记.上次收录了些基础语法,这次是case study.">
<meta property="og:type" content="article">
<meta property="og:title" content="关于R语言的笔记 - 续">
<meta property="og:url" content="https://mazui3.github.io/blog/2021/02/02/P165/index.html">
<meta property="og:site_name" content="Underlake Reading Room">
<meta property="og:description" content="接着上一回的笔记.上次收录了些基础语法,这次是case study.">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-02-03T01:15:02.000Z">
<meta property="article:modified_time" content="2021-11-15T20:25:20.864Z">
<meta property="article:author" content="Mazui">
<meta property="article:tag" content="Thank you Mr.goose">
<meta property="article:tag" content="编码">
<meta property="article:tag" content="以头抢地(诚)">
<meta property="article:tag" content="data">
<meta property="article:tag" content="R">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://mazui3.github.io/blog/2021/02/02/P165/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>关于R语言的笔记 - 续 | Underlake Reading Room</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Underlake Reading Room</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">这里是图书馆外的阅览室🌟</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/blog/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-friendlink">

    <a href="/blog/link/" rel="section"><i class="fas fa-user-friends fa-fw"></i>FriendLink</a>

  </li>
        <li class="menu-item menu-item-back">

    <a href="https://mazui3.github.io/" rel="section"><i class="fas fa-carrot fa-fw"></i>Back</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mazui3.github.io/blog/2021/02/02/P165/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/logo_7.png">
      <meta itemprop="name" content="Mazui">
      <meta itemprop="description" content="与孤独和平共处.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Underlake Reading Room">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          关于R语言的笔记 - 续
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-02 20:15:02" itemprop="dateCreated datePublished" datetime="2021-02-02T20:15:02-05:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-15 15:25:20" itemprop="dateModified" datetime="2021-11-15T15:25:20-05:00">2021-11-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E6%95%B0%E5%AD%A6%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">数学笔记</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/blog/2021/02/02/P165/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2021/02/02/P165/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
            <span class="post-meta-item" title="C">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>13k</span>
            </span>
            <span class="post-meta-item" title="T">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>12 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <script async
  src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<p>接着<a href="https://mazui3.github.io/blog/2021/01/13/P164/">上一回</a>的笔记.<br>上次收录了些基础语法,这次是case study.</p>
<span id="more"></span>

<p>R和python中的pandas有不少相似之处.<br><br><br><br><br><br></p>
<h2 id="Tutorial-2-Pokemon-Analysis"><a href="#Tutorial-2-Pokemon-Analysis" class="headerlink" title="Tutorial 2: Pokémon Analysis"></a>Tutorial 2: Pokémon Analysis</h2><p>In this document we begin to take a look at the <code>pokemon.csv</code> dataset introduced in the first lecture. This exercise is intended to provide additional exposure to R and Markdown.</p>
<p><strong>Load in the data and summarize it</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setwd(<span class="string">&quot;/Users/nstevens/Dropbox/Teaching/STAT_341/Winter_2021/Tutorials/Tutorial 2/&quot;</span>)</span><br><span class="line">poke &lt;- read.csv(file = <span class="string">&quot;pokemon.csv&quot;</span>, header = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure>

<p>Now that we’ve loaded the data, let’s look at a summary of it:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(poke)</span><br></pre></td></tr></table></figure>

<p>For purposes of the tutorial, let’s examine the <code>base_happiness</code>, <code>speed</code>, <code>height_m</code> and <code>weight_kg</code> variates more closely. Here are the values of these variates for the first 15 Pokémon:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head(x = poke[,<span class="built_in">c</span>(<span class="number">4</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)], n = <span class="number">15</span>)</span><br></pre></td></tr></table></figure>

<p>Let’s construct a <code>$4 \times 4$</code> matrix of plots that visually summarize these:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">poke_df_for_plot &lt;- poke[,<span class="built_in">c</span>(<span class="number">4</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)]</span><br><span class="line">header &lt;- <span class="built_in">names</span>(poke_df_for_plot)</span><br><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">4</span>,<span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">4</span>)&#123;</span><br><span class="line">  <span class="keyword">for</span>(j <span class="keyword">in</span> <span class="number">1</span>:<span class="number">4</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i == j)&#123;</span><br><span class="line">      hist(poke_df_for_plot[,i], main = <span class="string">&quot;&quot;</span>, xlab = header[i], col = <span class="string">&quot;dodgerblue3&quot;</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      plot(x = poke_df_for_plot[,i], y = poke_df_for_plot[,j],</span><br><span class="line">           xlab = header[i], ylab = header[j],</span><br><span class="line">           pch = <span class="number">16</span>, col = adjustcolor(col = <span class="string">&quot;dodgerblue4&quot;</span>, alpha.f = <span class="number">0.3</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Since <code>base_happiness</code> takes on just a handful of integer values, let’s <em>jitter</em> this variate to try and make the plots more informative.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">poke_df_for_plot$base_happiness &lt;- jitter(poke_df_for_plot$base_happiness, factor = <span class="number">3</span>)</span><br><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">4</span>,<span class="number">4</span>))</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">4</span>)&#123;</span><br><span class="line">  <span class="keyword">for</span>(j <span class="keyword">in</span> <span class="number">1</span>:<span class="number">4</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(i == j)&#123;</span><br><span class="line">      hist(poke_df_for_plot[,i], main = <span class="string">&quot;&quot;</span>, xlab = header[i], col = <span class="string">&quot;dodgerblue3&quot;</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      plot(x = poke_df_for_plot[,i], y = poke_df_for_plot[,j],</span><br><span class="line">           xlab = header[i], ylab = header[j],</span><br><span class="line">           pch = <span class="number">16</span>, col = adjustcolor(col = <span class="string">&quot;dodgerblue4&quot;</span>, alpha.f = <span class="number">0.3</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Let’s also calculate the correlations between these variables:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cor(poke[,<span class="built_in">c</span>(<span class="number">4</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>)])</span><br></pre></td></tr></table></figure>


<p><strong>Questions:</strong></p>
<ol>
<li>Do faster Pokémon tend to be happier?</li>
<li>Do taller Pokémon tend to be happier?</li>
<li>Do heavier Pokémon tend to be happier?</li>
</ol>
<p><strong>Answers:</strong></p>
<ol>
<li>No</li>
<li>No</li>
<li>No</li>
</ol>
<p><strong>Who is the tallest Pokémon?</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># this is the maximum height:</span></span><br><span class="line"><span class="built_in">max</span>(poke$height_m)</span><br><span class="line"><span class="comment"># this is the row in the dataset in which the maximum height is found:</span></span><br><span class="line">which(poke$height_m == <span class="built_in">max</span>(poke$height_m))</span><br><span class="line"><span class="comment"># this is the corresponding Pokémon:</span></span><br><span class="line">poke$name[which(poke$height_m == <span class="built_in">max</span>(poke$height_m))]</span><br></pre></td></tr></table></figure>

<p>Note that in the code above, rather than the call</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">which(poke$height_m == <span class="built_in">max</span>(poke$height_m))</span><br><span class="line"><span class="comment"># we could have equivalently used</span></span><br><span class="line">which.max(poke$height_m)</span><br></pre></td></tr></table></figure>

<p><strong>Which are the 10 heaviest Pokémon?</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># these are the weights sorted from largest to smallest</span></span><br><span class="line">sort(x = poke$weight_kg, decreasing = <span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment"># these are the 10 largest recorded weights</span></span><br><span class="line">sort(x = poke$weight_kg, decreasing = <span class="literal">TRUE</span>)[<span class="number">1</span>:<span class="number">10</span>]</span><br><span class="line"><span class="comment"># these are the rows containing the 10 largest recorded weights</span></span><br><span class="line">which(poke$weight_kg &gt;= sort(x = poke$weight_kg, decreasing = <span class="literal">TRUE</span>)[<span class="number">10</span>])</span><br><span class="line"><span class="comment"># these are the corresponding Pokémon</span></span><br><span class="line">poke$name[which(poke$weight_kg &gt;= sort(x = poke$weight_kg, decreasing = <span class="literal">TRUE</span>)[<span class="number">10</span>])]</span><br></pre></td></tr></table></figure>

<p><strong>Construct a histogram of <code>hp</code> with the mean identified</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hist(x = poke$hp, col = <span class="string">&quot;mistyrose&quot;</span>, main = <span class="string">&quot;Histogram of HP&quot;</span>, xlab = <span class="string">&quot;HP&quot;</span>)</span><br><span class="line">abline(v = mean(poke$hp), col = <span class="string">&quot;navyblue&quot;</span>, lwd = <span class="number">2</span>)</span><br><span class="line">text(x = <span class="number">70</span>, y = <span class="number">200</span>, labels = paste(<span class="string">&quot;Mean = &quot;</span>, <span class="built_in">round</span>(mean(poke$hp), <span class="number">2</span>)),</span><br><span class="line">     col = <span class="string">&quot;navyblue&quot;</span>, pos = <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p><strong>Plot the influence (<code>$\Delta$</code>) of each Pokémon on the average <code>hp</code></strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">y &lt;- poke$hp</span><br><span class="line">delta &lt;- (y-mean(y))/(<span class="built_in">length</span>(y)-<span class="number">1</span>)</span><br><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">plot(delta,</span><br><span class="line">     main = <span class="string">&quot;Influence for Average HP&quot;</span>, ylab = bquote(Delta),</span><br><span class="line">     pch = <span class="number">16</span>, col = adjustcolor(<span class="string">&quot;mediumvioletred&quot;</span>, <span class="number">0.3</span>))</span><br><span class="line">plot(y, delta,</span><br><span class="line">     main = <span class="string">&quot;Influence vs. HP&quot;</span>, ylab = bquote(Delta), xlab = <span class="string">&quot;HP&quot;</span>,</span><br><span class="line">     pch = <span class="number">16</span>, col = adjustcolor(<span class="string">&quot;mediumvioletred&quot;</span>, <span class="number">0.3</span>))</span><br></pre></td></tr></table></figure>

<p><strong>Which two Pokémon have the largest influence?</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poke$name[which(delta &gt; <span class="number">0.2</span>)]</span><br></pre></td></tr></table></figure>

<p><strong>Which two Pokémon have the highest HP?</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">poke$name[order(poke$hp, decreasing = <span class="literal">TRUE</span>)][<span class="number">1</span>:<span class="number">2</span>]</span><br></pre></td></tr></table></figure>

<p><strong>What are the unique types of Pokémon?</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unique(poke$type1)</span><br></pre></td></tr></table></figure>

<p><strong>How many Pokémon of each <code>type1</code> are their?</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table(poke$type1)</span><br></pre></td></tr></table></figure>

<p><strong>Calculate the average happiness for each <code>type1</code> of Pokémon</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aggregate(x = poke$base_happiness,</span><br><span class="line">          by = <span class="built_in">list</span>(Type = poke$type1),</span><br><span class="line">          FUN = mean)</span><br></pre></td></tr></table></figure>

<br>
<br>
<br>

<h2 id="Tutorial-3-Pokemon-Analysis-continue"><a href="#Tutorial-3-Pokemon-Analysis-continue" class="headerlink" title="Tutorial 3: Pokémon Analysis - continue"></a>Tutorial 3: Pokémon Analysis - continue</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">library(knitr)</span><br><span class="line">opts_chunk$set(tidy.opts=<span class="built_in">list</span>(width.cutoff=<span class="number">70</span>),tidy=<span class="literal">TRUE</span>)</span><br><span class="line">poke &lt;- read.csv(<span class="string">&quot;/Users/nstevens/Dropbox/Teaching/STAT_341/Winter_2021/Tutorials/Tutorial 3/pokemon.csv&quot;</span>, header = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure>

<br>
<br>

<h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><p>Create a <code>$1 \times 3$</code> plot which includes:</p>
<ul>
<li>A histogram of <code>speed</code></li>
<li>A histogram of <code>weight_kg</code></li>
<li>A scatterplot of <code>speed</code> vs. <code>weight_kg</code></li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">hist(x = poke$speed, main = <span class="string">&quot;Histogram of Speed&quot;</span>, xlab = <span class="string">&quot;Speed&quot;</span>,</span><br><span class="line">     col = adjustcolor(col = <span class="string">&quot;darkorchid&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">hist(x = poke$weight_kg, main = <span class="string">&quot;Histogram of Weight&quot;</span>, xlab = <span class="string">&quot;Weight (kg)&quot;</span>,</span><br><span class="line">     col = adjustcolor(col = <span class="string">&quot;navyblue&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">plot(x = poke$weight_kg, y = poke$speed,</span><br><span class="line">     main = <span class="string">&quot;Scatterplot of Speed vs. Weight&quot;</span>, xlab = <span class="string">&quot;Weight (kg)&quot;</span>, ylab = <span class="string">&quot;Speed&quot;</span>,</span><br><span class="line">     pch = <span class="number">16</span>, col = adjustcolor(col = <span class="string">&quot;firebrick&quot;</span>, alpha = <span class="number">0.4</span>))</span><br></pre></td></tr></table></figure>

<br>
<br>

<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><p>Find a range of <code>$\alpha$</code> values that would help to “symmetrize” the <code>speed</code> distribution. Plot the histogram of <code>$T_&#123;\alpha&#125;(\texttt&#123;speed&#125;)$</code> using the value of <code>$\alpha$</code> that seems most appropriate.</p>
<p>(也就是第一个作业里的Power Transformations)<br>第一张图是right-skewed, bump is towards the lower value, consider alpha value less than 1.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">powerfun &lt;- <span class="keyword">function</span>(x, alpha) &#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">sum</span>(x &lt;= <span class="number">0</span>) &gt; <span class="number">0</span>) stop(<span class="string">&quot;x must be positive&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> (alpha == <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">log</span>(x)</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (alpha &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    x^alpha</span><br><span class="line">  &#125; <span class="keyword">else</span> -x^alpha</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">9</span>), mar = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">alpha &lt;- seq(from = <span class="number">1</span>, to = -<span class="number">1</span>, by = -<span class="number">0.25</span>)</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="built_in">length</span>(alpha))&#123;</span><br><span class="line">  hist(x = powerfun(x = poke$speed, alpha = alpha[i]),</span><br><span class="line">       main = bquote(alpha == .(alpha[i])), xlab = <span class="string">&quot;&quot;</span>,</span><br><span class="line">       col = adjustcolor(col = <span class="string">&quot;darkorchid&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Based on the figure above, <code>$\alpha = 0.5$</code> seems to do the best job. Here is a plot of the square-root-transformed <code>speed</code> data:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">hist(x = powerfun(x = poke$speed, alpha = <span class="number">0.5</span>),</span><br><span class="line">     main = <span class="string">&quot;Histogram of Square-Root-Transformed Speed Data&quot;</span>,</span><br><span class="line">     xlab = <span class="built_in">expression</span>(<span class="built_in">sqrt</span>(Speed)), col = adjustcolor(col = <span class="string">&quot;darkorchid&quot;</span>, alpha = <span class="number">0.4</span>))</span><br></pre></td></tr></table></figure>

<br>
<br>

<h3 id="3"><a href="#3" class="headerlink" title="3"></a>3</h3><p>Find a range of <code>$\alpha$</code> values that would help to “symmetrize” the <code>weight</code> distribution. Plot the histogram of <code>$T_&#123;\alpha&#125;(\texttt&#123;weight&#125;)$</code> using the value of <code>$\alpha$</code> that seems most appropriate.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">9</span>), mar = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">alpha &lt;- seq(from = <span class="number">1</span>, to = -<span class="number">1</span>, by = -<span class="number">0.25</span>)</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="built_in">length</span>(alpha))&#123;</span><br><span class="line">  hist(x = powerfun(x = poke$weight_kg, alpha = alpha[i]),</span><br><span class="line">       main = bquote(alpha == .(alpha[i])), xlab = <span class="string">&quot;&quot;</span>,</span><br><span class="line">       col = adjustcolor(col = <span class="string">&quot;navyblue&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Based on the figure above, <code>$\alpha \in [0,0.25]$</code> looks good. Let’s refine our search:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">6</span>), mar = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">alpha &lt;- seq(from = <span class="number">0.25</span>, to = <span class="number">0</span>, by = -<span class="number">0.05</span>)</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="built_in">length</span>(alpha))&#123;</span><br><span class="line">  hist(x = powerfun(x = poke$weight_kg, alpha = alpha[i]),</span><br><span class="line">       main = bquote(alpha == .(alpha[i])), xlab = <span class="string">&quot;&quot;</span>,</span><br><span class="line">       col = adjustcolor(col = <span class="string">&quot;navyblue&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Based on the plots above, choosing <code>$\alpha = 0.1$</code> seems like it should work well. Here is a plot of this power-transformed <code>weight</code> data:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">hist(x = powerfun(x = poke$weight_kg, alpha = <span class="number">0.1</span>),</span><br><span class="line">     main = <span class="string">&quot;Histogram of Power-Transformed Weight Data&quot;</span>,</span><br><span class="line">     xlab = bquote(Weight^<span class="number">0.1</span>), col = adjustcolor(col = <span class="string">&quot;navyblue&quot;</span>, alpha = <span class="number">0.4</span>))</span><br></pre></td></tr></table></figure>

<br>
<br>

<h3 id="4"><a href="#4" class="headerlink" title="4"></a>4</h3><p>Cast the ‘optimal power transformation’ problem in the univariate setting as an implicitly defined attribute problem and determine the optimal <code>$\alpha$</code> values for both the <code>speed</code> and <code>weight</code> data. Construct histograms of these optimally-power-transformed variates.</p>
<p>Let <code>$\alpha$</code> be the attribute of interest, and let <code>$t_u = T_&#123;\alpha&#125;(y_u)$</code> be the power-transformed observation for unit <code>$u$</code>. Let us also define the objective function to be minimized as the absolute value of Pearson’s moment coefficient of skewness for the transformed data: <code>$\rho(\alpha;\mathcal&#123;P&#125;) = \left|\frac&#123;\frac&#123;1&#125;&#123;N&#125;\sum_&#123;u \in \mathcal&#123;P&#125;&#125;\left(t_u-\bar&#123;t&#125;\right)^3&#125;&#123;[SD(t)]^3&#125;\right|$</code></p>
<p>Thus the problem of finding the optimal <code>$\alpha$</code> reduces to the following optimization problem: <code>$\widehat&#123;\alpha&#125; = \operatorname*&#123;arg min&#125;_&#123;\alpha \in \mathbb&#123;R&#125;&#125;\rho(\alpha;\mathcal&#123;P&#125;)$</code></p>
<p>In <code>R</code> let’s define <code>$\rho(\alpha;\mathcal&#123;P&#125;)$</code> and then use the <code>nlminb</code> function to minimize it.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rho_skew &lt;- <span class="keyword">function</span>(theta, y)&#123;</span><br><span class="line">  t &lt;- powerfun(y, alpha = theta)</span><br><span class="line">  skew &lt;- mean((t - mean(t))^<span class="number">3</span>) / sd(t)^<span class="number">3</span></span><br><span class="line">  <span class="built_in">return</span>(<span class="built_in">abs</span>(skew))</span><br></pre></td></tr></table></figure>

<p>Let’s find the  optimal <code>$\alpha$</code> for the <code>speed</code> data and plot the resulting histogram:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">min1 &lt;- nlminb(start = <span class="number">1</span>, objective = rho_skew, y = poke$speed)</span><br><span class="line">print(min1)</span><br><span class="line">hist(x = powerfun(x = poke$speed, alpha = min1$par),</span><br><span class="line">     main = <span class="string">&quot;Histogram of Optimally Power-Transformed Speed Data&quot;</span>,</span><br><span class="line">     xlab = <span class="string">&quot;T(Speed)&quot;</span>, col = adjustcolor(col = <span class="string">&quot;darkorchid&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">mtext(text = bquote(<span class="string">&quot;(&quot;</span> ~ alpha == .(min1$par) ~ <span class="string">&quot;)&quot;</span>), side = <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>Let’s find the  optimal <code>$\alpha$</code> for the <code>weight</code> data and plot the resulting histogram:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">min2 &lt;- nlminb(start = <span class="number">1</span>, objective = rho_skew, y = poke$weight_kg)</span><br><span class="line">print(min2)</span><br><span class="line">hist(x = powerfun(x = poke$weight_kg, alpha = min2$par),</span><br><span class="line">     main = <span class="string">&quot;Histogram of Optimally Power-Transformed Weight Data&quot;</span>,</span><br><span class="line">     xlab = <span class="string">&quot;T(Weight)&quot;</span>, col = adjustcolor(col = <span class="string">&quot;navyblue&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">mtext(text = bquote(<span class="string">&quot;(&quot;</span>~ alpha == .(min2$par) ~ <span class="string">&quot;)&quot;</span>), side = <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>Notice that in both cases the “optimal <code>$\alpha$</code>“ was not far from the values we determined using Bump Rule #1. In general, although we can always find an optimal power transformation algorithmically (like we did above), the ladder heuristc tends to work pretty well.</p>
<br>
<br>

<h3 id="5"><a href="#5" class="headerlink" title="5"></a>5</h3><p>Find a range of <code>$\alpha_x$</code> and <code>$\alpha_y$</code> values that would help to “linearize” the relationship between <code>$T_&#123;\alpha_y&#125;(\texttt&#123;speed&#125;)$</code> and <code>$T_&#123;\alpha_x&#125;(\texttt&#123;weight&#125;)$</code>. Plot the scatterplot of <code>$T_&#123;\alpha_y&#125;(\texttt&#123;speed&#125;)$</code> vs. <code>$T_&#123;\alpha_x&#125;(\texttt&#123;weight&#125;)$</code> using the values of <code>$\alpha_y$</code> and <code>$\alpha_x$</code> that seem most appropriate.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">alpha_x &lt;- seq(from = <span class="number">1</span>, to = -<span class="number">1</span>, length.out = <span class="number">5</span>)</span><br><span class="line">alpha_y &lt;- seq(from = <span class="number">1</span>, to = -<span class="number">1</span>, length.out = <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">corMat &lt;- matrix(<span class="number">0</span>, nrow = <span class="built_in">length</span>(alpha_x), ncol = <span class="built_in">length</span>(alpha_y))</span><br><span class="line"></span><br><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="built_in">length</span>(alpha_x),<span class="built_in">length</span>(alpha_y)), mar = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1.5</span>,<span class="number">1</span>))</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span>  <span class="number">1</span>:<span class="built_in">length</span>(alpha_x))&#123;</span><br><span class="line">  <span class="keyword">for</span>(j <span class="keyword">in</span> <span class="number">1</span>:<span class="built_in">length</span>(alpha_y))&#123;</span><br><span class="line">    plot(x = powerfun(poke$weight_kg, alpha = alpha_x[i]), y = powerfun(poke$speed, alpha = alpha_y[j]),</span><br><span class="line">         main = bquote(alpha[x] == .(alpha_x[i]) ~ <span class="string">&quot;, &quot;</span> ~ alpha[y] == .(alpha_y[j])),</span><br><span class="line">         xlab = <span class="string">&quot;&quot;</span>, ylab = <span class="string">&quot;&quot;</span>, xaxt = <span class="string">&quot;n&quot;</span>, yaxt = <span class="string">&quot;n&quot;</span>,</span><br><span class="line">         pch = <span class="number">16</span>, col = adjustcolor(col = <span class="string">&quot;firebrick&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">    corMat[i,j] &lt;- cor(powerfun(poke$weight_kg, alpha = alpha_x[i]), powerfun(poke$speed, alpha = alpha_y[j]))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">print(corMat)</span><br></pre></td></tr></table></figure>

<p>The plot and matrix of correlations above suggest that <code>$\alpha_x=0$</code> and <code>$\alpha_y=0$</code> provide power transformations such that the relationship between <code>$T_&#123;\alpha_y&#125;(\texttt&#123;speed&#125;)$</code> and <code>$T_&#123;\alpha_x&#125;(\texttt&#123;weight&#125;)$</code> is <em>most linear</em>. Further refinement of the <code>$\alpha$</code>‘s is definitely possible, but a log-transformation is nice and easy to interpret so let’s go ahead with it:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">par(mfrow = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>))</span><br><span class="line">plot(x = powerfun(poke$weight_kg, alpha = <span class="number">0</span>), y = powerfun(poke$speed, alpha = <span class="number">0</span>),</span><br><span class="line">         main = <span class="string">&quot;Scatterplot of Log-Transformed Variates&quot;</span>,</span><br><span class="line">         xlab = <span class="string">&quot;log(Weight)&quot;</span>, ylab = <span class="string">&quot;log(Speed)&quot;</span>,</span><br><span class="line">         pch = <span class="number">16</span>, col = adjustcolor(col = <span class="string">&quot;firebrick&quot;</span>, alpha = <span class="number">0.4</span>))</span><br></pre></td></tr></table></figure>

<br>
<br>

<h3 id="6"><a href="#6" class="headerlink" title="6"></a>6</h3><p>Cast the ‘optimal power transformation’ problem in the bivariate setting as an implicitly defined attribute problem and determine the optimal <code>$\boldsymbol\alpha$</code> value to “straighten” the scatterplot of <code>speed</code> versus <code>weight</code>. Construct a scatterplot using the optimally-power-transformed variates.</p>
<p>Let <code>$\boldsymbol\alpha = (\alpha_x, \alpha_y)$</code> be the attribute of interest, and let <code>$t_u = T_&#123;\alpha_y&#125;(y_u)$ and $v_u = T_&#123;\alpha_x&#125;(x_u)$</code>. Let us also define the objective function to be minimized as the negative of the absolute value of the correlation coefficient between the transformed variates (since we actually want to maximize this): <code>$\rho(\boldsymbol\alpha;\mathcal&#123;P&#125;) = -\left|\frac&#123;\sum_&#123;u \in \mathcal&#123;P&#125;&#125;(v_u-\bar&#123;v&#125;)(t_u-\bar&#123;t&#125;)&#125;&#123;\sqrt&#123;\sum_&#123;u \in \mathcal&#123;P&#125;&#125;(v_u-\bar&#123;v&#125;)^2&#125;\sqrt&#123;\sum_&#123;u \in \mathcal&#123;P&#125;&#125;(t_u-\bar&#123;t&#125;)^2&#125;&#125;\right|$</code></p>
<p>Thus the problem of finding the optimal <code>$\boldsymbol\alpha$</code> reduces to the following optimization problem: <code>$\widehat&#123;\boldsymbol\alpha&#125; = \operatorname*&#123;arg min&#125;_&#123;\boldsymbol\alpha \in \mathbb&#123;R&#125;^2&#125;\rho(\boldsymbol\alpha;\mathcal&#123;P&#125;)$</code></p>
<p>In <code>R</code> let’s define <code>$\rho(\boldsymbol\alpha;\mathcal&#123;P&#125;)$</code> and then use the <code>nlminb</code> function to minimize it.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rho_cor &lt;- <span class="keyword">function</span>(alpha, x, y)&#123;</span><br><span class="line">  alphax &lt;- alpha[<span class="number">1</span>]</span><br><span class="line">  alphay &lt;- alpha[<span class="number">2</span>]</span><br><span class="line">  <span class="built_in">return</span>(-<span class="built_in">abs</span>(cor(x = powerfun(x, alpha = alphax), y = powerfun(y, alpha = alphay))))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Let’s find the  optimal <code>$\boldsymbol\alpha$</code> for the scatterplot of <code>speed</code> versus <code>weight</code> and plot the resulting optimally transformed data:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">min3 &lt;- nlminb(start = <span class="built_in">c</span>(<span class="number">1</span>,<span class="number">1</span>), objective = rho_cor, x = poke$weight_kg, y = poke$speed)</span><br><span class="line">print(min3)</span><br><span class="line">plot(x = powerfun(poke$weight_kg, alpha = min3$par[<span class="number">1</span>]), y = powerfun(poke$speed, alpha = min3$par[<span class="number">2</span>]),</span><br><span class="line">         main = <span class="string">&quot;Scatterplot of Optimally Power-Transformed Data&quot;</span>,</span><br><span class="line">         xlab = <span class="string">&quot;T(Weight)&quot;</span>, ylab = <span class="string">&quot;T(Speed)&quot;</span>,</span><br><span class="line">         pch = <span class="number">16</span>, col = adjustcolor(col = <span class="string">&quot;firebrick&quot;</span>, alpha = <span class="number">0.4</span>))</span><br><span class="line">mtext(text = bquote(<span class="string">&quot;(&quot;</span> ~ alpha[x] == .(min3$par)[<span class="number">1</span>] ~ <span class="string">&quot; , &quot;</span> ~ alpha[y] == .(min3$par[<span class="number">2</span>]) ~ <span class="string">&quot;)&quot;</span>), side = <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>Notice the “optimal correlation” is 0.1431949, which is not so different from the one we found (0.14163987) using Bump Rule #2<br>– and our transformations are much more easily interpreted. In general, although we can always find an optimal power transformation algorithmically (like we did above), the ladder heuristc tends to work pretty well.</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/blog/tags/Thank-you-Mr-goose/" rel="tag"># Thank you Mr.goose</a>
              <a href="/blog/tags/%E7%BC%96%E7%A0%81/" rel="tag"># 编码</a>
              <a href="/blog/tags/%E4%BB%A5%E5%A4%B4%E6%8A%A2%E5%9C%B0-%E8%AF%9A/" rel="tag"># 以头抢地(诚)</a>
              <a href="/blog/tags/data/" rel="tag"># data</a>
              <a href="/blog/tags/R/" rel="tag"># R</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2021/02/11/P169/" rel="prev" title="隧道">
      <i class="fa fa-chevron-left"></i> 隧道
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2021/01/31/P167/" rel="next" title="关于SQL的笔记 - 续">
      关于SQL的笔记 - 续 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Tutorial-2-Pokemon-Analysis"><span class="nav-number">1.</span> <span class="nav-text">Tutorial 2: Pokémon Analysis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tutorial-3-Pokemon-Analysis-continue"><span class="nav-number">2.</span> <span class="nav-text">Tutorial 3: Pokémon Analysis - continue</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1"><span class="nav-number">2.1.</span> <span class="nav-text">1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2"><span class="nav-number">2.2.</span> <span class="nav-text">2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3"><span class="nav-number">2.3.</span> <span class="nav-text">3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4"><span class="nav-number">2.4.</span> <span class="nav-text">4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5"><span class="nav-number">2.5.</span> <span class="nav-text">5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6"><span class="nav-number">2.6.</span> <span class="nav-text">6</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mazui"
      src="/blog/images/logo_7.png">
  <p class="site-author-name" itemprop="name">Mazui</p>
  <div class="site-description" itemprop="description">与孤独和平共处.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">221</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">50</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:mazui.and.rio@gmail.com" title="E-Mail → mailto:mazui.and.rio@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3032131561?topnav=1&wvr=6&topsug=1&ssl_rnd=1606158448.6943&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;3032131561?topnav&#x3D;1&amp;wvr&#x3D;6&amp;topsug&#x3D;1&amp;ssl_rnd&#x3D;1606158448.6943&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/mazui_3" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/mazui_3" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </div>

<br>
      <!--new music test-->

  <!--网易云插件-->
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=465530020&auto=0&height=66"></iframe>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mazui</span>

<!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>


    <span title="C">659k</span>
  -->

  <!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="T">9:59</span>

  -->

</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
<br>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">阅览室一共有659k的老兔正在打瞌睡</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://mazui3-com.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://mazui3.github.io/blog/2021/02/02/P165/";
    this.page.identifier = "2021/02/02/P165/";
    this.page.title = "关于R语言的笔记 - 续";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://mazui3-com.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
