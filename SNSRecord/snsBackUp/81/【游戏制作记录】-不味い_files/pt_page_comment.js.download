this.dbE={eYZ:location.host,dIJ:document};(function(a){a.eZb=31;a.dxJ=function(a){var d=this.eZb,c,g,f,e;c=a.length&3;g=a.length-c;f=d;for(d=0;d<g;)e=a.charCodeAt(d)&255|(a.charCodeAt(++d)&255)<<8|(a.charCodeAt(++d)&255)<<16|(a.charCodeAt(++d)&255)<<24,++d,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,e=461845907*(e&65535)+((461845907*(e>>>16)&65535)<<16)&4294967295,f^=e,f=f<<13|f>>>19,f=5*(f&65535)+((5*(f>>>16)&65535)<<16)&4294967295,f=(f&65535)+27492+(((f>>>16)+58964&65535)<<16);e=0;switch(c){case 3:e^=(a.charCodeAt(d+2)&255)<<16;case 2:e^=(a.charCodeAt(d+1)&255)<<8;case 1:e^=a.charCodeAt(d)&255,e=3432918353*(e&65535)+((3432918353*(e>>>16)&65535)<<16)&4294967295,e=e<<15|e>>>17,f^=461845907*(e&65535)+((461845907*(e>>>16)&65535)<<16)&4294967295}f^=a.length;f^=f>>>16;f=2246822507*(f&65535)+((2246822507*(f>>>16)&65535)<<16)&4294967295;f^=f>>>13;f=3266489909*(f&65535)+((3266489909*(f>>>16)&65535)<<16)&4294967295;return(f^f>>>16)>>>0};var l="KsbXWeGOwHvZUTaF".split("");a.bHF=function(a){if(null==a||void 0==a)return a;if(0!=a.length%2)throw Error("1100");for(var d=[],c=0;c<a.length;c++){0==c%2&&d.push("%");for(var g=0;g<l.length;g++)if(a.charAt(c)==l[g]){d.push(g.toString(16));break}}return decodeURIComponent(d.join(""))}})(this.dbE);(function(a){var l=function(a){var d,c;d=Array.prototype.forEach;c=Array.prototype.map;this.each=function(a,b,e){if(null!==a)if(d&&a.forEach===d)a.forEach(b,e);else if(a.length===+a.length)for(var m=0,c=a.length;m<c&&b.call(e,a[m],m,a)!=={};m++);else for(m in a)if(a.hasOwnProperty(m)&&b.call(e,a[m],m,a)==={})break};this.map=function(a,b,e){var d=[];if(null==a)return d;if(c&&a.map===c)return a.map(b,e);this.each(a,function(a,g,c){d[d.length]=b.call(e,a,g,c)});return d};if("object"==typeof a){this.hasher=a.hasher;this.screen_resolution=a.screen_resolution;if(null==this.screen_resolution||void 0==this.screen_resolution)this.screen_resolution=!0;this.canvas=a.canvas;if(null==this.canvas||void 0==this.canvas)this.canvas=!0;this.ie_activex=a.ie_activex;if(null==this.ie_activex||void 0==this.ie_activex)this.ie_activex=!0}else"function"==typeof a&&(this.hasher=a)};l.prototype={get:function(){var b=[];b.push(this.hasSessionStorage());b.push(this.hasLocalStorage());b.push(!!window.indexedDB);document.body?b.push(typeof document.body.addBehavior):b.push("undefined");b.push(typeof window.openDatabase);b.push(navigator.cpuClass);b.push(navigator.platform);this.canvas&&this.isCanvasSupported()&&(b.push(this.getCanvasFp()),b.push(this.getWebgl()));b.push(this.getSystemColors());var d=[];d.push(this.getFontsString());d.push(navigator.userAgent);d.push(navigator.language);d.push(screen.colorDepth);this.screen_resolution&&"undefined"!==typeof this.getScreenResolution()&&d.push(this.getScreenResolution().join("x"));d.push((new Date).getTimezoneOffset());d.push(navigator.doNotTrack);d.push(this.getPluginsString());var c=[];this.hasher?(c.push(this.hasher(b.join("###"))),c.push(this.hasher(d.join("###")))):(c.push(a.dxJ(b.join("###"))),c.push(a.dxJ(d.join("###"))));return c},hasLocalStorage:function(){try{return!!window.localStorage}catch(a){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(a){return!0}},isCanvasSupported:function(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},getPluginsString:function(){return window.ActiveXObject&&this.ie_activex?this.getPluginsForOldIE():this.getPluginsForOtherBrowsers()},getPluginsForOtherBrowsers:function(){if(!navigator.plugins)return"";var b=[a.bHF("XWGOGsGTGe"),a.bHF("WsGWGbGUGFGXGZeKGUOeGOGHGa"),a.bHF("WsGWGFGbGeWeOwWTGsGaWXWXWWGeOWGeGXOW"),a.bHF("WsGWGFGbGeWeOwWTGsGaWWGeOWGeGXOW"),a.bHF("WsGUGsOOGsObbKWaeKWseKWHbKOeOWGHGUOX"),a.bHF("WsGUGHGeGWGHOWbKeKGUOeGObTWHGa"),a.bHF("WsGUGHOKGsOHbKeXGeGXOeObGHOWOHbKWXGFGaOWObGFGUbKXX"),a.bHF("WsGUGHeXeXWFWUGFGOGHGabKOKGUOeGOGHGa"),a.bHF("WsGTGsOvGFGaWTeKXXWWGFOOGaGUGFGsGWGeObeKGUOeGOGHGa"),a.bHF("WsWFWUbKWTGeGWGHGsbKeKGUGsOHGbGsGXGZbKeKGUOeGOGHGa"),a.bHF("WsOKOKeeOK"),a.bHF("WsObGXGwGHWXWsWW"),a.bHF("WseGWObKeXGHOWGeeXGsGGGeOWOHbKOKGUOeGOGHGa"),a.bHF("WbGsGbOHGUGFGabKeWGFGFGUWbGsOb"),a.bHF("WbGsOWOWGUGeGUGFGObKWOGsGTGebKWUGsOeGaGXGwGeOb"),a.bHF("WbGHOWWXGFGTGeOWWsGOGeGaOW"),a.bHF("WbGHOWGWGeGGGeGaGWGeObbKesOeGHGXGZeXGXGsGa"),a.bHF("WbGUOeGeeXOWGsGXGZOXbKWHGaOXOWGsGUGUbKWWGeOWGeGXOWGFOb"),a.bHF("WXGsOWGsGUGHGaGsWOObGFOeOKbKeeOKGWGsOWGe"),a.bHF("WXGHOWObGHOwbKWHWXWsbKWXGUGHGeGaOW"),a.bHF("WXGHOWObGHOwbKGFGaGUGHGaGebKOKGUOeGObTGHGa"),a.bHF("WXGHOWObGHOwbKebGeGXGeGHOGGeObbKeKGUOeGObTGHGa"),a.bHF("WXGFGFOOGFGabKeeOKGWGsOWGe"),a.bHF("WWGeGsGUeKGUOHWUGHOGGebKeeOKGWGsOWGe"),a.bHF("WWGeGGGsOeGUOWbKWbObGFOOOXGeObbKWwGeGUOKGeOb"),a.bHF("WWGHOGewbKWbObGFOOOXGeObbKeKGUOeGObTWHGa"),a.bHF("WWGHOGewbKeKGUOeOXbKeOGeGbbKeKGUGsOHGeOb"),a.bHF("WWGHOGewbKeGWFWWbKWwGeGUOKGeObbKeKGUOeGObTGHGa"),a.bHF("GWGFOeGbGUGeeWOOGHOXOWbKeOGeGbbKeKGUOeGOGHGa"),a.bHF("WWGFOOGaGUGFGsGWGeObOXbKOKGUOeGOGHGa"),a.bHF("GWGFOOGaGUGFGsGWeeOKGWGsOWGeOb"),a.bHF("GeWTOeOXGHGXeKGUOeGOGHGabKWWWUWTXG"),a.bHF("WeeXWabKWUGsOeGaGXGwbKWTGFOvGHGUGUGsbKeKGUOeGOGHGa"),a.bHF("WeeXWabKeXGFGaGsObbKWseKWH"),a.bHF("WeOwGHGGbKWeOGGeObOHOOGwGeObGe"),a.bHF("WGGsGXGeGbGFGFGZbKeKGUOeGOGHGa"),a.bHF("WGGHGUGebKWWGFOOGaGUGFGsGWGeObbKeKGUOeGObTGHGa"),a.bHF("WGGHGUGeWUGsGbbKOKGUOeGOGHGa"),a.bHF("WGGUOHWFObWWGHGebKWOGsGTGeOXbKeKGUOeGOGHGa"),a.bHF("WGGFGUOwbKXXbKWbObGFOOOXGeObbKeKGUOeGOGHGa"),a.bHF("WGeeevWeeXGwGsObGe"),a.bHF("WOWWWUbKWFGbGvGeGXOWbKeOGeGbbKeKGUOeGObTGHGabKXsXGbaXKXK"),a.bHF("WOWGWsWXWebKeKGUOeGOGHGa"),a.bHF("WOGHGaGOGeOb"),a.bHF("WOGaGFGTGebKeXGwGeGUGUbKWHGaOWGeGOObGsOWGHGFGa"),a.bHF("WOGFGFGOGUGebKWeGsObOWGwbKeKGUOeGOGHGa"),a.bHF("WOGFGFGOGUGebKWeGsObOWGwbKeKGUOeGObTGHGa"),a.bHF("WOGFGFGOGUGebKWOGeGsObOXbKXKbaXebaXXXXbaXK"),a.bHF("WOGFGFGOGUGebKeWGsGUGZbKWeGGGGGeGXOWOXbKeKGUOeGOGHGa"),a.bHF("WOGFGFGOGUGebKeeOKGWGsOWGe"),a.bHF("WwGsObGTGFGaOHbKWGGHObGeGGGFOwbKeKGUOeGOGHGa"),a.bHF("WwGsObGTGFGaOHbKeKGUOeGObTWHGa"),a.bHF("WwGeObGFGeOXbKbGbKWOGeGaGeObGsGUOXbKGUGHOGGe"),a.bHF("WweKWWGeOWGeGXOW"),a.bHF("WwOWGTGUXebKGUGFGXGsOWGHGFGabKOKObGFOGGHGWGeOb"),a.bHF("WHWebKeWGsGbbKOKGUOeGOGHGa"),a.bHF("GHWOGeOWOWGeObeXGXObGHOKOWGsGbGUGeeKGUOeGOGHGa"),a.bHF("GHWTGeOXGwbKOKGUOeGOGHGa"),a.bHF("WZGsOXOKGeObOXGZOHbKeKGsOXOXOOGFObGWbKWTGsGaGsGOGeOb"),a.bHF("WUGsOXOWeKGsOXOX"),a.bHF("WUGFGOWTGeWHGabKeKGUOeGOGHGabKXsbaXKbaXKbaXHXXXe"),a.bHF("WUGFGOWTGeWHGabKeKGUOeGOGHGabKXsbaXKbaXKbaXHXGXs"),a.bHF("WTGsbTWXGFGaGGGHGObaGXGFGTbKOKGUOeGOGHGa"),a.bHF("WTGHGXObGFOXGFGGOWbKWFGGGGGHGXGebKXbXKXsXX"),a.bHF("WTGHGaGHGbGsObeKGUOeGOGHGa"),a.bHF("WaGsOWGHOGGebKWXGUGHGeGaOW"),a.bHF("WaGHOWObGFbKeKWWWGbKeKGUOeGObTWHGa"),a.bHF("WaGFGZGHGsbKeXOeGHOWGebKWeGaGsGbGUGeObbKeKGUOeGOGHGa"),a.bHF("WaGFObOWGFGabKWHGWGeGaOWGHOWOHbKeXGsGGGe"),a.bHF("GaOKWseKWHbKeKGUOeGOGHGa"),a.bHF("WaeKWUGsOXOWeKGsOXOX"),a.bHF("WaeKeKGUGsOHGeObeXGwGeGUGU"),a.bHF("GaOKeWGFGaGOGbOeWsGWGWGHGa"),a.bHF("WaOHOwWUGsOeGaGXGwGeOb"),a.bHF("WFGXOWGFOXGwGsOKGebKeXOWObGeGsGTGHGaGObKeXGeObOGGHGXGeOX"),a.bHF("WFGaGUGHGaGebKeXOWGFObGsGOGebKOKGUOeGObTGHGa"),a.bHF("WFObGbGHOWbKWWGFOOGaGUGFGsGWGeOb"),a.bHF("eKGsGaGWGFbKeOGeGbbKeKGUOeGOGHGa"),a.bHF("eKGsObGFGTbaeWeGbKOKGUGsOHGeObbKOKGUOeGOGHGa"),a.bHF("eKWWWGbKGHGaOWGeGOObGsGWGFbKGWGFbKeOGeGbWZGHOW"),a.bHF("eKWWWGbTewWXGwGsGaGOGebKeGGHGeOOGeOb"),a.bHF("eKGwGFOWGFWXGeGaOWGeObeKGUOeGOGHGaXsbaXsbaXbbaXb"),a.bHF("eKGHGXGsOXGs"),a.bHF("eKGUGsOHWFGabKeKGUOeGObTGHGa"),a.bHF("esesXbXKXsXXbKWGGHObGeGGGFOwbKeKGUOeGOGHGa"),a.bHF("esesWWGFOOGaGUGFGsGWbKeKGUOeGOGHGa"),a.bHF("esesWTGHGaGHWWWUbKeKGUOeGOGHGa"),a.bHF("esesWTOeOXGHGX"),a.bHF("ebGeGsGUWWGFOOGaGUGFGsGWGeObbKeKGUOeGOGHGa"),a.bHF("ebGFGbGUGFOwbKWUGsOeGaGXGwGeObbKeKGUOeGOGHGa"),a.bHF("ebGFGXGZWTGeGUOWbKeeOKGWGsOWGe"),a.bHF("eXGsGGGeObbKeeOKGWGsOWGe"),a.bHF("eXGsGGGeeXGeGsObGXGw"),a.bHF("eXGXObGHOKOWGHGaGObaWWGHGXOWGHGFGaGsObOH"),a.bHF("eXGeGGWXGUGHGeGaOWbKeKGUOeGOGHGa"),a.bHF("eXGwGeGUGUbaeeWHWwGeGUOKGeOb"),a.bHF("eXGHGUOGGeObGUGHGOGwOWbKeKGUOeGObTWHGa"),a.bHF("eXGHGTOKGUGebKeKGsOXOX"),a.bHF("eXGZOHOKGebKeOGeGbbKeKGUOeGOGHGa"),a.bHF("eXOeGTGsOWObGseKWWWGbKWbObGFOOOXGeObbKeKGUOeGOGHGa"),a.bHF("eXOHGTGsGaOWGeGXbKeKWZWHbKWXGUGHGeGaOW"),a.bHF("eWGeGaGXGeGaOWbKWGeWWabKOKGUOeGObTGHGa"),a.bHF("eWGwOeGaGWGeObbKWWGsOKWXOWObGUbKWaeKWseKWHbKeKGUOeGOGHGa"),a.bHF("eWGFObGXGwWwGeGUOKGeOb"),a.bHF("eeGaGHOWOHbKeKGUGsOHGeOb"),a.bHF("eeOKGUGsOHbKeKWX"),a.bHF("eGWWGFOOGaGUGFGsGWGeOb"),a.bHF("eGGeGeOWGUGebKeWeGbKWXGFObGe"),a.bHF("eGWUWXbKWTOeGUOWGHGTGeGWGHGsbKeKGUOeGOGHGa"),a.bHF("eOGeGbbKWXGFGTOKGFGaGeGaOWOX"),a.bHF("eOGeGbWZGHOWbTGHGaOWGeGOObGHGeObOWGebKeKWWWG"),a.bHF("eOWeWbevWeWabKWbObGFOOOXGeObbKWeOwOWGeGaOXGHGFGa"),a.bHF("eOGFGUGGObGsGTbKWTGsOWGwGeGTGsOWGHGXGs"),a.bHF("eOGFObGWWXGsOKOWOeObGeew"),a.bHF("eOeKWHbKWWGeOWGeGXOWGFObbKXsbaXW"),a.bHF("eHGsGaGWGeOwbKWTGeGWGHGsbKeKGUOeGOGHGa"),a.bHF("eHGsGaGWGeOwbKeKWWWGbKeGGHGeOOGeOb"),a.bHF("eHGFOeeWOeGbGebKeKGUOeGObTGHGa"),a.bHF("OvGsGZGF")],d=[],c={};d.push(this.map(navigator.plugins,function(a){c[a.name]=1;var b=this.map(a,function(a){return[a.type,a.suffixes].join("~")}).join(",");return[a.name,a.description,b].join("::")},this).join("$"));d.push(this.map(b,function(a){if(c[a])return"";a=navigator.plugins[a];if(!a)return"";var b=this.map(a,function(a){return[a.type,a.suffixes].join("~")}).join(",");return[a.name,a.description,b].join("::")},this).join(";"));return d.join(";")},getPluginsForOldIE:function(){if(window.ActiveXObject){var b=[a.bHF("WsGXObGFeKWWWGbaeKWWWG"),a.bHF("WsGWGFGWGbbaeXOWObGeGsGT"),a.bHF("WsGOWXGFGaOWObGFGUbaWsGOWXGFGaOWObGFGU"),a.bHF("WWGeOGGsGUeGebewWXOWObGUbaWWGeOGGsGUeGebewWXOWObGUbaXs"),a.bHF("WTGsGXObGFGTGeGWGHGsWGGUGsOXGweKGsOKGeObbaWTGsGXObGFGTGeGWGHGsWGGUGsOXGweKGsOKGeOb"),a.bHF("WTOXOwGTGUXbbaWWWFWTWWGFGXOeGTGeGaOW"),a.bHF("WTOXOwGTGUXbbaewWTWUWweWeWeK"),a.bHF("eKWWWGbaeKGWGGWXOWObGU"),a.bHF("esOeGHGXGZeWGHGTGebaesOeGHGXGZeWGHGTGe"),a.bHF("esOeGHGXGZeWGHGTGeWXGwGeGXGZWFGbGvGeGXOWbaesOeGHGXGZeWGHGTGeWXGwGeGXGZbaXs"),a.bHF("ObGTGFGXOwbaebGeGsGUeKGUGsOHGeObbKWOXbbKWXGFGaOWObGFGU"),a.bHF("ObGTGFGXOwbaebGeGsGUeKGUGsOHGeObbKWOXbbKWXGFGaOWObGFGUbaXs"),a.bHF("ebGeGsGUeKGUGsOHGeOb"),a.bHF("ebGeGsGUeKGUGsOHGeObbaebGeGsGUeKGUGsOHGeObbwOWGTbHbKWsGXOWGHOGGeewbKWXGFGaOWObGFGUbKbwXXXbbTGbGHOWbH"),a.bHF("ebGeGsGUeGGHGWGeGFbaebGeGsGUeGGHGWGeGFbwOWGTbHbKWsGXOWGHOGGeewbKWXGFGaOWObGFGUbKbwXXXbbTGbGHOWbH"),a.bHF("ObGTGFGXOwbaebGeGsGUeKGUGsOHGeObbKWOXbbKWXGFGaOWObGFGU"),a.bHF("eXGXObGHOKOWGHGaGObaWWGHGXOWGHGFGaGsObOH"),a.bHF("eXGwGeGUGUbaeeWHWwGeGUOKGeOb"),a.bHF("eXGwGFGXGZOOGsOGGeWGGUGsOXGwbaeXGwGFGXGZOOGsOGGeWGGUGsOXGw"),a.bHF("eXeOWXOWGUbaeXeOWXOWGU"),a.bHF("eXGZOHOKGebaWWGeOWGeGXOWGHGFGa"),a.bHF("eWWWWXWXOWGUbaeWWWWXWXOWGU"),a.bHF("eOWTeKGUGsOHGeObbaWFWXew")];return this.map(b,function(a){try{return new ActiveXObject(a),a}catch(b){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFp:function(){var a=document.createElement("canvas"),d=a.getContext("2d");d.textBaseline="top";d.font="70px 'Arial'";d.textBaseline="alphabetic";d.fillStyle="#f60";d.fillRect(125,1,62,20);d.fillStyle="#069";d.fillText("Cwm fjordbank glyphs vext quiz, https://github.com/valve ὠ",2,15);d.fillStyle="rgba(102, 204, 0, 0.7)";d.fillText("Cwm fjordbank glyphs vext quiz, https://github.com/valve ὠ",4,17);return a.toDataURL()},getSystemColors:function(){var b=document.createElement("div"),d=[],c=[a.bHF("WsGXOWGHOGGeWbGFObGWGeOb"),a.bHF("WsGXOWGHOGGeWXGsOKOWGHGFGa"),a.bHF("WsOKOKeOGFObGZOXOKGsGXGe"),a.bHF("WbGsGXGZGOObGFOeGaGW"),a.bHF("WbOeOWOWGFGaWGGsGXGe"),a.bHF("WbOeOWOWGFGaWwGHGOGwGUGHGOGwOW"),a.bHF("WbOeOWOWGFGaeXGwGsGWGFOO"),a.bHF("WbOeOWOWGFGaeWGeOwOW"),a.bHF("WXGsOKOWGHGFGaeWGeOwOW"),a.bHF("WOObGsOHeWGeOwOW"),a.bHF("WwGHGOGwGUGHGOGwOW"),a.bHF("WwGHGOGwGUGHGOGwOWeWGeOwOW"),a.bHF("WHGaGsGXOWGHOGGeWbGFObGWGeOb"),a.bHF("WHGaGsGXOWGHOGGeWXGsOKOWGHGFGa"),a.bHF("WHGaGsGXOWGHOGGeWXGsOKOWGHGFGaeWGeOwOW"),a.bHF("WHGaGGGFWbGsGXGZGOObGFOeGaGW"),a.bHF("WHGaGGGFeWGeOwOW"),a.bHF("WTGeGaOe"),a.bHF("WTGeGaOeeWGeOwOW"),a.bHF("eXGXObGFGUGUGbGsOb"),a.bHF("eWGwObGeGeWWWWGsObGZeXGwGsGWGFOO"),a.bHF("eWGwObGeGeWWWGGsGXGe"),a.bHF("eWGwObGeGeWWWwGHGOGwGUGHGOGwOW"),a.bHF("eWGwObGeGeWWWUGHGOGwOWeXGwGsGWGFOO"),a.bHF("eWGwObGeGeWWeXGwGsGWGFOO"),a.bHF("eOGHGaGWGFOO"),a.bHF("eOGHGaGWGFOOWGObGsGTGe"),a.bHF("eOGHGaGWGFOOeWGeOwOW")];if(!window.getComputedStyle)return d.join("");for(var g=0;g<c.length;g++)document.body.appendChild(b),b.style.color=c[g],d.push(c[g]),d.push(window.getComputedStyle(b).getPropertyValue("color")),document.body.removeChild(b);return d.join(":")},getWebglHash:function(b,d){var c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);var g=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);b.bufferData(b.ARRAY_BUFFER,g,b.STATIC_DRAW);c.itemSize=3;c.numItems=3;var g=b.createProgram(),f=b.createShader(b.VERTEX_SHADER);b.shaderSource(f,"attribute vec2 attrVertex; varying vec2 varyinTexCoordinate; uniform vec2 uniformOffset; void main() {   varyinTexCoordinate = attrVertex + uniformOffset;   gl_Position = vec4(attrVertex, 0, 1); }");b.compileShader(f);var e=b.createShader(b.FRAGMENT_SHADER);return b.shaderSource(e,"precision mediump float; varying vec2 varyinTexCoordinate; void main() {   gl_FragColor = vec4(varyinTexCoordinate, 0, 1); }"),b.compileShader(e),b.attachShader(g,f),b.attachShader(g,e),b.linkProgram(g),b.useProgram(g),g.vertexPosAttrib=b.getAttribLocation(g,"attrVertex"),g.offsetUniform=b.getUniformLocation(g,"uniformOffset"),b.enableVertexAttribArray(g.vertexPosArray),b.vertexAttribPointer(g.vertexPosAttrib,c.itemSize,b.FLOAT,!1,0,0),b.uniform2f(g.offsetUniform,1,1),b.drawArrays(b.TRIANGLE_STRIP,0,c.numItems),a.dxJ(d.toDataURL())},getWebgl:function(){var a,d=document.createElement("canvas"),c=[];try{a=d.getContext("webgl")||d.getContext("experimental-webgl")}catch(g){}if(!a)return c;try{c.push(a.getSupportedExtensions())}catch(f){}try{c.push(this.getWebglHash(a,d))}catch(e){}return c.join(";")},fontDetector:function(){var a=["monospace","sans-serif","serif"],d=[],c=document.body,g=document.createElement("span");g.style.fontSize="72px";g.style.visibility="hidden";g.innerHTML="wwwmmmmmmmmmmlli";for(var f=function(a){var e={};return g.style.fontFamily=a,c.appendChild(g),e.height=g.offsetHeight,e.width=g.offsetWidth,c.removeChild(g),e},e=0;e<a.length;e++)d[e]=f(a[e]);return function(e){for(var c=0;c<d.length;c++){var g=f(e+","+a[c]),l=d[c];if(g.height!==l.height||g.width!==l.width)return!0}return!1}},getFontsString:function(){for(var b=[a.bHF("WsGbGsGWGHbKWTeWbKWXGFGaGWGeGaOXGeGWbKWUGHGOGwOW"),a.bHF("WsGWGFGbGebKWGGsGaGOOXGFGaGObKeXOWGW"),a.bHF("WsGWGFGbGebKWwGeGbObGeOO"),a.bHF("WsGWGFGbGebKWTGHGaGObKeXOWGW"),a.bHF("WsGOGeGaGXOHbKWGWb"),a.bHF("WsObGsGb"),a.bHF("WsObGsGbGHGXbKeWOHOKGeOXGeOWOWGHGaGO"),a.bHF("WsObGHGsGUbKWbGUGsGXGZ"),a.bHF("WbGsOWGsGaGO"),a.bHF("WbGsOeGwGsOeOXbKXHXX"),a.bHF("WbGeGUGUbKWTeW"),a.bHF("WbGHOWOXOWObGeGsGTbKeGGeObGsbKeXGeObGHGG"),a.bHF("WbGFGWGFGaGHbKWTeW"),a.bHF("WbGFGFGZGTGsGabKWFGUGWbKeXOWOHGUGe"),a.bHF("WbObGsGOGOGsGWGFGXGHGF"),a.bHF("WbObGFGsGWOOGsOH"),a.bHF("WXGsGUGHGbObGH"),a.bHF("WXGsGUGHGGGFObGaGHGsGabKWGWb"),a.bHF("WXGsOXOWGeGUGUGsOb"),a.bHF("WXGsOXOeGsGU"),a.bHF("WXGeGaOWGsOeOb"),a.bHF("WXGeGaOWOeObOHbKWOGFOWGwGHGX"),a.bHF("WXGwGsGUGZGWOeOXOWGeOb"),a.bHF("WXGFGUGFGaGaGsbKWTeW"),a.bHF("WXGFOKOKGeObOKGUGsOWGebKWOGFOWGwGHGXbKWUGHGOGwOW"),a.bHF("WWGeGvGseGOebKWUWOWXbKeXGsGaOXbKWTGFGaGF"),a.bHF("WWGeOXGWGeGTGFGaGs"),a.bHF("WWWGWZGsGHbTeXWb"),a.bHF("WWGFOWOeGT"),a.bHF("WeGaGOObGsOGGeObOXbKWTeW"),a.bHF("WeObGsOXbKWbGFGUGWbKWHeWWX"),a.bHF("WeOeObGFOXOWGHGUGe"),a.bHF("WGGsGaGOeXGFGaGO"),a.bHF("WGGFObOWGe"),a.bHF("WGObGsGaGZGUGHGabKWOGFOWGwGHGXbKWwGeGsOGOH"),a.bHF("WGObGeGaGXGwbKeXGXObGHOKOWbKWTeW"),a.bHF("WOGsGbObGHGFGUGs"),a.bHF("WOGHGOGH"),a.bHF("WOGHOXGwGs"),a.bHF("WOGFOeGWOHbKWFGUGWbKeXOWOHGUGe"),a.bHF("WOOeGUGHGT"),a.bHF("WOOeGaGOeXGeGF"),a.bHF("WwGsGeOWOWGeGaOXGXGwOOGeGHGUGeOb"),a.bHF("WwGsObObGHGaGOOWGFGa"),a.bHF("WwGHObGsGOGHGaGFbKeXGsGaOXbKWOWb"),a.bHF("WHGTOKGsGXOW"),a.bHF("WHGaGGGFObGTGsGUbKebGFGTGsGa"),a.bHF("WZGsGXOXOWWFGaGe"),a.bHF("WZGHGaGFbKWTeW"),a.bHF("WZGFOvOeGZGsbKWOGFOWGwGHGXbKeKObXGWa"),a.bHF("WUGFGwGHOWbKWOOeGvGsObGsOWGH"),a.bHF("WUGFGTGs"),a.bHF("WUOeGXGHGWGsbKWbObGHGOGwOW"),a.bHF("WUOeGXGHGWGsbKWGGsOw"),a.bHF("WTGsGOGaGeOWGF"),a.bHF("WTGsGUGOOeGabKWOGFOWGwGHGX"),a.bHF("WTGsOWOeObGsbKWTeWbKeXGXObGHOKOWbKWXGsOKGHOWGsGUOX"),a.bHF("WTGeGaGUGF"),a.bHF("WTGHGaGOWUGHeebTWeOwOWWb"),a.bHF("WTGFGFGUWbGFObGsGa"),a.bHF("WTeXbKeKWTGHGaGXGwGF"),a.bHF("WTeXbKebGeGGGeObGeGaGXGebKeXGsGaOXbKeXGeObGHGG"),a.bHF("WaGeOOOXbKWOGFOWGwGHGXbKWTeW"),a.bHF("WaGHGsGOGsObGsbKeXGFGUGHGW"),a.bHF("WaOHGsGUGs"),a.bHF("eKGsGUGsGXGebKeXGXObGHOKOWbKWTeW"),a.bHF("eKGsOKOHObOeOX"),a.bHF("eKGeObOKGeOWOeGs"),a.bHF("eKGUGsOHGbGHGUGU"),a.bHF("eKWTGHGaGOWUGHee"),a.bHF("ebGsGXGwGsGaGs"),a.bHF("ebGFGXGZOOGeGUGU"),a.bHF("eXGsOOGsOXGWGeGe"),a.bHF("eXGXObGHOKOWbKWTeWbKWbGFGUGW"),a.bHF("eXGeGOGFGebKeKObGHGaOW"),a.bHF("eXGwGFOOGXGsObGWbKWOGFOWGwGHGX"),a.bHF("eXGHGTWwGeGH"),a.bHF("eXGaGsOKbKWHeWWX"),a.bHF("eWGUOOGOWTGFGaGF"),a.bHF("eWOObKWXGeGabKWTeWbKWXGFGaGWGeGaOXGeGWbKWeOwOWObGsbKWbGFGUGW"),a.bHF("eeGbOeGaOWOe"),a.bHF("eeGTOKOeOXGw"),a.bHF("eeGaGHOGGeObOX"),a.bHF("eeOWGFOKGHGs"),a.bHF("eGGUGsGWGHGTGHObbKeXGXObGHOKOW"),a.bHF("eOGHGWGebKWUGsOWGHGa"),a.bHF("aWZZZFaevawZ"),a.bHF("aewTwaaGHGwOaWZwvTaevawZ"),a.bHF("aewTwaaGHGwOaWZZZFaevawZ"),a.bHF("aewTwaaGHGwOaevawZaWZTHX"),a.bHF("aewTwaaGHGwOaeZTvHaWZvHs"),a.bHF("aewTwaaGHGwOaGHGZKaHvTwF"),a.bHF("aewTwaaGHGwOaGveZOaWZTHX"),a.bHF("aewTwaaGHGwOaOHKveaOwFwK"),a.bHF("aewTwaaGHGwOaOZZwGaHZZHs"),a.bHF("aewTwaaGHGwOawvswUaGveZO"),a.bHF("aewTwaaGHGwOaHHvZGaWZHvG"),a.bHF("aevawZaWZTHX"),a.bHF("aeZHZUaeHUwG"),a.bHF("aeZavaawZTvFaHHZweaHZZHs"),a.bHF("aGHGZKaevawZaWZTHX"),a.bHF("aGHGZHaGvTvXaevOHvaWZTHX"),a.bHF("aGHGZHaGvTvXawwwHbaWZTHX"),a.bHF("aGveZOaWZTHX"),a.bHF("aHHvZGaWZHvG"),a.bHF("aHZZHsaWZTHX"),a.bHF("aGHGZKaOZZwGaGHwwaaWZTHX"),a.bHF("aOZZwGaGHwwaaWZTHX"),a.bHF("aGvKwOaGveZOaWZTHX"),a.bHF("aWZZZFaevawZeFWOWbXbXXXsXb"),a.bHF("aGveZOaWZTHXeFWOWbXbXXXsXb"),a.bHF("aeZavaawZTvFaGvTvXaHZZHsaWZTHX"),a.bHF("aewTwaaGHGwOaHZZHsaWZTHX"),a.bHF("aWZwZTaHZZHsbKeKObGF"),a.bHF("aWZwZTaevawZbKeKObGF"),a.bHF("awwZZHaGHaHUaWZwZTaWZwvTaHZZHs"),a.bHF("awwZZHaGHaHUaWZwZTaOZZwGaevawZ")],d=[],c=0;c<b.length;c++){var g=b[c];this.fontDetector()(g)&&d.push(g)}return d.join(";")}};a.eZe=l})(this.dbE);(function(a){a.eZg=(new function(){var l=function(a){if(-128>a)return l(128-(-128-a));if(-128<=a&&127>=a)return a;if(127<a)return l(-129+a-127);throw Error("1001")},b=function(a,e){a=l(a);e=l(e);return l(a^e)},d=function(a,e){if(null==a||null==e||a.length!=e.length)return a;for(var d=[],c=0,m=a.length;c<m;c++)d[c]=b(a[c],e[c]);return d},c=[a.bHF("XK"),a.bHF("Xs"),a.bHF("Xb"),a.bHF("XX"),a.bHF("XW"),a.bHF("Xe"),a.bHF("XG"),a.bHF("XO"),a.bHF("Xw"),a.bHF("XH"),a.bHF("Gs"),a.bHF("Gb"),a.bHF("GX"),a.bHF("GW"),a.bHF("Ge"),a.bHF("GG")],g=function(a){var e=[];e.push(c[a>>>4&15]);e.push(c[a&15]);return e.join("")},f=function(a){if(null==a||0==a.length)return[];a=new String(a);for(var e=[],d=a.length/2,b=0,c=0;c<d;c++){var m=parseInt(a.charAt(b++),16)<<4,g=parseInt(a.charAt(b++),16);e[c]=l(m+g)}return e},e=function(a){if(null==a||void 0==a)return a;a=encodeURIComponent(a);for(var e=[],d=a.length,b=0;b<d;b++)if("%"==a.charAt(b))if(b+2<d)e.push(f(a.charAt(++b)+""+a.charAt(++b))[0]);else throw Error("1009");else e.push(a.charCodeAt(b));return e},m=function(a,e,b,d,c){if(null==a||0==a.length)return b;if(null==b)throw Error("1004");if(a.length<c)throw Error("1003");for(var m=0;m<c;m++)b[d+m]=a[e+m];return b},z=function(a){for(var e=[],b=0;b<a;b++)e[b]=0;return e},n=[-4,16,7,8,-112,123,-22,-124,-64,-36,22,-76,87,122,-55,-26,43,118,76,-62,-30,-105,-58,26,-24,127,57,68,-66,72,101,108,124,-111,99,27,100,-21,54,31,52,-37,-90,53,-116,-60,-47,11,61,-13,10,-72,-82,-67,-108,23,-77,62,-103,102,25,60,-75,-8,-70,97,106,-117,17,-42,-34,-5,-2,-78,-110,48,-123,-28,-27,-87,-126,121,-41,-11,78,92,50,81,126,82,46,80,-53,28,0,117,-59,66,-14,-56,-93,-68,-43,-29,40,88,3,35,-86,105,18,73,103,-94,-9,-95,-61,41,-35,113,-88,19,69,56,119,-54,89,-32,-63,-89,65,-84,42,-96,-18,15,98,-109,-65,4,93,-106,110,79,116,104,-50,-102,-57,38,-31,86,12,111,115,90,112,-100,-45,21,-120,125,114,-113,51,-33,95,-20,20,37,-40,-6,-98,-119,32,47,45,6,-85,-23,64,107,-1,24,1,85,71,-118,94,-81,-39,-107,49,-16,70,-91,-25,14,-83,-44,34,74,75,109,-79,-7,58,96,-115,-19,2,-38,120,-121,-10,-17,-74,-127,-125,-51,-104,-71,30,59,-73,91,-101,-52,-49,39,-12,77,-128,33,55,36,-3,-48,-15,-97,13,63,29,-80,83,5,-92,44,67,-122,-69,84,-114,-46,-99,9],v=function(a){var e=[];if(null==a||void 0==a||0==a.length)return z(64);if(64<=a.length){e=[];if(null!=a&&0!=a.length){if(64>a.length)throw Error("1003");for(var b=0;64>b;b++)e[b]=a[0+b]}return e}for(b=0;64>b;b++)e[b]=a[b%a.length];return e},y=function(a){if(null==a)return null;for(var e=[],b=0,d=a.length;b<d;b++){var c=a[b];e[b]=n[16*(c>>>4&15)+(c&15)]}return e};this.eZn=function(a,c){if(null==a||void 0==a)return"";if(null==c||void 0==c)throw Error("1008");var f=e(a),n=e(c),k=f;null==k&&(k=[]);for(var x=[],f=0;4>f;f++){var p=256*Math.random(),p=Math.floor(p);x[f]=l(p)}n=v(n);n=d(n,v(x));f=n=v(n);var h=k;if(null==h||void 0==h||0==h.length)k=z(64);else{var k=h.length,p=0,p=60>k%64?64-k%64-4:128-k%64-4,u=[];m(h,0,u,0,k);for(h=0;h<p;h++)u[k+h]=0;h=[];h[0]=k>>>24&255;h[1]=k>>>16&255;h[2]=k>>>8&255;h[3]=k&255;m(h,0,u,k+p,4);k=u}p=k;if(null==p||0!=p.length%64)throw Error("1005");for(var k=[],u=0,h=p.length/64,t=0;t<h;t++){k[t]=[];for(var r=0;64>r;r++)k[t][r]=p[u++]}p=[];m(x,0,p,0,4);x=k.length;for(u=0;u<x;u++){h=k[u];if(null==h)h=null;else{for(var t=l(-61),r=[],w=h.length,q=0;q<w;q++)r.push(l(h[q]+t));h=r}if(null==h)h=null;else{t=l(125);r=[];w=h.length;for(q=0;q<w;q++)r.push(b(h[q],t--));h=r}if(null==h)h=null;else{t=l(35);r=[];w=h.length;for(q=0;q<w;q++)r.push(b(h[q],t));h=r}h=d(h,n);t=f;if(null==h)h=null;else if(null!=t){for(var r=[],w=t.length,q=0,B=h.length;q<B;q++)r[q]=l(h[q]+t[q%w]);h=r}h=d(h,f);f=y(h);f=y(f);m(f,0,p,64*u+4,64)}n=p.length;if(null==p||0>n)n=new String("");else{f=[];for(k=0;k<n;k++)f.push(g(p[k]));n=f.join("")}return n}}).eZn})(this.dbE);(function(a){function l(a){for(var b=[],d=0;d<a;d++){var c=62*Math.random(),c=Math.floor(c);b.push("aZbY0cXdW1eVf2Ug3Th4SiR5jQk6PlO7mNn8MoL9pKqJrIsHtGuFvEwDxCyBzA".charAt(c))}return b.join("")}function b(a){var b="v fp u h ec em".split(" "),d;if(null==a||void 0==a)return a;if("object"==typeof a){d="{";for(var c=0;c<b.length;c++)if(a.hasOwnProperty(b[c])){var f="'"+b[c]+"':'",g;g=""+a[b[c]];g=null==g||void 0==g?g:g.replace(/'/g,"\\'").replace(/"/g,'"');d+=f+g+"',"}","==d.charAt(d.length-1)&&(d=d.substring(0,d.length-1));return d+"}"}return null}function d(a,b){for(var d=[],c=0;c<b;c++)d.push(a);return d.join("")}function c(e){var c=!0,f={v:"v1.0"},n=null;f.h=a.eYZ;f.u=l(3)+(new Date).getTime()+l(3);try{var v=(new a.eZe).get();null!=v&&void 0!=v&&0<v.length?f.fp=v.join(","):(f.fp=d("0",10),f.ec="1",c=!1)}catch(y){f.fp=d("0",10),f.ec="1",c=!1}try{n=b(f),n=a.eZg(n,g)}catch(A){n=b({ec:"2",em:A.message}),c=!1}f=c;c=[];c.push(e+"="+escape(n));f&&(e=new Date,e.setDate(15),e.setMonth(e.getMonth()+1),e=e[a.bHF("OWGFWOWTeWeXOWObGHGaGO")](),c.push("; "),c.push("ex"),c.push("pi"),c.push("re"),c.push("s="),c.push(e),c.push("; "),c.push("pa"),c.push("th=/"),c.push("; "),c.push("dom"),c.push("ain=.lof"),c.push("ter.com"));a.dIJ[a.bHF("GXGFGFGZGHGe")]=c.join("")}var g=a.bHF("XsXWXOXXXbGXXXXeXOGWXsXbXXGXGsXHXwXwGeGeGWWsXKXKWsGGXGGWXeGbGGGWGXWXGGXsXeWXWeXHXwWWGbXbXKGGXG"),f=a.bHF("WveXWeeXeXWHWFWaWHWWbTeOWUWGbTewewWW");(function(){var b;a:{b=a.dIJ[a.bHF("GXGFGFGZGHGe")].split("; ");for(var c=0;c<b.length;c++){var d=b[c].indexOf("=");if(0<=d){var g=b[c].substring(0,d),d=b[c].substring(d+1,b[c].length);if(g==f){b=d;break a}}}b=null}return null==b||void 0==b||""==b?!1:!0})()||c(f)})(this.dbE);
(function(){P("U");var eZw={a:{r:/\<|\>|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""}};var cv;U.lO=function(bHn){if(U.co(bHn,"number"))return bHn;if(U.co(bHn,"date"))return bHn.getTime();if(U.co(bHn,"boolean"))return!!bHn?"true":"false";if(U.co(bHn,"string"))return'"'+U.IY(bHn)+'"';if(!bHn)return"null";if(U.co(bHn,"array")){var bHQ=[];for(var i=0,l=bHn.length;i<l;bHQ.push(U.lO(bHn[i])),i++);return"["+bHQ.join(",")+"]"}if(U.co(bHn,"object")){var bHQ=[];for(var p in bHn)bHQ.push(U.lO(p)+":"+U.lO(bHn[p]));return"{"+bHQ.join(",")+"}"}return"null"};U.qr=function(bHA){try{return!bHA?null:(new Function("return "+bHA))()}catch(e){return null}};if(B.da){U.bHR=U.qr}else{U.bHR=!!window.JSON?JSON.parse:U.qr}if(B.da){U.ii=U.lO}else{U.ii=!!window.JSON?JSON.stringify:U.lO}var p=P("loft.x"),AR=60*1e3,RC=60*AR,bFH=24*RC,cg=document.createElement("input");var Vg=/(&nbsp;(\w+))/gi;var Vh=/((\w+)&nbsp;([^ ]+))/gi;p.bzz=function(fv){fv=fv||"";fv=U.ew(fv);fv=fv.replace(Vg," $2");fv=fv.replace(Vh,"$2 $3");return fv};p.mP=function(fv){fv=fv||"";fv=fv.replace(Vg," $2");fv=fv.replace(Vh,"$2 $3");return fv};p.eZR=function(bHA){return U.El(eZw.a,bHA)};p.jo=function(bHA){bHA=bHA||"";return bHA.replace(/^(<p>(&nbsp;|<br\s*\/?>)<\/p>)|(&nbsp;|<br\s*\/?>)$/i,"")};p.Gg=function(bHA){bHA=bHA||"";return bHA.replace(/(^<p>(&nbsp;|<br\s*\/?>)<\/p>)|(<p>(&nbsp;|<br\s*\/?>)<\/p>$)/gi,"")};p.dbD=function(bHA){bHA=bHA||"";return bHA.replace(/(^(<p>(&nbsp;|<br\s*\/?>)*<\/p>)+)|((<p>(&nbsp;|<br\s*\/?>)*<\/p>)+$)/gi,"")};p.fec=function(bHA){bHA=bHA||"";return bHA.replace(/(&nbsp;)/gi,"")};p.eZU=function(bHA){bHA=bHA||"";return bHA.replace(/<p>(\w+)(&nbsp;|<br\s*\/?>)+<\/p>$/gi,"<p>$1</p>")};p.Gh=function(Gr,eg){if(!Gr)return;if(!!eg){Gr.focus()}else{var hy=Gr.selection.getRange();var bHo=E.dE(Gr.body)||[];if(bHo.length>0){var Gu=E.dE(bHo[bHo.length-1])||[];var RA=Gu[Gu.length-1];if(!!RA&&!!RA.tagName&&RA.tagName.toLowerCase()=="br"){hy.selectNodeContents(Gu[Gu.length-1]);hy.setCursor(false,true)}else{hy.selectNodeContents(bHo[bHo.length-1]);hy.setCursor(true,true)}}}};p.bND=function(du){if((!!P("loft.c").csT||!!P("loft.c").cFo)&&!!du){alert(du)}};p.fab=function(dbC){if(!dbC)return;var dxs=document.cloneElement("link");dxs.setAttribute("href",dbC);if(!!document.head&&!!dxs){document.head.insertAdjacentElement("beforeEnd",dxs)}};p.fag=function(dbC){if(!!window.devicePixelRatio&&window.devicePixelRatio>1&&!B.da){p.fab(dbC)}};p.bHG=function(dxq){};window.statistic4Lofter=p.bHG;p.dQP=function(dxq,ca){ca()};p.bzy=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};p.GD=function(bHn){if(U.co(bHn,"number"))return bHn;if(U.co(bHn,"date"))return bHn.getTime();if(U.co(bHn,"boolean"))return bHn;if(U.co(bHn,"string"))return bHn;if(U.co(bHn,"function"))return bHn;if(!bHn)return null;if(U.co(bHn,"array")){var bHQ=[];for(var i=0,l=bHn.length;i<l;bHQ.push(this.GD(bHn[i])),i++);return bHQ}if(U.co(bHn,"object")){var cp={};for(var p in bHn)cp[p]=this.GD(bHn[p]);return cp}};p.gW=function(cp){return U.ii(cp)};p.bIK=function(bp,bx,jD){bp=bp||"";jD=jD||"?";bp=U.bA(bp);var dxm=bp.indexOf(jD);if(dxm<0){return""}if(jD!="#"){var bHq=bp.indexOf("#")||0;if(bHq>=0&&dxm<bHq){bp=bp.substring(0,bHq)}}bp=bp.substr(dxm+1);if(!bp)return"";bp=bp.split("&");for(var i=0,l=bp.length,d;i<l;i++){d=bp[i].indexOf("=");if(bp[i].substring(0,d)===bx){return bp[i].substr(d+1)||""}}return""};var payViewFlow=undefined;p.dbA=function(callback){if(payViewFlow!=undefined){callback(payViewFlow);return}var bp="//www.lofter.com/payViewApply.do?op=introduce";var bHl={url:bp,method:"POST",sync:false,ctype:"application/x-www-from-urlencode; charset=utf-8",rtype:"json",onload:function(bHC){if(!!bHC&&bHC.meta.status===200&&!!bHC.response){payViewFlow=bHC.response.payViewFlow}callback(payViewFlow)},onerror:function(){callback(payViewFlow)}};p.bMV(bp,bHl)};var isRewardOpened=undefined;p.fav=function(callback){if(window.isRewardOpened){isRewardOpened=window.isRewardOpened}if(isRewardOpened!=undefined){callback(isRewardOpened);return}var bp="//www.lofter.com/trade/reward/isOpen";var bHl={url:bp,method:"GET",sync:false,ctype:"application/x-www-from-urlencode; charset=utf-8",rtype:"json",onload:function(bHC){if(!!bHC&&bHC.code===200&&!!bHC.data&&bHC.data.openReward===1){window.isRewardOpened=true;isRewardOpened=true}else{isRewardOpened=false;window.isRewardOpened=true}callback(isRewardOpened)},onerror:function(){callback(isRewardOpened)}};loft.x.bMV(bp,bHl)};p.ty=function(bHA){bHA=bHA||"";var fe=0;for(var i=0,l=bHA.length;i<l;i++){fe+=bHA.charCodeAt(i)>255?2:1}return fe};var Rx=[location.protocol+"//www.lofter.com/control",location.protocol+"//www.lofter.com/theme"];p.isInReferrerBlackList=function(hf){hf=U.bA(hf);if(!hf)return false;for(var i=0;i<Rx.length;i++){if(!!Rx[i]){var bHq=hf.indexOf(Rx[i]);if(bHq==0){return true}}else{break}}return false};p.bM=function(bIH){bIH=bIH||"";return!bIH&&location.protocol+"//www.lofter.com"||location.protocol+"//"+bIH+".lofter.com"};p.GX=function(bIH,dR,bHx){return this.bM(bIH)+"/post/"+bHx.toString(16)+"_"+dR.toString(16)};p.cF=function(bx){var bg=window[bx];try{if(!delete window[bx])throw""}catch(e){window[bx]=undefined}return bg};p.eK=function(Rw,bJW){bJW=bJW||64;if(!Rw){if(bJW<=30)return location.dirhost+"/rsc/img/ava/30.png";if(bJW<=64)return location.dirhost+"/rsc/img/ava/64.png";return location.dirhost+"/rsc/img/ava/110.png"}else{if(bJW>140)return Rw;return loft.x.bKM(Rw,bJW,bJW,0)}};p.bKM=function(bws,dz,eT,dby,cFl,cig){if(!bws)return null;dby=dby||0;cFl=cFl||false;if(dz>=300){cig=cig||95}else{cig=cig||90}if(bws.toLowerCase().indexOf("http://imgsize.ph.126.net")>=0){bws=p.bIK(bws,"imgurl","?")||"";var bHq=bws.lastIndexOf("_");if(!!bws&&bHq>=0){bws=bws.substring(0,bHq)}if(!bws)return null}if(!dz||dz<0)return bws;if(!eT||eT<0)eT=dz;cig=parseInt(cig)||0;if(cig>100)cig=100;if(bws.indexOf("nos.netease.com")>0||bws.indexOf("nosdn.127.net")>0||bws.indexOf("nosdn0.126.net")>0){var resized=bws;var imageview="thumbnail="+dz+(dby==1?"y":"x")+eT+(!!cFl?"&enlarge=1":"");if(/\.gif/.test(bws)){if(dz<500){imageview+="&type=jpg"}}else if(/\.png/.test(bws)){imageview+="&type=png"}else{imageview+="&type=jpg"}if(/thumbnail=\d+[xyz]\d+/.test(bws)){resized=bws.replace(/thumbnail=\d+[xyz]\d+/,imageview)}else if(/imageView/.test(bws)){resized=bws.replace(/imageView/,"imageView&"+imageview)}else if(/\?/.test(bws)&&/#/.test(bws)){resized=bws.replace(/#/,"&imageView&"+imageview+"#")}else if(/\?/.test(bws)&&!/#/.test(bws)){resized=bws+"&imageView&"+imageview}else{resized=bws+"?imageView&"+imageview}if(/watermark&/.test(resized)){var sm=8;var pD=10;var cle=240;if(dz>=1680){sm=32;pD=36;cle=680}else if(dz>500){sm=16;pD=20;cle=360}else if(dz>=300){sm=8;pD=10;cle=240}resized=resized.replace(/dx=\d+/,"dx="+sm);resized=resized.replace(/dy=\d+/,"dy="+pD);resized=resized.replace(/fontsize=\d+/,"fontsize="+cle)}return resized}else{return"http://www.lofter.com/imagesize/?"+(!!cFl?"enlarge=true&":"")+"imgurl="+bws+"&width="+dz+"&height="+eT+"&corp="+dby+(cig>0?"&quality="+cig:"")}};p.Ru=function(eF){return this.bM()+"/login"+(!!eF?"?target="+encodeURIComponent(eF):"")};B.HC="placeholder"in cg;delete cg;p.Ws=function(bHz,wM){wM=wM||"";var bTm,i,l;if(!!B.HC||!bHz)return;bHz=E.be(bHz);if(!U.co(bHz,"array")){if(bHz.value==""){bHz.value=bHz.getAttribute("placeholder");}V.bHp(bHz,"focus",function(){bTm=bHz.getAttribute("placeholder");if(bHz.value==bTm){bHz.value=""}if(!!wM)E.ba(bHz,wM)});V.bHp(bHz,"blur",function(){bTm=bHz.getAttribute("placeholder");if(!bHz.value){bHz.value=bTm;if(!!wM)E.bf(bHz,wM)}})}else{for(i=0,l=bHz.length;i<l;i++){p.Ws(bHz[i],wM)}}};p.WD=function(Rt){Rt=Rt||1;switch(Rt){case 1:return"文字";case 2:return"图片";case 3:return"音乐";case 4:return"视频";case 5:return"回答";case 6:return"长文章";default:return"文字"}};P(N.ui).bIM("#<proxy-span2>{position:absolute;z-index:-1;left:0;bottom:0;width:370px;height:0;overflow:hidden;visibility:hidden;word-wrap:break-word;word-break:break-all;}#<proxy-span2> .proxy-span{position:absolute;visibility:hidden;width:370px;line-height:20px;}","proxy-span2");p.WG=function(cx,dz,eT){var Rp=document.cloneElement("span","proxy-span2"),yx=document.cloneElement("span","proxy-span");Rp.appendChild(yx);if(!!dz)yx.style.width=Rp.style.width=dz+"px";cx.insertAdjacentElement("afterEnd",Rp);V.bHp(cx,"input",function(){if(!cx.value){cx.style.height="20px";return}else{if(cx.value.length>200){cx.value=cx.value.substring(0,200)}}var bg=cx.value.replace(/\n/g,"<br>");bg=bg.replace(/<br>$/,"<br>&nbsp;");yx.innerText=bg;if(yx.clientHeight>20){cx.style.height=yx.clientHeight+"px"}else{cx.style.height="20px"}});return yx};p.AL=function(cx,WN){if(!cx||!WN)return;V.bHp(cx,"keydown",function(bHm){var bK=bHm&&(bHm.which||bHm.keyCode)||0,bzx=bHm&&bHm.ctrlKey;if(!!bzx&&bK==13){WN.call()}})};p.bzw=function(bHm){V.bHs(bHm);E.bf(document.body,"p-tmsg2");E.ba(this.bzv,"f-dn");U.ru("OutdatedBrowserBanner","1",".lofter.com",30,"/");this.WX=false;this.Ig()};p.Rn=function(){if(U.ot("OutdatedBrowserBanner")=="1"){return}if(B.dh){E.ba(document.body,"p-tmsg2");var p=document.createElement("div");document.body.insertAdjacentElement("afterBegin",p);p.className="m-tmsg2";p.innerHTML='<p>温馨提示：使用<a href="http://www.google.com/chrome" target="_blank">Chrome</a>、<a href="http://firefox.com.cn/download/" target="_blank">Firefox</a>、<a href="http://windows.microsoft.com/zh-CN/windows/downloads" target="_blank">IE7以上版本</a>等最新浏览器访问LOFTER，可以获得更好的视觉体验！</p><a href="#" id="closeOutdatedBrowserBanner" class="w-close2">关闭</a>';this.bzv=p;var closeLink=E.be("closeOutdatedBrowserBanner");V.bHp(closeLink,"click",this.bzw.bHk(this));this.WX=true}};p.qB=function(hD){var Xh=new Date,bzu=new Date(hD),ig=Xh.getTime()-hD;if(ig>13*RC)return U.ws(hD,(bzu.getFullYear()!=Xh.getFullYear()?"yyyy/":"")+"MM/dd HH:mm");for(var i=12;i>0;i--)if(ig>i*RC)return i+"小时前";if(ig>30*AR)return"半小时前";if(ig>15*AR)return"一刻钟前";if(ig>10*AR)return"10分钟前";if(ig>5*AR)return"5分钟前";return"1分钟前"};p.kX=function(){E.bHw("操作失败，请帐号解封后再试！",true)};p.bzt=function(cG){return!!cG&&cG.length>4&&/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(cG)};p.yA=function(){return;this.Ix=E.be("rside");this.AH=E.be("g-foreverEntryArea");if(!this.Ix||!this.AH)return;this.eaZ=E.bHr(document.body,"g-bd")[0];window.setTimeout(function(){V.bHp(window,"scroll",this.Ig.bHk(this));V.bHp(window,"resize",this.Ig.bHk(this))}.bHk(this),1e3);window.setTimeout(this.Ig.bHk(this),1200)};p.Ig=function(){if(B.dh){this.XE()}else{if(!!this.Rl)this.Rl=window.clearTimeout(this.Rl);this.Rl=window.setTimeout(this.XE.bHk(this),10)}};p.XE=function(){var kj=this.bzy();var AF=this.Ix.clientHeight||this.Ix.offsetHeight||300;var dp=document.documentElement||document.body;var ebC=E.bHr(document.body,"mlistimg").length;if(ebC>0&&ebC<=20){this.faO=this.eaZ.offsetHeight>AF+100?this.eaZ.offsetHeight:AF+100}var qx=dp.clientHeight||0;if(kj+qx>AF+220&&kj+qx<this.faO+220){if(B.dh){this.AH.style.left=0;var XT=0;if(this.WX){XT=46}this.AH.style.top=kj+qx-163-XT+"px"}if(!!this.cFj)this.cFj=window.clearTimeout(this.cFj);E.ba(this.AH,"js-foreverEntry-show-1");E.ba(this.AH,"js-foreverEntry-show")}else{E.bf(this.AH,"js-foreverEntry-show");if(!!this.cFj)this.cFj=window.clearTimeout(this.cFj);this.cFj=window.setTimeout(function(){E.bf(this.AH,"js-foreverEntry-show-1")}.bHk(this),300)}};p.Rh=function(bN){var Rg="";if(bN.citeRootBlogId>0&&!!bN.citeRootBlogInfo){var bzs=bN.citeRootBlogInfo.blogNickName||"";var bzr=loft.x.GX(bN.citeRootBlogInfo.blogName,bN.citeRootPostId,bN.citeRootBlogId);Rg='<a href="'+bzr+'" target="_blank">转载自&nbsp;&nbsp;'+bzs+"</a>"}else if(!!bN.blogInfo.imageProtected){Rg="&copy;"+bN.blogInfo.blogNickName}return Rg};p.dwU=function(bHm,cOx,bN,dbv){if(!bN||!cOx)return;var Rg=loft.x.Rh(bN);var bTs=!!Rg;var bNH=(E.bHr(cOx.parentNode,"rinfo")||[])[0];if(!bNH){bNH=E.eY('<div style="display:none;position:absolute;z-index:100;padding:8px;color:#fff;font-size:12px;opacity:0.8;border-radius:3px;background:#000;" class="rinfo" onclick="loft.g.stopBubble(event);"></div>');cOx.parentNode.insertAdjacentElement("beforeEnd",bNH)}if(!!bTs){bNH.innerHTML=Rg||"TEST";var bug=E.tz(cOx),bud=E.jO(cOx);if(!!dbv){bud=bud-(dbv.scrollTop||0)}bNH.style.left=V.IO(bHm)-bug+"px";bNH.style.top=V.vS(bHm)-bud+"px";bNH.style.opacity="0.8";bNH.style.display="";if(!!this.Ok)this.Ok=window.clearTimeout(this.Ok);if(!!this.Oi)this.Oi=window.clearTimeout(this.Oi);this.Ok=window.setTimeout(function(){bNH.style.opacity="0"}.bHk(this),2700);this.Oi=window.setTimeout(function(){bNH.style.display="none"}.bHk(this),3e3)}if(!!bTs){V.bHs(bHm);bHm.returnValue=!bTs;return!bTs}else{bHm.returnValue=true;return true}};P("loft.x.g").videoProtect=p.dwU;p.AD=function(origiString,len,needsuffix){if(!!origiString){var cuted=U.bgB(origiString,len);if(needsuffix&&cuted.length<origiString.length)cuted+="...";return cuted}return origiString};p.cbH=function(tF){if(!!tF){tF.addListener("afterpaste",this.faX.bHk(this,tF))}};p.faX=function(tF){if(!tF||!tF.document||!tF.document.getElementsByTagName)return;var bHo=tF.document.getElementsByTagName("span")||[];for(var i=0;i<bHo.length;i++){var dbu=bHo[i].style.textDecoration||"";bHo[i].style.cssText="";if(dbu.toLowerCase()=="underline"){bHo[i].style.textDecoration=dbu}else if(dbu.toLowerCase()=="line-through"){bHo[i].style.textDecoration=dbu}}bHo=tF.document.getElementsByTagName("ol")||[];for(var i=0;i<bHo.length;i++){bHo[i].style.cssText="";bHo[i].style.listStyleType="decimal"}bHo=tF.document.getElementsByTagName("ul")||[];for(var i=0;i<bHo.length;i++){bHo[i].style.cssText="";bHo[i].style.listStyleType="disc"}};p.qt=function(tF){if(B.bLr&&!!tF){tF.addListener("afterpaste",this.bzq.bHk(this,tF))}};p.bzq=function(tF){if(!tF||!tF.document||!tF.document.getElementsByTagName)return;var bHo=tF.document.getElementsByTagName("span");if(!bHo||bHo.length<=0)return;for(var i=0;i<bHo.length;i++){bHo[i].style.whiteSpace=""}};p.fbh=function(tF){if(!!tF){tF.addListener("afterpaste",function(tF){if(!tF||!tF.document||!tF.document.getElementsByTagName)return;var bHo=tF.document.getElementsByTagName("span");if(!bHo||bHo.length<=0)return;for(var i=0;i<bHo.length;i++){var dDR=bHo[i].style.textDecoration||"";bHo[i].style.cssText="";if(!!dDR){bHo[i].style.textDecoration=dDR}}}.bHk(this,tF))}};p.stopEvent=V.bHs;p.fbl=function(){var cFe=window.navigator.userAgent.toLowerCase();var dEj=false;if(cFe.indexOf("safari")>=0){try{dEj=cFe.match(/version\/([\d.]+)/)[1]}catch(e){}}return dEj};p.cFd=function(){var cFe=window.navigator.userAgent.toLowerCase();return cFe.indexOf("ipad")>=0};p.fbC=function(){var cFe=window.navigator.userAgent;/OS ([0-9]_\d[_\d]*) like Mac OS X/i.test(cFe);return RegExp.$1||""};var fbN=/(?:<embed.*?>)|(?:<\/embed>)/gi;p.bTu=function(bHA){return(bHA||"").replace(fbN,"")};p.fbO=function(bHm,bJW){bJW=bJW||125;if(!bHm)return;var bHz=V.be(bHm);if(!bHz)return;if(bHz.clientWidth>bHz.clientHeight){bHz.style.height=bJW+"px";bHz.style.width="auto";var cw=bHz.clientWidth;var ch=bHz.clientHeight||1;var offset=(bJW*cw/ch-bJW)/2;bHz.style.left=-offset+"px"}else{bHz.style.width=bJW+"px";bHz.style.height="auto";var cw=bHz.clientWidth;var ch=bHz.clientHeight||1;var offset=(bJW*ch/cw-bJW)/2;bHz.style.top=-offset+"px"}bHz.style.visibility="visible"};p.dEN=function(CL,bJF){CL.focus();CL.innerHTML=U.ew(bJF);if(!B.da){var bMb=window.getSelection?window.getSelection():document.selection;var hy=bMb.createRange?bMb.createRange():bMb.getRangeAt(0);var dFn=CL.lastChild;hy.setEndAfter(dFn);hy.setStartAfter(dFn);bMb.removeAllRanges();bMb.addRange(hy)}};p.dFo=function(CL,fW){if(!CL)return;var atags=CL.getElementsByTagName("a"),l=atags.length,i=l-1;for(;i>-1;i--){if(atags[i].tagName==="A"&&(atags[i].href.indexOf("mailto")>=0||atags[i].className==="")){atags[i].outerHTML=atags[i].innerHTML}}if(!!fW){return CL.innerHTML.replace(/^(<p>&nbsp;<\/p>(\r)?(\n)?)*/ig,"").replace(/(<p>&nbsp;<\/p>(\r)?(\n)?)*$/ig,"").replace(/<\/p>/ig,"").replace(/<p>/ig,"<br>").replace(/^(<br>)?/ig,"")}else{return CL.innerHTML}};p.ciX=function(dFv){if(!!dFv){this.xI=document.getElementById(dFv).contentWindow}else{this.xI=window}var bMb=this.xI.getSelection?this.xI.getSelection():document.selection,hy=bMb.createRange?bMb.createRange():bMb.getRangeAt(0),dFx=false,CL=this.xI.getSelection?bMb.anchorNode.parentNode:hy.parentElement(),dwN=this.xI.getSelection?bMb.anchorNode.parentNode.tagName.toUpperCase():hy.parentElement().nodeName.toUpperCase();if(dwN==="A"){dFx=true}return dFx};p.bOM=function(bK){if(bK==-100){E.bHw("您关注得太快了，请休息一下。",true)}else if(bK==-2){E.bHw("您已经关注该博客。",true)}else if(bK==-4){E.bHw("博客已经不存在，不允许关注。",true)}else if(bK==-6){E.bHw("关注失败，您关注博客的总数已经超过限制。",true)}else if(bK==-7){E.bHw("加密博客，无法关注！",true)}else if(bK==-8){E.bHw("由于用户权限设置，您无法关注该用户！",true)}else if(bK<=0){E.bHw("关注失败，错误码: "+bK,true)}};p.fbV=function(){var dwM=/(msie\s|trident.*rv:)([\w.]+)/,bTw=navigator.userAgent.toLowerCase();if(dwM.exec(bTw)!=null){return true}else{return false}};p.bXd=function(){p.dFN();var dwI=E.be("artCart"),cby=U.ot("spcartmessages")||"";if(!cby){dwI.innerText="购物车(0)";U.ir("spcartmessages",".lofter.com","/")}else{var ccB=U.bHR(decodeURIComponent(cby));if(!!ccB&&ccB.length>0){dwI.innerText="购物车("+ccB.length+")";dwI.style.display=""}else{U.ir("spcartmessages",".lofter.com","/")}}};p.dFN=function(){if(!!p.cFd()&&E.be("showDldTipsInIpad")){var cts=E.be("showDldTipsInIpad"),ckN=cts.getElementsByClassName("w-close2")[0],cGA=U.ot("showDldTipsInIpadStatus")||"";var cFc=E.be("m-blogSetting");if(!cGA){if(!!cFc){E.ba(cFc,"js-showDldTipsInIpad")}E.bf(cts,"f-dn");V.bHp(ckN,"click",function(bHm){V.bHs(bHm);E.ba(cts,"f-dn");if(!!cFc){E.bf(cFc,"js-showDldTipsInIpad")}U.ru("showDldTipsInIpadStatus","1",".lofter.com",5,"/")})}else{if(!!cFc){E.bf(cFc,"js-showDldTipsInIpad")}}}};p.fdK=function(CL,ctz,bWk){var fce=decodeURIComponent(U.ot(ctz))||"",crS=E.bHr(CL,"w-tip")[0]||CL;if(fce==bWk){crS.style.display="none"}else{crS.style.display="block";V.bHp(CL,"click",this.fcr.bHk(this,crS,ctz,bWk))}};p.fcr=function(crS,ctz,bWk){crS.style.display="none";U.ru(ctz,bWk,".lofter.com",300,"/")};p.bLg=function(cbq,bUf,bQN,bQM,ca,bEL){if(!!ca){try{ca()}catch(e){}}};p.bLM=function(cbq,bUf,bQN,bQM,fdI,fdH,fdG,fdF,fdE,fdD,fdB,fdA){};p.bKi=function(bIu){};p.bUp=function(cbq,bUf,bQN,bQM){};p.bKI=function(){};p.bMV=function(bp,bHl){var brG=this.fcA();if(brG==null){alert("您的浏览器不支持AJAX！");return}var kC=bHl.method||"GET";var fcL=!(bHl.sync||false);var fcW=bHl.ctype||"application/x-www-form-urlencoded";brG.open(bHl.method,bp,fcL);brG.setRequestHeader("Content-type",fcW);if(!!bHl.headers){for(var x in bHl.headers){brG.setRequestHeader(x,bHl.headers[x])}}brG.onreadystatechange=function(){if(brG.readyState==4&&brG.status==200){if(brG.getResponseHeader("date")){window.serverTime=new Date(brG.getResponseHeader("date"))}var bHC;switch(bHl.rtype){case"xml":bHC=brG.responseXML;break;case"text":bHC=brG.responseText;break;case"json":try{bHC=eval("("+brG.responseText+")")}catch(e){}break;default:bHC=brG.responseText;break}if(!!bHl.onload){bHl.onload(bHC)}}else if(brG.readyState==4&&brG.status>=400){bHl.onerror&&bHl.onerror(brG.status)}};brG.onerror=function(){bHl.onerror&&bHl.onerror(brG.status)};brG.send(bHl.data)};p.fcA=function(){var cJr=null;if(window.XMLHttpRequest){cJr=new XMLHttpRequest}else{try{cJr=new ActiveXobject("Msxml2.XMLHTTP")}catch(e){try{cJr=new ActiveXobject("Microsoft.XMLHTTP")}catch(e){cJr=null}}}return cJr};p.dbn=function(bk){var bu=-999;if(!bk){return bu}var bOK=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset||0;var fdb=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var bYa=bOK+(fdb||0);var Zt=E.jO(bk);var bCp=Zt+bk.clientHeight;if(bOK==0&&bYa==0||Zt==0&&bCp==0)return bu;if(bCp<bOK){bu=-1}else if(Zt>bYa){bu=1}else{bu=0}return bu};p.fdc=function(bk){while(!!bk&&bk!=document.body){if(!!bk.tagName&&bk.tagName.toLowerCase()=="a")return bk;bk=bk.parentNode}return};p.globalEventStatistic=function(bHm,Hp,cbq,bUf,bQN,bQM,ca,bEL){bHm=bHm?bHm:window.event;var bZq;if(!!bHm&&!!Hp){bZq=p.fdc(Hp)}if(!!bZq){var yk=U.bA(bZq.href||"");var eF=U.bA(bZq.target||"");if(eF.toLowerCase()!="_blank"){V.bsR(bHm);if(!ca&&!!yk){ca=function(){location.href=yk}}}}p.bLg(cbq,bUf,bQN,bQM,ca,bEL)};p.dIS=function(cvy,dx){cvy=cvy||[];var bn=loft.x.GD(cvy);var ckD=bn.length||0;dx=dx||ckD;if(dx>ckD)dx=ckD;if(ckD>0){var bID={},bKN=[];var bHq=-1;var bMf;for(;bn.length>0&&bKN.length<dx;){bHq=U.csZ(0,bn.length);bMf=bn[bHq];bn.splice(bHq,1);if(!!bMf&&!bID[bMf]){bID[bMf]=bMf;bKN.push(bMf)}}bn=bKN}return bn};p.kI=function(ckB){if(!ckB||!U.co(ckB,"function"))return;var cwg=function(nd){if(document.readyState==="complete"){setTimeout(function(){if(!cwg.isExced){cwg.isExced=true;ckB()}},1)}else if(nd){if(document.addEventListener){document.addEventListener("DOMContentLoaded",cwg,false);window.addEventListener("load",cwg,false)}else{document.attachEvent("onreadystatechange",cwg);window.attachEvent("onload",cwg)}}};cwg(true)};p.dJD=function(ck){if(!ck)return;loft.c.cwm=loft.c.cwm||[];if(U.co(ck,"string")){ck=ck.split(",")}for(var i=0;i<ck.length;i++){if(U.fO(loft.c.cwm,function(fdr,bo){return fdr===bo}.bHk(this,ck[i]))<0){loft.c.cwm.push(ck[i])}}};p.cwE=function(bHn){if(!bHn)return;if(U.co(bHn,"object")&&!!bHn.activityTags){loft.x.dJD(bHn.activityTags)}else if(U.co(bHn,"array")&&!!bHn.length){for(var i=0;i<bHn.length;i++){if(!!bHn[i]&&!!bHn[i].activityTags){loft.x.dJD(bHn[i].activityTags)}}}};var cdh=[".baidu.com","www.163.com","bbs.163.com","blog.163.com","mail.163.com","pp.163.com","photo.163.com","reg.163.com","weibo.com"];var dKq=function(bp,bn){if(!bp)return-1;bn=bn||[];for(var i=0;i<bn.length;i++){var bHq=bp.indexOf(bn[i]);if(bHq>=0){return i}}return-1};p.fdt=function(){var dbl=U.ot("referrer4statistic");try{dbl=unescape(dbl||"")}catch(e){}if(!!dbl){U.ir("referrer4statistic","www.lofter.com","/");var bHq=dKq(dbl,cdh);if(bHq>=0){p.bLg("_trackEvent","外部流量",cdh[bHq],"");return}}var dLi=document.referrer||"";if(!!dLi){var bHq=dKq(dLi,cdh);if(bHq>=0){if(!!cdh[bHq]){p.bLg("_trackEvent","外部流量",cdh[bHq],"")}return}}};p.dbi=function(){return true};p.hashCode=function(str,caseSensitive){if(!caseSensitive){str=str.toLowerCase()}var hash=1315423911,i,ch;for(i=str.length-1;i>=0;i--){ch=str.charCodeAt(i);hash^=(hash<<5)+ch+(hash>>2)}return hash&2147483647};p.cqt=function(bLs){bLs=bLs||"";if(bLs.indexOf("nos.netease.com")>=0||bLs.indexOf("nosdn.127.net")>=0||bLs.indexOf("nosdn0.126.net")>=0){return true}else{return false}};p.dbh=function(bLs){var bMU=loft.x.dbf(bLs);if(!!bMU&&bMU.raw){return bMU.raw+"?imageView"}else{return bLs}};p.dwo=function(bLs){var bMU=loft.x.dbf(bLs);if(!!bMU&&bMU.raw){return bMU.raw}else{return bLs}};p.dbf=function(bLs,cEX){if(!bLs||!loft.x.cqt(bLs))return null;cEX=cEX||{};var bMU={imageView:{},watermark:{}};if(!!cEX.ow)bMU.ow=cEX.ow;if(!!cEX.oh)bMU.oh=cEX.oh;var bWV=bLs.split("?");bMU.raw=bWV[0];var fds=bWV[1]||"";var bSC=fds.split("%7C")||[];for(var i=0;i<bSC.length;i++){if(!!bSC[i]&&bSC[i].indexOf("imageView")>=0){var dwm=bSC[i].split("&")||[];for(var j=0;j<dwm.length;j++){if(!!dwm[j]){var wB=dwm[j].split("=");bMU["imageView"][wB[0]]=wB[1]}}}else if(!!bSC[i]&&bSC[i].indexOf("watermark")>=0){var dwl=bSC[i].split("&")||[];for(var j=0;j<dwl.length;j++){if(!!dwl[j]){var wB=dwl[j].split("=");bMU["watermark"][wB[0]]=wB[1]}}}}return bMU};p.dPD=function(bMU,cxv){bMU=bMU||{};bMU["imageView"]=bMU["imageView"]||{};var bUE=bMU["imageView"]["rotate"]||0;var py=bMU.ow||0;var Oe=bMU.oh||0;if(bUE==90||bUE==270){py=Oe}cxv=cxv||500;if(py>0&&py<cxv){cxv=py}var sm=8;var pD=10;var cle=240;if(cxv>=1680){sm=32;pD=36;cle=680}else if(cxv>500){sm=16;pD=20;cle=360}else if(cxv>=300){sm=8;pD=10;cle=240}else{return""}var fv="watermark";var bHn=bMU["watermark"]||{};for(var k in bHn){if(!!k&&k!="watermark"&&bHn[k]){if(k=="fontsize"){fv=fv+"&"+k+"="+cle}else if(k=="dx"){fv=fv+"&"+k+"="+sm}else if(k=="dy"){fv=fv+"&"+k+"="+pD}else{fv=fv+"&"+k+"="+bHn[k]}}}if(fv=="watermark")fv="";return fv};p.fdv=function(bMU){bMU=bMU||{};var fv="imageView";var bHn=bMU["imageView"]||{};for(var k in bHn){if(!!k&&k!="imageView"&&bHn[k]){fv=fv+"&"+k+"="+bHn[k]}}return fv};p.cEW=function(yz){if(!yz)return;var bMl={};var bHq=yz.indexOf("_");if(bHq>0&&bHq<yz.length){try{bMl.blogId=parseInt(yz.substring(0,bHq),16);bMl.postId=parseInt(yz.substring(bHq+1,yz.length),16)}catch(e){}}return bMl};p.fdq=function(bJl){bJl=bJl||"";bJl=bJl.replace(/<.*?>/g,"");return bJl};p.dRn=function(bTK){return U.bHR(bTK)};p.dRo=function(cpw,cyL,bZN){cyL=cyL||"imgsrc";cpw=cpw||document.body;if(!!cpw){var dN;if(!!bZN){dN=cpw.getElementsByClassName(bZN)}else{dN=cpw.getElementsByTagName("img")}var sF=(dN||O).length||0;if(!!dN&&sF>0){for(var i=0;i<sF;i++){if(!dN[i])continue;var In=dN[i].getAttribute(cyL);if(!!In&&dN[i].src!=In){dN[i].src=In}}}}};p.dbd=function(arg1,arg2){var r1,r2,m;try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}m=Math.pow(10,Math.max(r1,r2));return Math.round(arg1*m+arg2*m)/m};p.csC=function(arg1,arg2){var r1,r2,m;try{r1=arg1.toString().split(".")[1].length}catch(e){r1=0}try{r2=arg2.toString().split(".")[1].length}catch(e){r2=0}m=Math.pow(10,Math.max(r1,r2));if(m==0){return arg1*arg2}else{return Math.round(arg1*m*arg2*m)/(m*m)}};p.cOa=function(bp){var a=document.createElement("a");a.href=bp;return{source:bp,origin:a.origin||a.protocol+"//"+a.host,protocol:a.protocol,protocolname:a.protocol.replace(":",""),host:a.host,hostname:a.hostname,port:a.port,search:a.search,params:function(){var ret={},seg=a.search.replace(/^\?/,"").split("&"),len=seg.length,i=0,s;for(;i<len;i++){if(!seg[i]){continue}s=seg[i].split("=");ret[s[0]]=s[1]}return ret}(),file:(a.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^\/])/,"/$1"),relative:(a.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:a.pathname.replace(/^\//,"").split("/")}};p.cfw=function(bl,df,wB){bl=bl||document.body;if(!df||!wB)return;var bHo=bl.getElementsByTagName(df)||[];var dTA=[];for(var i=0;i<bHo.length;i++){var bk=bHo[i];var dTB="";if(!!bk){dTB=bk.getAttribute(wB)}if(!!dTB){dTA.push(bk)}}return dTA};p.cOf=function(SL,wA,wB,cY){if(!cY){var cY=SL.createElement("style");if(!!wB){cY.setAttribute(wB,wB)}SL.head.appendChild(cY)}cY.innerText=wA};p.dUm=function(bHA){bHA=bHA||"";return bHA.replace(/<p\s*[^>]*\s*class="uploadvieoprogressbar noselect"\s*[^>]*\s*>(.)*<b onclick=\"parent.loft.w.g.cancelUploadVideo\(this\)\">删除<\/b>\s*<\/span>\s*(&nbsp;)*\s*<\/p>/i,"")};p.bNu=function(fdp,wB){try{DATracker.track(fdp,wB)}catch(e){}};var logDistributionInstance=null;p.cOv=function(eventId,attributes){try{if(!!!logDistributionInstance){logDistributionInstance=new NWLogDistribution.HubLog({userId:"",key:"MA-BFD7-963BF6846668",k:"lofter",pointConfig:{"c3-13":{eventId:"c3-13",keys:["success","uploadTime","uploadRate","videoId","size","tokenTime"],category:"release_vedio"},"pc5-1":{eventId:"pc5-1",keys:["播放进度","tid"],category:"pc5"},"pc5-2":{eventId:"pc5-2",keys:["播放进度","tid"],category:"pc5"}},env:!!P("loft.c").csT?NWLogDistribution.ENV.ST:NWLogDistribution.ENV.HB})}logDistributionInstance.capture(eventId,attributes)}catch(e){}};p.csR=function(){var href=location.href;if(href.indexOf("www.lofter.com/tag/")>-1){return"标签页"}else if(href.indexOf("www.lofter.com/blog/")>-1){return"我的文章"}else if(href.indexOf("www.lofter.com/like")>-1){return"我的喜欢"}else if(href.indexOf("www.lofter.com/collection/")>-1){return"合集详情页"}else{return"首页"}}})();
(function(){var p=P("loft.c"),bHu=loft.x.cF("CF")||{};p.fgm=bHu.debugMode||false;p.csT=bHu.testDBMode||false;p.cFo=bHu.devSourceMode||false;p.cm=bHu.visitor||[];p.jg=bHu.blogs||[];p.bzp=!!bHu.crm;p.cwm=bHu.activityTags||[];p.csX=bHu.mainBlog||{}})();
(function(){var p=P("loft.w"),wS,bRr,bQA,bHI="ui-"+U.cA();var dVV="js-scrollList";var dwj="js-trans";var HL="js-showscrolllist";P(N.ui).bIM("#<uispace>{position:absolute;z-index:100;text-align:left;cursor:pointer;color:#444;background:#fff;}*[hidefocus]{outline:none;}#<uispace> .clearfix{zoom:1;}#<uispace> .thide{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis;word-break:keep-all;}#<uispace> .clearfix:after{clear:both;content:'.';display:block;visibility:hidden;height:0;}#<uispace> .iblock{display:-moz-inline-box;display:inline-block;*display:inline;zoom:1;}#<uispace> .js-trans{transition:all 0.15s linear;-webkit-transition:all 0.15s linear;-moz-transition:all 0.15s linear;-o-transition:all 0.15s linear;}#<uispace> .zitm{/*padding:0 5px;width:57px;*/ *min-width:expression(this.parentNode.clientWidth+\"px\");height:19px;line-height:19px;cursor:pointer;font-size:12px;}#<uispace> .zitm{background-color:#fff;text-align:center;}#<uispace> .zitm:hover,#<uispace> .item.js-zhvr-910{color:#fff;background-color:#4ea0d4;}#<uispace> .scrollNode{position:relative;zoom:1;overflow:hidden;border:1px solid #c0c0c0;}#<uispace> .scrollNode .scrollList{position:absolute;left:0;top:0;*text-align:center;}#<uispace> .scrollNode .vSlideWayNode{display:none;position:absolute;right:0;_right:-1px;top:0;background:#e2dfdf;cursor:default;}#<uispace> .scrollNode .hSlideWayNode{display:none;position:absolute;left:0;bottom:0;background:#e2dfdf;cursor:default;}#<uispace> .scrollNode .vSlideWayNode .vSlideBtn{position:absolute;top:0left:0;width:6px;background:#aaa;text-indent:-9999px;}#<uispace> .scrollNode .hSlideWayNode .hSlideBtn{position:absolute;top:0;left:0;width:6px;background:#aaa;text-indent:-9999px;}#<uispace> .js-noHoverItem,#<uispace> .js-noHoverItem:hover{color:#444;background-color:#fff;}#<uispace> .js-hoverItem,#<uispace> .js-hoverItem:hover{color:#fff;background-color:#4ea0d4;}",bHI);p.cON=C();wS=p.cON.bi(P(N.ut).bJj,true);Xx=p.cON.bw;wS.bq=function(){this.bHB();this.bHt=document.cloneElement("div","zitm thide");E.fy(this.bHt,"js-zhvr-910");V.bHp(this.bHt,"click",this.rF.bHk(this))};wS.bIh=function(bHl){bHl=bHl||O;this.bHp("onclick",bHl.onclick||F);this.fda=bHl.notShowTitle||false};wS.ce=function(bHn){this.bHy=bHn||O;var bg=this.bHy.t||this.bHy.n||this.bHy.v||" ";if(!this.fda)this.bHt.title=bg;this.bHt.innerText=bg};wS.hY=function(){return this.bHy};wS.rF=function(bHm){this.bh("onclick",this.bHy)};wS.cK=function(){E.bf(this.bHt,"js-curpage");this.bHt.innerHTML="";this.bHt.style.display="";Xx.cK.apply(this)};wS.dWE=function(cfB,cfC){cfB=cfB||"js-hoverItem";cfC=cfC||"js-noHoverItem";E.bf(this.bHt,cfC);E.ba(this.bHt,cfB)};wS.cPr=function(cfB,cfC){cfB=cfB||"js-hoverItem";cfC=cfC||"js-noHoverItem";E.bf(this.bHt,cfB);E.ba(this.bHt,cfC)};wS.dwi=function(cfB,cfC){cfB=cfB||"js-hoverItem";cfC=cfC||"js-noHoverItem";E.bf(this.bHt,cfB);E.bf(this.bHt,cfC)};wS.fcZ=function(){var du={width:this.bHt.clientWidth,height:this.bHt.clientHeight};return du};p.car=C();bRr=p.car.bi(P(N.ui).ga,true);bRr.bq=function(bl,bHl){bHl=bHl||O;this.eL={onclick:this.DD.bHk(this)};this.dXW=bHl.triggerNode||"";this.dL=bl||document.body;this.bHB(bl,bHl);if(!this.bTR){this.bTR=p.cPL.bG(this.cPS);if(this.pp>-1){this.dYP(bHl)}}V.bHp(this.bHt,"mousedown",function(bHm){V.bHs(bHm)}.bHk(this));V.bHp(document,"mousedown",this.Hl.bHk(this));if(B.qi){V.bHp(this.bHt,"DOMMouseScroll",this.but.bHk(this))}else{V.bHp(this.bHt,"mousewheel",this.but.bHk(this))}V.bHp(this.bHt,"mousemove",this.dbc.bHk(this))};bRr.bz=function(bHl){if(B.dh)this.dL.style.zoom=1;bHl=bHl||O;this.bHp("onchange",bHl.onchange||F);this.bHp("onlisthide",bHl.onlisthide||F);this.fcY=bHl.enableCurItemCenter||false;this.eL.notShowTitle=bHl.notShowTitle||false;this.Ho=bHl.items||[];this.fcX=bHl.noFixChromeWheelHover||false;this.fdw=bHl.scrollNodewidth||0;this.cES=bHl.scrollNodeHeight||0;this.cEP=bHl.minBtnLength||10;this.caa=bHl.scrollType||"";this.dwg=bHl.scrollAreaWidth||0;this.ead=bHl.scrollAreaHeight||0;this.eam=bHl.btnBreadth||this.bRJ.clientWidth||6;this.eas=bHl.btnBreadth||this.cov.clientHeight||6;if(!!this.ead){if(this.caa=="v"||this.caa=="vh"){this.bOQ.style.height=this.ead-this.eas+"px";this.bOQ.style.paddingBottom=this.eas+"px"}}if(!!this.dwg){if(this.caa=="v"||this.caa=="vh"){this.bOQ.style.width=this.dwg-this.eam+"px";this.bOQ.style.paddingRight=this.eam+"px"}}if(!this.caa){this.bOQ.style.height="auto";this.bOQ.style.paddingBottom=0;this.bOQ.style.width=this.dwg+"px";this.bOQ.style.paddingRight=0}this.dwf=bHl.hasAnimateMove||false;this.bmA=bHl.noHideListIfListShowed||false;this.eaX=bHl.upScrollBarStyleLeft||0;this.eaY=bHl.upScrollBarStyleBottom||0;this.XL(this.Ho);this.pp=bHl.pp||-1;this.bmz();if(!!this.eaX){this.bHt.style.left=this.eaX+"px"}if(!!this.eaY){this.bHt.style.bottom=this.eaY+"px"}this.cPS={scrollNode:this.bOQ,scrollList:this.bJr,vSlideWayNode:this.bRU,hSlideWayNode:this.bVg,vSlideBtn:this.bRJ,hSlideBtn:this.cov,minBtnLength:this.cEP,scrollType:this.caa,hasAnimateMove:this.dwf};if(!!this.bTR){this.bTR.bIh(this.cPS)}if(!!this.bTR&&this.pp>-1){this.dYP(bHl)}};bRr.fcU=function(bHq){if(bHq<0)return;var bym=this.cT[bHq-1];if(!!bym&&bym.bHt){E.ba(bym.bHt,"js-curpage")}};bRr.dYP=function(bHl){if(this.fcY){this.fcU(this.pp)}var bHq=this.pp,fe=this.cT.length,bRz,cGX;this.cT[bHq-1].dWE();if(fe>10&&bHq>5){var cfJ=fe-bHq-5;cGX=cfJ<0?fe-10:bHq-5;this.bJr.style.top=0-cGX*bHl.scrollAreaHeight/10+"px";this.bTR.dwb(cGX,fe)}};bRr.dbc=function(bHm){if(this.pp>-1){this.cT[this.pp-1].dwi();this.pp=-1}if(B.bLr&&!!this.dwa){this.fcT(this.cT);this.dwa=false}};bRr.but=function(bHm){if(!bHm)return;V.bHs(bHm);var bRz;var ckl=1;if(!!bHm.wheelDelta&&!!this.bTR){if(bHm.wheelDelta>0){bRz={deltaTop:-ckl}}else{bRz={deltaTop:ckl}}}else if(!!bHm.detail){if(bHm.detail>0){bRz={deltaTop:ckl}}else{bRz={deltaTop:-ckl}}}if(!!bRz){this.bTR.ecK(bRz);if(B.bLr&&!this.fcX&&!!this.cT){if(!this.dwa){this.dwa=true;this.fcR(this.cT)}this.fcQ(this.cT,bHm)}}};bRr.fcQ=function(cf,bHm){if(!!cf&&!!cf[0]&&!!this.bTR){var daZ=cf[0].fcZ();if(!daZ.height)return;var kT=this.bTR.fcP();var QL=V.IO(bHm);var wF=V.vS(bHm);var dBA=E.tz(this.bOQ);var fcO=E.jO(this.bOQ);if(QL<dBA||QL>dBA+daZ.width){if(!!this.cit)this.cit.cPr();return}var bHq=Math.ceil((wF-fcO-kT.top+daZ.height)/daZ.height)-1-1;if(!!cf[bHq]){if(this.cit==cf[bHq]){return}else{if(!!this.cit)this.cit.cPr();this.cit=cf[bHq];this.cit.dWE()}}else{if(!!this.cit)this.cit.cPr()}}else{if(!!this.cit)this.cit.cPr()}};bRr.fcR=function(cf){if(!cf||cf.length<=0)return;for(var i=0;i<cf.length;i++){this.cT[i].cPr()}};bRr.fcT=function(cf){if(!cf||cf.length<=0)return;for(var i=0;i<cf.length;i++){this.cT[i].dwi()}};bRr.cK=function(){p.car.bw.cK.call(this);this.bTR=this.bTR.cK();this.cT=p.cON.bHV(this.cT)};bRr.XL=function(cf){p.cON.bHV(this.cT);this.cT=p.cON.bG(cf,this.bJr,this.eL)};bRr.cU=function(){return bHI+" "+dVV};bRr.cM=function(){return'<div class="scrollNode ztag"><div class="scrollList ztag"></div><div class="vSlideWayNode ztag"><div hidefocus="true" class="vSlideBtn ztag">&nbsp;</div></div><div class="hSlideWayNode ztag"><div hidefocus="true" class="hSlideBtn ztag">&nbsp;</div></div></div>'};bRr.bHM=function(){var bHo=E.bHr(this.bHt,"ztag");var bHq=0;this.bOQ=bHo[bHq++];this.bJr=bHo[bHq++];this.bRU=bHo[bHq++];this.bRJ=bHo[bHq++];this.bVg=bHo[bHq++];this.cov=bHo[bHq++];this.pp=-1};bRr.DD=function(bHn){if(!bHn)return;var bHq=0;for(var i=0;i<this.Ho.length;i++){if(this.Ho[i].v==bHn.v){bHq=i;break}}this.Hl();this.bh("onchange",bHn.v||bHn.n||bHn.t||"",bHq)};bRr.bmz=function(bHm){if(bHm)V.bHs(bHm);if(!this.XK){if(!E.cr(this.bHt,HL)){this.bmy();this.bHt.style.visibility="visible";E.ba(this.bHt,HL)}else{if(!this.bmA)this.Hl()}}};bRr.Hl=function(bHm){var bXb=V.be(bHm);if(this.pp>-1){this.cT[this.pp-1].dwi();this.pp=-1}if(!!bXb&&!!this.dXW){var bk=bXb;while(!!bk&&bk!=document.body){if(bk==this.dXW){return}else{bk=bk.parentNode}}}E.bf(this.bJr,dwj);this.bHt.style.visibility="hidden";E.bf(this.bHt,HL);this.bh("onlisthide")};bRr.cgc=function(){if(E.cr(this.bHt,HL)){return true}else{return false}};bRr.bmy=function(){var bHo=E.bHr(document.body,dVV)||[];for(var i=0;i<bHo.length;i++){bHo[i].style.visibility="hidden";E.bf(bHo[i].parentNode,HL)}};p.cPL=C();bQA=p.cPL.bi(P(N.ut).gY);p.cPL.bG=function(bHl){return new p.cPL(bHl)};bQA.bq=function(bHl){this.bHB();this.bIh(bHl)};bQA.bIh=function(bHl){this.bz(bHl);this.fcN()};bQA.bz=function(bHl){bHl=bHl||O;this.bOQ=bHl.scrollNode;this.bJr=bHl.scrollList;this.bRU=bHl.vSlideWayNode;this.bVg=bHl.hSlideWayNode;this.bRJ=bHl.vSlideBtn;this.cov=bHl.hSlideBtn;this.cEP=bHl.minBtnLength||10;this.caa=bHl.scrollType;this.dwf=bHl.hasAnimateMove;if(!!this.bOQ){this.daY=this.bOQ.clientWidth||0;this.cES=this.bOQ.clientHeight||0}if(!!this.bRU){this.bRU.style.visibility="hidden";this.bRU.style.display="block";this.cEM=this.bRU.clientHeight||this.bOQ.clientHeight||0;this.bRU.style.height=this.cEM+"px";this.bRU.style.width=(this.bRJ.clientWidth||6)+"px"}if(!!this.bVg){this.bVg.style.visibility="hidden";this.bVg.style.display="block";this.dvW=this.bVg.clientWidth||this.bOQ.clientWidth||0;this.bVg.style.width=this.dvW+"px";this.bVg.style.height=(this.cov.clientHeight||6)+"px"}if(!!this.bJr){this.dvV=this.bJr.clientWidth||0;this.daX=this.bJr.clientHeight||0;if(!!this.caa){this.bJr.style.position="absolute";this.bJr.style.minWidth=this.daY-this.bRJ.clientWidth+"px";this.bJr.style.minHeight=this.cES-this.cov.clientHeight+"px"}else{this.bJr.style.minWidth=0;this.bJr.style.minHeight=0;this.bJr.style.position="relative";this.bJr.style.width="100%";this.bOQ.style.paddingBottom=0;this.bOQ.style.paddingRight=0}}};bQA.fdx=function(){if(!!this.bRU)this.bRU.style.display="none";if(!!this.bVg)this.bVg.style.display="none"};bQA.fdy=function(){if(!!this.bRU)this.bRU.style.display="block";if(!!this.bVg)this.bVg.style.display="block"};bQA.fcN=function(){this.yQ(this.bRJ,null);this.cJs(null,false);if(this.caa=="v"||this.caa=="vh"){if(this.cES>0&&this.daX>0&&this.daX>this.cES&&this.cEM>0){this.cqV=Math.floor(this.cES*this.cEM/this.daX);if(this.cqV<this.cEP)this.cqV=this.cEP;this.bRJ.style.height=this.cqV+"px";this.bRU.style.visibility="";V.bHp(this.bRJ.parentNode,"mousedown",this.fcK.bHk(this));this.bJZ={mintop:0,minleft:0,maxwidth:0,maxheight:this.cEM-this.cqV};this.dvM=new(P(N.ut).Er)(this.bRJ,{nobubble:true,noselect:true,ondrag:this.fcJ.bHk(this),onmove:this.fcI.bHk(this),ondrop:this.fcH.bHk(this)})}else{this.bRU.style.visibility="hidden";this.bRU.style.display="none"}}};bQA.cJs=function(cEL,fcG){if(this.dwf&&!!fcG){E.ba(this.bJr,dwj)}else{E.bf(this.bJr,dwj)}if(!!cEL&&!!cEL.top){var dvK=this.daX-this.cES;if(dvK<=0)dvK=0;if(!!cEL.maxheight&&cEL.maxheight>0){var bHT=cEL.top*dvK/cEL.maxheight;if(bHT>0){this.bJr.style.top=-bHT+"px"}else{this.bJr.style.top=0}}else{this.bJr.style.top=0}}else{this.bJr.style.top=0}};bQA.ecK=function(bRz){if(this.cqV<=0)return;bRz=bRz||{deltaTop:0};if((this.caa=="v"||this.caa=="vh")&&!!bRz.deltaTop&&!!this.bJZ){this.bJZ.top=(this.bJZ.top||0)+bRz.deltaTop;var fcF=Math.floor(this.cEM/this.cqV-1)*10+1;var dvJ=Math.floor((this.cEM-this.cqV)/fcF);if(dvJ<1)dvJ=1;var kT=this.Ap(this.bRJ);var bHT=(kT.top||0)+bRz.deltaTop*dvJ;if(bHT<this.bJZ.mintop){this.bJZ.top=this.bJZ.mintop}else if(bHT>this.bJZ.mintop+this.bJZ.maxheight){this.bJZ.top=this.bJZ.mintop+this.bJZ.maxheight}else{this.bJZ.top=bHT}this.yQ(this.bRJ,this.bJZ);this.cJs(this.bJZ,true)}};bQA.fcP=function(){var kT={top:parseInt(this.bJr.style.top)||0};return kT};bQA.fcJ=function(sm,pD){var wF=this.dvM.Zl();var fcE=E.jO(this.bRJ);this.fcD=wF-fcE};bQA.fcI=function(sm,pD){var wF=this.dvM.Zl(),fcC=E.jO(this.bRJ.parentNode);var bHT=wF-this.fcD-fcC;this.bJZ.left=this.bJZ.minleft;if(bHT<this.bJZ.mintop){this.bJZ.top=this.bJZ.mintop}else if(bHT>this.bJZ.mintop+this.bJZ.maxheight){this.bJZ.top=this.bJZ.mintop+this.bJZ.maxheight}else{this.bJZ.top=bHT}this.yQ(this.bRJ,this.bJZ);this.cJs(this.bJZ)};bQA.fcH=function(sm,pD){};bQA.fcK=function(bHm){var bHT=V.vS(bHm)-E.jO(this.bRJ.parentNode)-Math.floor(this.cqV/2);if(bHT<this.bJZ.mintop){this.bJZ.top=this.bJZ.mintop}else if(bHT>this.bJZ.mintop+this.bJZ.maxheight){this.bJZ.top=this.bJZ.mintop+this.bJZ.maxheight}else{this.bJZ.top=bHT}this.yQ(this.bRJ,this.bJZ);this.cJs(this.bJZ,true);this.dvM.jY(bHm)};bQA.fcB=function(bHT){bHT=bHT||0;if(bHT<this.bJZ.mintop){this.bJZ.top=this.bJZ.mintop}else if(bHT>this.bJZ.mintop+this.bJZ.maxheight){this.bJZ.top=this.bJZ.mintop+this.bJZ.maxheight}else{this.bJZ.top=bHT}this.yQ(this.bRJ,this.bJZ);this.cJs(this.bJZ,true)};bQA.fdz=function(bHq){bHq=bHq||0;var bHT=0;var eB=(E.bHr(this.bJr,"zitm")||[]).length;if(eB<0)return;if(bHq>=0){bHT=bHq*this.bJZ.maxheight/eB}this.fcB(bHT)};bQA.fdC=function(){if(this.caa=="h"||this.caa=="vh"){if(this.daY>0&&this.dvV>0&&this.dvV>this.daY&&this.dvW>0){this.dvI=Math.floor(this.daY*this.dvW/this.dvV);if(this.dvI<this.cEP)this.dvI=this.cEP;this.cov.style.width=this.dvI+"px";this.bVg.style.visibility=""}else{this.bVg.style.visibility="hidden";this.bVg.style.display="none"}}};bQA.yQ=function(bHz,bg,ya){bHz=E.be(bHz);if(!bHz)return;bg=bg||{};var bHT=bg.top||0,cN=bg.left||0,QZ=bg.mintop||0,ciZ=bg.minleft||0;YR=bg.maxwidth||0,YQ=bg.maxheight||0;if(!!ya){var kT=this.Ap(bHz)||{};cN+=kT.left||0;bHT+=kT.top||0}bHT=Math.max(QZ,bHT);if(YQ>0){bHT=Math.min(bHT,YQ+QZ)}else{bHT=QZ}cN=Math.max(ciZ,cN);if(YR>0){cN=Math.min(cN,YR+ciZ)}else{cN=ciZ}bHz.style.top=(bHT||0)+"px";bHz.style.left=(cN||0)+"px"};bQA.Ap=function(bHz){bHz=E.be(bHz);if(!bHz)return;return{left:parseInt(E.oS(bHz,"left"))||0,top:parseInt(E.oS(bHz,"top"))||0}};bQA.cK=function(){delete this};bQA.dwb=function(cGX,fe){var bHT=Math.floor(this.bJZ.maxheight*cGX/(fe-10));this.bRJ.style.top=bHT+"px";this.bJZ.top=bHT}})();
(function(){var p=P(N.ui),lI,bHI="ui-"+U.cA();var bQz=[],Sg="js-zslt-123",YI="js-zslt-124",hC="w-sbtn-2";p.bIM("#<uispace> .zitm{font-size:16px;height:25px;line-height:25px;}",bHI);p.AZ=C();lI=p.AZ.bi(p.vW,true);lI.bz=function(bHl){bHl=bHl||O;this.yE=Math.min(bHl.total,Math.max(bHl.number||10,3));p.AZ.bw.bz.call(this,bHl)};lI.cU=function(){return"m-page "+bHI};lI.cM=function(){var bJO=N.tm.fc00||"";return'<a class="w-sbtn" href="#"><span class="w-ial">上 一 页</span></a><div class="num"><span>2 / 10</span><span class="arrow">&nbsp;</span></div><a class="w-sbtn" href="#"><span class="w-iar r">下 一 页</span></a>'};lI.bHM=function(){this.bHt.onselectstart=F;E.ba(this.bHt,"noselect");var bHo=E.dE(this.bHt);this.rf=bHo[0];this.clK=bHo[2];this.bNe=bHo[1];bHo=E.dE(this.bNe);this.cer=bHo[0];this.bSB=bHo[1];V.bHp(this.bNe,"mouseover",this.bFI.bHk(this));V.bHp(this.bNe,"mouseout",this.bzn.bHk(this));V.bHp(this.rf,"click",this.Rf.bHk(this,1));V.bHp(this.clK,"click",this.Rf.bHk(this,2))};lI.Sh=function(){var yF=p.AZ.bw.Sh.call(this);yF.number=this.yE;return yF};lI.bFI=function(bHm){V.bHs(bHm);if(!this.eZ)return;if(!this.bJr){this.bFM();E.ba(this.bSB,"arrowup");this.bQQ.pp=this.bC;this.bJr=P("loft.w").car.bG(this.bNe,this.bQQ)}else{if(!!this.bLj){this.bLj=window.clearTimeout(this.bLj)}if(!this.bJr.cgc()){E.ba(this.bSB,"arrowup");this.bQQ.pp=this.bC;this.bJr.bz(this.bQQ)}}};lI.bzn=function(){if(!!this.bLj)return;this.bLj=window.setTimeout(function(){this.bJr.Hl();this.bLj=null}.bHk(this),400)};lI.Rf=function(fW,bHm){V.bHs(bHm);switch(fW){case 0:if(E.cr(this.bFJ,hC))return;this.bUM(1,this.eZ);return;case 1:if(E.cr(this.rf,hC))return;this.bUM(this.bC-1,this.eZ);return;case 2:if(E.cr(this.clK,hC))return;this.bUM(this.bC+1,this.eZ);return;case 3:if(E.cr(this.bFL,hC))return;this.bUM(this.eZ,this.eZ);return;case 4:var fcw=bHm;this.bUM(fcw,this.eZ);return}};lI.bFM=function(){var i=0;cf=[];for(;i<this.eZ;i++){cf.push({v:i+1})}var cbv=250;if(this.eZ<=10){cbv=this.eZ*25}var cgI=this.bNe.clientWidth||48;this.bQQ={notShowTitle:true,triggerNode:this.bNe,upScrollBarStyleBottom:30,scrollAreaWidth:cgI,scrollAreaHeight:cbv,scrollType:this.eZ<=10?"":"v",minBtnLength:20,hasAnimateMove:true,"class":"scrollbar0",items:cf,onchange:this.cgJ.bHk(this),onlisthide:this.cgL.bHk(this)}};lI.cgJ=function(bg,bHq){this.Rf(4,bg)};lI.cgL=function(){E.bf(this.bSB,"arrowup")};lI.dyf=function(){var bHo=this.bC==1;bHo?E.ba(this.rf,hC):E.bf(this.rf,hC);bHo=this.bC==this.eZ;bHo?E.ba(this.clK,hC):E.bf(this.clK,hC)};lI.bFN=function(){var bn=this.YS.getElementsByTagName("a");if(!bn||!bn.length)return;for(var i=0,l=bn.length,gA,lo=Math.min(this.eZ-this.yE+1,Math.max(1,this.bC-Math.floor(this.yE/2)));i<l;i++){gA=lo+i;bn[i].index=gA;bn[i].innerText=gA;gA==this.bC?E.ba(bn[i],YI):E.bf(bn[i],YI)}};lI.wO=function(bHq,eB){if(this.bC==bHq&&this.eZ==eB)return false;p.AZ.bw.wO.call(this,bHq,eB);this.cer.innerText=this.bC+" / "+this.eZ+" ";this.dyf();return true}})();
(function(){var p=P(N.ui),hA,bHI="ui-"+U.cA();p.bIM("#<uispace> .zcvr,#<uispace> .zhnt{display:none;position:fixed;_position:absolute;z-index:80;}#<uispace> .zcvr{top:0;left:0;width:100%;height:100%;background:url("+N.rc.r+"empty.png);}#<uispace> .zhnt{display:block;top:0px;color:#000;z-index:12000;}",bHI);p.Cd=C();hA=p.Cd.bi(p.ga,true);hA.SF=function(eV,vp,by){this.nu();this.cIZ(eV,vp,by)};hA.cIZ=function(eV,vp,by){var qx=this.ep.clientHeight,dp=document.documentElement||document.body,FW=document.body||document.documentElement,bHT=0;this.JA.innerText=eV||" ";if(by=="err"){this.JA.className="tmsgc err"}else if(by=="load"){this.JA.className="tmsgc load"}else{this.JA.className="tmsgc ok"}if(B.dh){bHT=dp.scrollTop||FW.scrollTop}if(!!vp){bHT+=Math.max(0,dp.clientHeight-qx)/2}this.dvA.style.top=bHT+"px";E.ba(this.dvA,"a-slide-do");this.ep.style.marginTop=!!vp?"6px":"0px"};hA.gI=function(cju){if(!cju)this.hG();this.JQ()};hA.JQ=function(){this.ep.style.marginTop=-this.ep.scrollHeight+"px";E.bf(this.dvA,"a-slide-do")};hA.nu=function(bB){if(U.co(bB,"number")&&bB>=0){if(bB>100)bB=100;this.fG.style.backgroundColor="black";this.fG.style.opacity=bB/100;this.fG.style.filter="alpha(opacity="+bB+")"}else{this.fG.style.backgroundColor="";this.fG.style.opacity="";this.fG.style.filter=""}if(B.dh){var gl=document.documentElement||document.body;this.fG.style.width=gl.scrollWidth+"px";this.fG.style.height=gl.scrollHeight+"px"}this.fG.style.display="block"};hA.hG=function(){this.fG.style.display="none"};hA.cU=function(){return bHI};hA.cM=function(){return'<div class="zcvr wtag">&nbsp;</div><div class="zhnt m-tmsg a-slide a-slide-tmsg"><div class="slide" style="margin-top:-42px;"><div class="tmsg"><span class="tmsgc ok wtag"></span></div></div></div>'};hA.bHM=function(){var bHo=E.bHr(this.bHt,"wtag");this.fG=bHo[0];this.JA=bHo[1];this.ep=bHo[1].parentNode.parentNode;this.dvA=this.ep.parentNode};var cv,bIC,Ca=0;var jM=function(){if(!bIC)bIC=p.Cd.bG(document.body,{"class":"uiutil"});return bIC};var SE=function(cju){cv=window.clearTimeout(cv);E.gI(cju)};E.dHy=function(){return bIC&&bIC.fG};E.bY=function(eV,pB,SD,vp,cju,by){if(!!pB&&(cju===null||cju===undefined)){cju=true}if(!!SD){cv=window.clearTimeout(cv);Ca=0}else if(!!cv){Ca++}else{cv=window.setTimeout(SE.bHk(E,cju),3e3)}var bLq=jM();by=by||"ok";!pB?bLq.SF(eV,vp,by):bLq.cIZ(eV,vp,by)};E.bHw=function(){var de=Array.prototype.slice.call(arguments,0);while(de.length<5){de.push(null)}de.push("err");E.bY(de[0],de[1],de[2],de[3],de[4],de[5])};E.ef=function(){var de=Array.prototype.slice.call(arguments,0);while(de.length<5){de.push(null)}de.push("load");E.bY(de[0],de[1],de[2],de[3],de[4],de[5])};E.nu=function(bB){jM().nu(bB)};E.gI=function(cju){if(!!cv)return;jM().gI(cju)};E.JQ=function(){if(!!cv)return;jM().JQ()};E.hG=function(){jM().hG()}})();
(function(){var p=P("loft.w"),kg,lz,ye;var JV='<div class="m-layer"><div class="layert"><h3 class="zflg">删除投稿</h3><a class="w-close2 zflg" href="#">关闭</a></div><div class="zflg"></div></div>';var bHM=function(){var bHo=E.bHr(this.bHt,"zflg");this.yh=bHo[0];this.fP=bHo[1];this.nJ=bHo[2];E.DX(bHo[1].parentNode);E.DX(bHo[1].parentNode);V.bHp(this.fP,"click",this.rR.bHk(this));P(N.ui).bIM("#<uispace>{border:none;}",this.cU())};p.nr=C();kg=p.nr.bi(P(N.ui).nr,true);kg.cM=function(){return JV};kg.bHM=function(){bHM.call(this)};kg.cU=function(){return"a-scale a-scale-layer"};kg.bE=function(){p.nr.bw.bE.call(this,arguments);E.ba(this.bHt,"a-scale-do")};kg.rR=function(bHm){if(!!bHm)V.bHs(bHm);E.bf(this.bHt,"a-scale-do");window.setTimeout(p.nr.bw.rR.bHk(this),300)};p.mG=C();lz=p.mG.bi(P(N.ui).mG,true);lz.cM=function(){return JV};lz.bHM=function(){bHM.call(this);E.ba(this.yh.parentNode,"zmov")};lz.cU=function(){return"a-scale a-scale-layer"};lz.bE=function(){p.mG.bw.bE.call(this,arguments);E.ba(this.bHt,"a-scale-do")};lz.rR=function(bHm){if(!!bHm)V.bHs(bHm);E.bf(this.bHt,"a-scale-do");window.setTimeout(p.mG.bw.rR.bHk(this),300)};p.fr=C();ye=p.fr.bi(P(N.ui).cFw,true);ye.rU=function(bHl){this.eX=bHl||{};p.fr.bw.rU.call(this,this.eX);if(!this.eX.nocover){this.eX.onclose=E.hG;this.eX.onbeforeshow=E.nu.bHk(null,25)}if(!!this.eX.wclass){return this.eX.wclass.bG(null,this.eX)}return!this.eX.nomove?p.mG.bG(null,this.eX):p.nr.bG(null,this.eX)};ye.daT=function(ca){if(!!this.ei&&!!this.ei.fP){V.bJL(this.ei.fP,"click");V.bHp(this.ei.fP,"click",this.fcq.bHk(this,ca))}};ye.fcq=function(ca,bHm){V.bHs(bHm);if(!!this.ei&&!!this.ei.fP){if(!!ca)ca();this.ei.rR()}};ye.bz=function(bHl){if(!bHl.nocover){bHl.onclose=E.hG;bHl.onbeforeshow=E.nu.bHk(null,25)}bHl.content=this.bHt;this.ei.bz(bHl);p.fr.bw.bz.call(this,bHl)}})();
(function(){var p=P("loft.w"),JY;var dvv=function(cp){if(!cp)return true;for(var iq in cp){return false}return true};p.cV=C();JY=p.cV.bi(P(N.ut).gY);JY.bq=function(){this.bHB();var bk=E.bHr(document,"fa-init");this.bzh(bk&&bk[0]||null);this.bHu=this.bzd||{};this.bHt=E.be(this.bHu.mid)};JY.bzh=function(bk){var bHD,mw;if(!!bk){var bHo=bk.getElementsByTagName("textarea")||[];for(var i=bHo.length-1,by,bo;i>=0;i--){bo=bHo[i];by=U.bA(bo.name.toLowerCase());if(by=="js"){mw=bo.value||"";continue}if(by=="html"){bHD=bo.value||"";continue}if(!bo.id)continue;if(by=="jst"){E.ft(bo);continue}if(by=="txt"){fa.x.ce(bo.id,bo.value||"");continue}if(by=="ntp"){E.gD(bo.value||"",bo.id);continue}}E.hE(bk)}this.Aw(mw);if(!!bHD)this.bVn(bHD)};JY.Aw=function(kO){kO=U.bA(kO||"");if(!kO)return;try{(new Function(kO)).call(this);this.bzd=this.p||"index"}catch(e){try{var kO=kO.replace(/\u2028/g,"");(new Function(kO)).call(this);this.bzd=this.p||"index"}catch(e2){alert(e2)}}if(!P("loft.c").bPp||dvv(P("loft.c").bPp)){P("loft.c").bPp=this.bzd||{}}}})();
(function(){var p=P("loft.w"),hN;p.jt=C();hN=p.jt.bi(P(N.fw).jt);hN.bY=function(cef){E.dt(this.cFs,"lhint","w-load2");this.cFs.innerHTML='<div class="load">加载中</div>';this.cP.icase.innerHTML="";this.cP.icase.appendChild(this.cFs)}})();
(function(){var p=P("loft.w.suggest"),bIZ,Ip,eR;p.Ce=C();bIZ=p.Ce.bi(P(N.ui).gB,true);bIZ.cM=function(){return'<div class="ssch"><form class="xtag"><button type="submit">&nbsp;</button><input type="text" style="padding:0;" class="xtag" placeholder="搜索标签、人、我的文章" maxlength="40"></form></div><div class="suggest"><div class="xtag sugbox"></div></div>'};bIZ.cU=function(){return"m-ssch2"};bIZ.bz=function(bHl){bHl.option=p.MO;p.Ce.bw.bz.call(this,bHl)};bIZ.xW=function(bn,bHq){if(!bn||!bn.length){if(this.bYr){this.bKw.style.display="none"}return}this.cT=this.SJ.bG(bn,this.fS,this.cP);if(!!this.cT[bHq]){this.bC=bHq;this.rg=0;this.cT[this.bC].gg(true)}this.fS.style.visibility="visible";if(!this.bYr){this.UQ()}E.ba(this.fS,"sugbox-act")};bIZ.bHM=function(){var bHo=E.bHr(this.bHt,"xtag");this.ek=bHo[0];this.bU=bHo[1];this.fS=bHo[2];V.bHp(this.bU,"click",V.bHs.bHk(V));V.bHp(document,"click",this.he.bHk(this,true));V.bHp(this.bU,"input",this.hu.bHk(this));V.bHp(this.bU,"focus",this.dX.bHk(this,true));V.bHp(this.bU,"blur",this.dX.bHk(this,false));V.bHp(this.ek,"submit",this.bLu.bHk(this));V.bHp(document,"keydown",this.mW.bHk(this));if(loft.c.cm.userId<=0){this.bU.setAttribute("placeholder","搜索标签")}if(!B.HC)this.bU.value=this.bU.getAttribute("placeholder")};bIZ.dX=function(en,bHm){var bTm=this.bU.getAttribute("placeholder");if(!!en){E.ba(this.bHt,"m-ssch-act");this.hu()}else{E.bf(this.bHt,"m-ssch-act")}if(!B.HC){window.setTimeout(function(){if(!!en&&this.bU.value==bTm)this.bU.value="";if(!en&&this.bU.value=="")this.bU.value=bTm}.bHk(this),50)}};bIZ.bLu=function(bHm){V.bHs(bHm);this.he();this.bh("onenter")};bIZ.hu=function(){var bg=U.bA(this.bU.value);var bTm=this.bU.getAttribute("placeholder");if(bg===bTm)return;this.he(!bg);if(!bg)return;this.bh("onchange",bg)};bIZ.bgH=function(bHq,pN){this.rg=this.rg||-1;var bo=this.cT[this.bC];if(!!bo)bo.gg(false,this.rg);this.bC=bHq;this.rg=pN};bIZ.pz=function(fW){var bo=this.cT[this.bC];if(!!bo)bo.gg(false,this.rg);var pN=this.rg+fW;if(!!bo&&pN>=0&&pN<bo.re.length){this.rg=pN;bo.gg(true,pN)}else{this.bC=(this.bC+fW)%this.cT.length;if(this.bC<0)this.bC=this.cT.length-1;var bo=this.cT[this.bC];this.rg=bo.re.length>1&&fW<0?bo.re.length-1:0;if(!!bo)bo.gg(true,this.rg)}};bIZ.SK=function(bg,yk){if(!!yk)bg.href=yk;else{var bo=this.cT[Math.max(0,Math.min(this.bC,this.cT.length-1))];var hf=bo.re[this.rg||0];bg.href=hf.href}this.he();this.bh("onselect",bg)};bIZ.he=function(MN){E.bf(this.fS,"sugbox-act");if(!!MN){window.setTimeout(p.Ce.bw.he.bHk(this),300)}else{p.Ce.bw.he.call(this)}};p.MO=C();eR=p.MO.bi(P(N.ui).hF,true);var eO=E.gD('<div class="sugitm"><a href="#" class="sugitma stag"><span class="sugin stag">搜“<strong>关键关键字关键字关键字关键字字</strong>”标签</span></a></div>');eR.bq=function(){this.bHB();this.bHt=E.mF(eO);var bHo=E.bHr(this.bHt,"stag");this.Bx=bHo[0];this.dg=bHo[1];V.bHp(this.bHt,"click",this.rF.bHk(this));V.bHp(this.bHt,"mouseout",this.Cr.bHk(this));V.bHp(this.bHt,"mouseover",this.Cq.bHk(this))};eR.bIh=function(bHl){bHl=bHl||O;this.re=[this.Bx];this.gg(false);this.bC=bHl.VP;this.bHp("onclick",bHl.onclick||F);this.bHp("onmouseover",bHl.onmouseover||F)};eR.gg=function(hU,pN){pN=pN||0;var hf=this.re[pN];if(!hf)return;hU?E.ba(hf,"js-select"):E.bf(hf,"js-select")};eR.ce=function(bg){this.fg=bg;this.dg.innerHTML=bg.html||"";if(bg.type==0){this.Bx.className="sugitma stag sctag";E.bf(this.Bx.parentNode,"sugitm-blog")}if(bg.type==1){this.Bx.className="sugitma stag scblog";E.ba(this.Bx.parentNode,"sugitm-blog")}if(!!bg.subItems&&!!bg.subItems.length){this.IC=p.daS.bG(bg.subItems,this.bHt,{search:bg.value});for(var i=0,l=this.IC.length;i<l;i++){this.re.push(this.IC[i].bHt)}}};eR.cK=function(){E.bf(this.Bx.parentNode,"sugitm-blog");this.IC=p.daS.bHV(this.IC);var l=this.re.length,i=0;for(;i<l;i++){this.gg(false,i)}p.MO.bw.cK.apply(this,arguments)};eR.cF=function(){return this.fg};eR.rF=function(bHm){V.bHs(bHm);var eF=V.be(bHm,function(bHz){return bHz.tagName=="A"});this.bh("onclick",this.fg,!!eF?eF.href:"")};eR.Cq=function(bHm){var eF=V.be(bHm,function(bHz){return bHz.tagName=="A"});if(!eF)return;var IE=U.fO(this.re,eF);this.gg(true,IE);this.bh("onmouseover",this.bC,IE)};eR.Cr=function(bHm){var eF=V.be(bHm,function(bHz){return bHz.tagName=="A"});if(!eF)return;var IE=U.fO(this.re,eF);this.gg(false,IE)};p.daS=C();Ip=p.daS.bi(P(N.ut).bJj,true);var Di=E.gD('<a href="#" class="sugitma"><span class="w-img2 w-img2-2"><img class="utag" src="//l.bst.126.net/rsc/img/ava/30.png"></span><span class="sugin f-thide itag utag">搜“<strong>关键字</strong>”标标签标签标签标签标签签</span><span class="desc f-thide itag utag"></span></a>');Ip.bq=function(){this.bHB(Di);var bHo=E.bHr(this.bHt,"utag");this.IF=bHo[0];this.fz=bHo[1];this.bLL=bHo[2]};Ip.ce=function(bHn){if(!!bHn&&bHn.isFirstBlogFromSearchID){if(!!bHn.blogName){this.bLL.innerText=bHn.blogName;E.ba(this.bHt,"js-hasdesc")}else{E.bf(this.bHt,"js-hasdesc")}}else{if(!!bHn.star&&!!bHn.star.desc){this.bLL.innerText=bHn.star.desc;E.ba(this.bHt,"js-hasdesc")}else{E.bf(this.bHt,"js-hasdesc")}}p.daS.bw.ce.call(this,bHn);var fcp=U.ew(this.hm.replace(/([\\*|\\+|\\?|\\[])/ig,"\\$1")),bKC=new RegExp("("+fcp+")","ig");if(U.co(bHn,"string")){this.IF.parentNode.style.display="none";this.bHt.href="http://www.lofter.com/tag/"+encodeURIComponent(bHn);this.bHt.title=bHn;bHn=U.ew(bHn).replace(bKC,"<strong>$1</strong>");this.fz.innerHTML=bHn}else{this.IF.parentNode.style.display="block";this.IF.src=loft.x.eK(bHn.bigAvaImg,30);this.bHt.href=loft.x.bM(bHn.blogName);this.bHt.title=bHn.blogNickName;var gR=bHn.blogNickName,iV=gR.split(this.hm);gR=U.ew(gR).replace(bKC,"<strong>$1</strong>");this.fz.innerHTML=gR}};Ip.bIh=function(yF){this.hm=yF.search}})();
(function(){var p=P("loft.w.suggestnew"),MM,qX,bIZ,ML="skey_";p.dKP=C();qX=p.dKP.bi(P(N.ut).gY);qX.bq=function(bl,bHl){bHl=bHl||{};this.brp=bHl.targetBlogName||loft.c.cm.blogName||"";this.bro=new p.VU({onsearchsucc:this.brn.bHk(this)});this.eH=p.Ce.bG(bl,{onselect:this.qu.bHk(this),onchange:this.hu.bHk(this),onenter:this.SI.bHk(this)})};qX.SI=function(){if(loft.c.cm.userId>0)return;var bg=this.eH.cF();location.href=location.hosturl+"/tag/"+encodeURIComponent(bg)+"?from=tagsearch"};qX.hu=function(bg){if(loft.c.cm.userId<=0)return;this.eH.xW(this.VY(bg),0);window.setTimeout(function(){this.bro.brm(bg,5)}.bHk(this),100)};qX.VY=function(bx,brl,ck){var bn=[];bn.push({html:"进入 <strong>"+this.MK(bx,13)+"</strong> 标签 ＞",value:bx,type:0,subItems:ck||[]});bn.push({html:"<strong>"+this.MK(bx,11)+"</strong> 相关的人 ＞",value:bx,type:1,subItems:brl||[]});return bn};qX.MK=function(bx,Wi){var fe=loft.x.ty(bx);if(fe>Wi){var bJO,i=0;while(++i){if(i>=bx.length)break;bJO=bx.substring(0,i);if(loft.x.ty(bJO)>=Wi){bx=bJO+"...";break}}}return U.ew(bx)};qX.brn=function(bx,bn){var bg=U.bA(this.eH.cF());if(!!bn&&(!!bn.blogInfos.length||!!bn.tags.length)&&bx==bg){var bu=[],i=0,l=bn.blogInfos.length;for(;i<l;i++){if(!!bn.blogInfos[i].blogId)bu.push(bn.blogInfos[i])}this.eH.he();this.eH.xW(this.VY(bx,bu,bn.tags),0)}};qX.qu=function(bg){switch(bg.type){case 0:setTimeout(function(){if(/#$/.test(bg.href)==false){location.href=bg.href+"?from=tagsearch&queryString="+encodeURIComponent(bg.value)}else{location.href=location.hosturl+"/tag/"+encodeURIComponent(bg.value)+"?from=tagsearch"}}.bHk(this),300);var bx=bg.value;var bIu={scene:"UNKNOW",itemId:"",itemType:"",rating:6,text:bx,cost:"",progress:"",algInfo:"",recId:""};loft.x.bKi(bIu);var iz=bg.value;if(/#$/.test(bg.href)==false){var bHQ=bg.href.split("/")||[];if(!!bHQ[bHQ.length-1]){iz=bHQ[bHQ.length-1];try{iz=decodeURIComponent(iz)}catch(e){}}}var bIu={scene:"UNKNOW",itemId:"",itemType:"",rating:1,text:iz,cost:"",progress:"",algInfo:"",recId:""};loft.x.bKi(bIu);break;case 1:if(/#$/.test(bg.href)==false){window.open(bg.href);var bx=bg.value;var bIu={scene:"UNKNOW",itemId:"",itemType:"",rating:6,text:bx,cost:"",progress:"",algInfo:"",recId:""};loft.x.bKi(bIu);try{var fco=bg.href;var bHq=U.fO(bg.subItems,function(bo){return fco.indexOf(bo.homePageUrl)==0});var bHx=bg.subItems[bHq].blogId;var bIu={scene:"UNKNOW",itemId:bHx,itemType:"BLOG",rating:1,text:"",cost:"",progress:"",algInfo:"",recId:""};loft.x.bKi(bIu)}catch(e){}}else{location.href=location.hosturl+"/follow/"+encodeURIComponent(bg.value)}break;case 2:location.href=location.hosturl+"/blog/"+this.brp+"/tag/"+bg.value;break}};qX.bE=F;p.VU=C();MM=p.VU.bi(P(N.ut).hx);MM.brm=function(bx,dx){if(bx==""||bx==undefined)return;var bS=this.et(ML+bx);if(!!bS){this.bh("onsearchsucc",bx,bS=="empty"?null:bS);return}J.br(location.dwr,"UserBean","searchBlogForSuggest",bx,dx,this.hm.bHk(this,bx))};MM.hm=function(bx,bS){if(U.co(bS,"array")){var fA=bS;bS={blogInfos:fA}}if(!!bS&&bS.isFirstBlogFromSearchID&&!!bS.blogInfos&&!!bS.blogInfos[0]){bS.blogInfos[0].isFirstBlogFromSearchID=true}if(!!bS){this.gp(ML+bx,bS)}else{this.gp(ML+bx,"empty")}this.bh("onsearchsucc",bx,bS)};p.Ce=C();bIZ=p.Ce.bi(P("loft.w.suggest").Ce,true);bIZ.cU=function(){return"m-ssch2"};bIZ.cM=function(){return""};bIZ.bHM=function(){this.bHt=E.be("schtagbox");var bHo=E.bHr(this.bHt,"xtag"),i=0;this.ek=bHo[i++];this.brC=bHo[i++];this.bgR=bHo[i++];this.bU=bHo[i++];this.cvm=bHo[i++];this.fS=bHo[i++];this.dOn=E.be("newguide-1");this.bQi=false;this.cdb=E.be("taglist");V.bHp(this.brC,"click",this.dvo.bHk(this));V.bHp(this.bU,"click",V.bHs.bHk(V));V.bHp(document,"click",this.he.bHk(this,true));V.bHp(this.bgR,"click",function(){this.bU.focus()}.bHk(this));V.bHp(this.bU,"input",function(){if(this.dvn)this.dvn=window.clearTimeout(this.dvn);this.dvn=setTimeout(this.hu.bHk(this),150)}.bHk(this));if(B.da&&B.Ud>="9.0"&&B.Ud<="9.9"){V.bHp(this.bU,"keyup",function(bHm){var bK=bHm&&(bHm.which||bHm.keyCode);if(bK==8||bK==46){this.hu()}}.bHk(this))}V.bHp(this.bU,"focus",this.dX.bHk(this,true));V.bHp(this.bU,"blur",this.dX.bHk(this,false));V.bHp(this.ek,"submit",this.bLu.bHk(this));V.bHp(document,"keydown",this.mW.bHk(this));if(!!B.dh)V.bHp(document,"keypress",this.cRq.bHk(this));if(loft.c.cm.userId<=0){this.bU.setAttribute("placeholder","搜索标签")}if(!B.HC){this.bgR.style.display=""}p.hideschlist=this.he.bHk(this,true);this.cdb.style.marginTop="-"+this.cdb.offsetHeight+"px";if(!!this.bU.isfocus)this.dX(true)};bIZ.dvo=function(bHm){V.bHs(bHm);var bTm=this.bU.getAttribute("placeholder")||"搜索标签、人";if(!this.bU.value)return;location.href=location.hosturl+"/tag/"+encodeURIComponent(this.bU.value)+"?from=tagsearch"};bIZ.dX=function(en,bHm){var bTm=this.bU.getAttribute("placeholder")||"搜索标签、人";if(!!en){if(!this.bQi){J.br(location.dwr,"LoggerBean","printStatLog","homeClick_20130514_02",F)}if(!!loft.w.hidemorelist)loft.w.hidemorelist();if(!!loft.w.bm.hidebloglist)loft.w.bm.hidebloglist();E.ba(this.cvm,"f-op0");this.bQi=true;this.daQ();E.ba(this.bHt,"m-ssch-act");this.hu()}else{E.bf(this.cvm,"f-op0");this.bQi=false;E.bf(this.bHt,"m-ssch-act");this.cEJ=false}if(!B.HC){if(this.bU.value==""){this.bgR.style.display=""}else{this.bgR.style.display="none"}}};var Oq=[38,40,13,27,83];bIZ.mW=function(bHm){var rB=bHm&&(bHm.which||bHm.keyCode),bHq=U.fO(Oq,rB);if(bHq==-1)return;var bHz=V.be(bHm);switch(bHq){case 0:if(!!this.bQi)this.daO(-1,bHm);break;case 1:if(!!this.bQi)this.daO(1,bHm);break;case 2:if(!!this.bQi)this.SI(0,bHm);break;case 3:if(!!this.bQi){this.bU.blur();if(!!this.ccb[this.bMK])E.bf(this.ccb[this.bMK],"seli-hover");this.he(true);this.daN(true)}break;case 4:if(bHz.tagName=="INPUT"||bHz.tagName=="TEXTAREA"||!!E.cr(bHz,"noshortkey"))return;this.fcn(bHm);break}};bIZ.fcn=function(bHm){V.bHs(bHm);if(!!this.dOn&&this.dOn.style.display==""){window.loft.g.g5(1,bHm)}this.bU.focus()};bIZ.cRq=function(bHm){var rB=bHm&&(bHm.which||bHm.keyCode);if(rB==13&&!!this.bQi){if(!!this.cEJ){this.daO(0,bHm)}else{if(!!this.cjO[this.bYJ]){this.cjO[this.bYJ].click()}else{this.dvo(bHm)}}}if(rB==27&&!!this.bQi){this.bU.blur();if(!!this.ccb[this.bMK])E.bf(this.ccb[this.bMK],"seli-hover");this.he(true);this.daN(true)}};bIZ.SI=function(gC,bHm){if(!!this.cEJ){this.daO(0,bHm)}else{if(!!this.cjO[this.bYJ]){var CL=this.cjO[this.bYJ];try{CL.click();return true}catch(e){var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true);CL.dispatchEvent(evt);return false}}else{this.dvo(bHm)}}};bIZ.daO=function(gC,bHm){if(this.ccb.length==0)return;if(gC==0){V.bHs(bHm);if(!!this.ccb[this.bMK])location.href=this.ccb[this.bMK].children[0].href}else{if(!!this.cEJ&&!this.bU.value){if(!!this.ccb[this.bMK])E.bf(this.ccb[this.bMK],"seli-hover");this.bMK=this.bMK+gC<=-1?this.ccb.length-1:this.bMK+gC>=this.ccb.length?0:this.bMK+gC;if(!!this.ccb[this.bMK])E.ba(this.ccb[this.bMK],"seli-hover")}else{if(!E.cr(this.cjO[this.bYJ],"js-select"))this.bYJ=-1;if(this.bYJ>-1)E.bf(this.cjO[this.bYJ],"js-select");this.bYJ=this.bYJ+gC<=-1?this.cjO.length-1:this.bYJ+gC>=this.cjO.length?0:this.bYJ+gC;if(this.bYJ>-1)E.ba(this.cjO[this.bYJ],"js-select")}}};bIZ.he=function(MN){E.bf(this.fS,"sugbox-act");if(!!MN){this.daN();window.setTimeout(p.Ce.bw.he.bHk(this),300)}else{try{p.Ce.bw.he.call(this)}catch(e){}}};bIZ.hu=function(fW){var bg=U.bA(this.bU.value);var bTm=this.bU.getAttribute("placeholder")||"搜索标签、人";if((!bg||bg===bTm)&&this.fS.children.length>0){this.he(true);if(B.da&&B.Ud<="9.9"){if(this.dvd)this.dvd=window.clearTimeout(this.dvd);this.fS.style.visibility="hidden"}this.fdJ=window.setTimeout(function(){E.bf(this.fS,"sugbox-act");if(!!this.bQi){this.daQ()}if(B.da&&B.Ud<="9.9"){this.dvd=window.setTimeout(function(){this.fS.style.visibility=""}.bHk(this),500)}}.bHk(this),"150");return}else{if(this.dRt){this.dRt=window.clearTimeout(this.dRt)}}if(!B.HC&&!bg){this.bgR.style.display="";if(!!this.bQi)this.daQ();return}this.he(!bg);if(!bg){if(!!this.bQi)this.daQ();return}if(!B.HC){this.bgR.style.display="none"}this.daN(true);this.bh("onchange",bg)};bIZ.daQ=function(gu,bHm){E.ba(this.cdb.parentNode,"a-w-sel-do");this.cdb.style.marginTop="0";this.cEJ=true;this.bMK=-1};bIZ.daN=function(fW){if(!E.cr(this.cdb.parentNode,"a-w-sel-do"))return;if(!this.cEJ||!!fW){this.cdb.style.marginTop="-"+this.cdb.offsetHeight+"px";E.bf(this.cdb.parentNode,"a-w-sel-do")}this.cEJ=false;this.bMK=-1;this.ccb=E.bHr(this.cdb,"seli")};bIZ.xW=function(bn,bHq){p.Ce.bw.xW.call(this,bn,bHq);this.cjO=E.bHr(this.fS,"sugitma");this.bYJ=0}})();
(function(){var p=P("loft.w"),ber,fQ,sR;p.bet=C();ber=p.bet.bi(P(N.ut).hx);ber.biT=function(uG){J.br(location.dwr,"UserBean","updateFavoriteTagSequence",uG,this.bh.bHk(this,"onupdatesequence"))};p.yp=C();sR=p.yp.bi(P(N.fw).lu);sR.bq=function(bl,bHl){bHl=bHl||{};this.bHB(bl,bHl);this.dl=new p.bet;var g=P("m.n");g.refreshFavTagList=this.biS.bHk(this)};sR.ke=function(){var bHo=E.be("favtagcnew");if(!bHo)return;this.tu=this.bex(bHo);var fC=E.bHr(bHo,"fctag");if(fC.length>0){E.be("nav2flnew").style.display="";E.bf(E.be("nav2flnew").parentNode,"f-op0")}return bHo};sR.bex=function(bHo){bHo=bHo||this.bHt;var bS=E.dE(bHo),i=0,l=bS.length,bey=[];if(!l)return;if(!this.tk){this.tk=p.cIp.bG(bHo,{handler:"seli",height:54,noselect:"f-usn",onchange:this.Qx.bHk(this)})}else{this.tk.gH()}for(;i<l;bey.push(parseInt(bS[i].id.replace(/ftagid/g,""))),i++);if(!!B.da&&l>0){for(var i=0;i<l;i++){V.bHp(bS[i].children[0],"click",function(bp){location.href=bp}.bHk(this,bS[i].children[0].href))}}return bey.join(",")};sR.Qx=function(){this.bez()};sR.bez=function(){var qP=this.tk.GK("id",";");qP=qP.replace(/ftagid/g,"");if(!!qP&&this.tu==qP)return;this.tu=qP;this.biR();!!this.tu&&this.dl.biT(this.tu)};sR.biR=function(){var bS=this.tk.cB,i=1,l=bS.length,bHq;E.ba(bS[0],"first");for(;i<l;i++){E.bf(bS[i],"first")}};sR.biS=function(){this.bex();this.bez();var cf=E.dE(this.bHt);this.bHt.style.display=!!cf&&cf.length?"":"none"};p.cIp=C();fQ=p.cIp.bi(P(N.ui).gX,true);fQ.jY=function(bHm){this.cjs=true;this.duY=V.vS(bHm);return};fQ.yd=function(bHm){if(!this.cjs||Math.abs(V.vS(bHm)-this.duY)<5)return;if(!this.cjr)this.cIH(bHm);p.cIp.bw.yd.call(this,bHm)};fQ.EK=function(bHm){this.cjs=this.cjr=false;p.cIp.bw.EK.call(this)};fQ.cIH=function(bHm){this.Br();this.rL=V.vS(bHm);this.YH(this.bHt,true);this.mn=V.be(bHm,this.bBh.bHk(this));this.mn.style.visibility="hidden";var cY=this.bHt.style;this.gh=this.mn.offsetTop;cY.top=this.gh+"px";cY.height=this.mn.offsetHeight+"px";this.dL.appendChild(this.bHt);if(B.dh&&!this.cv){this.cv=window.setInterval(this.YZ.bHk(this),10)}this.bHt.innerHTML=this.mn.innerHTML;this.cjr=true};fQ.bHM=function(){p.cIp.bw.bHM.call(this);E.ba(this.bHt,"seli seli-hover seli-move")};fQ.fs=function(bl){this.dL=E.be(bl);if(!this.dL)return;this.bHt.style.width="100%";this.gH()};fQ.RY=function(bHz){var bHo=!!this.rO&&E.bHr(bHz,this.rO)||null;return bHo&&bHo[0]||bHz};fQ.GJ=function(bHz){if(!!bHz[this.Bt])return;bHz[this.Bt]=true;bHz=this.RY(bHz);this.cjs=this.cjr=false;V.bHp(bHz.parentNode,"dragstart",V.bHs);V.bHp(bHz,"dragstart",V.bHs);V.bHp(bHz,"mousedown",this.jY.bHk(this))}})();
(function(){var p=P("loft.w.bm"),qk,fQ,Eu;p.lH=C();qk=p.lH.bi(P(N.ui).ga,true);qk.bq=function(bl,bHl){bHl=bHl||O;this.bHB(bl,bHl);var i=0,l=loft.c.jg.length,Ah=[];for(;i<l;Ah.push(loft.c.jg[i].blogId),i++);this.tu=Ah.join(";");this.tO=bHl.targetid;for(var i=0;i<loft.c.jg.length;i++){if(loft.c.jg[i].blogId==this.tO){this.duX=i>0?loft.c.jg[i-1].blogId:-1;break}}p.loadMsgCount=this.byS.bHk(this)};qk.bHM=function(){var CL=E.be("blogmanage");var bHo=E.bHr(CL,"bmtag");this.ou=bHo[0];this.dVX=bHo[1];this.cjl=bHo[2];this.cB=bHo[3];this.duV=E.be("bgmancontri","bgmanask","bgmanmsg");this.dWu=E.be("newguide-2");this.cjl.style.marginTop=-this.cjl.offsetHeight+"px";V.bHp(this.ou,"click",this.cxE.bHk(this));V.bHp(document,"click",this.bWN.bHk(this,true));V.bHp(document,"keydown",this.mW.bHk(this));if(!!B.dh)V.bHp(document,"keypress",this.cRq.bHk(this));p.hidebloglist=this.bWN.bHk(this,true)};qk.bz=function(bHl){bHl=bHl||O;p.lH.bw.bz.call(this,bHl)};qk.fs=function(bl,pa){if(!this.tk)this.tk=p.gX.bG(this.cB,{userclass:true,tag:"candrag",height:52,noselect:"f-usn",onchange:this.Qx.bHk(this)});else this.tk.gH()};var Oq=[38,40,13,27,68];qk.mW=function(bHm){var rB=bHm&&(bHm.which||bHm.keyCode),bHq=U.fO(Oq,rB);if(bHq==-1)return;var bHz=V.be(bHm);switch(bHq){case 0:if(!!this.cxQ)this.daM(-1,bHm);break;case 1:if(!!this.cxQ)this.daM(1,bHm);break;case 2:if(!!this.cxQ)this.daM(0,bHm);break;case 3:if(!!this.cxQ)if(!!this.cbA[this.bMK]){E.bf(this.cbA[this.bMK],"j-hover")}this.bWN();break;case 4:if(bHz.tagName=="INPUT"||bHz.tagName=="TEXTAREA"||!!E.cr(bHz,"noshortkey"))return;this.fck(bHm);break}};qk.fck=function(bHm){V.bHs(bHm);if(!!this.dWu&&this.dWu.style.display==""){window.loft.g.g5(2,bHm)}document.body.scrollTop=0;try{this.ou.click();return true}catch(e){var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true);this.ou.dispatchEvent(evt);return false}};qk.daM=function(gC,bHm){if(this.cbA.length==0)return;V.bHs(bHm);if(gC==0){if(!!this.cbA[this.bMK]){var CL=this.cbA[this.bMK];try{CL.click();return true}catch(e){var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true);CL.dispatchEvent(evt);return false}}}else{if(!!this.cbA[this.bMK])E.bf(this.cbA[this.bMK],"j-hover");this.bMK=this.bMK+gC<=-1?this.cbA.length-1:this.bMK+gC>=this.cbA.length?0:this.bMK+gC;if(!!this.cbA[this.bMK])E.ba(this.cbA[this.bMK],"j-hover")}};qk.cRq=function(bHm){var rB=bHm&&(bHm.which||bHm.keyCode);if(rB==13&&!!this.cxQ){this.daM(0,bHm)}if(rB==27&&!!this.cxQ){if(!!this.cbA[this.bMK]){E.bf(this.cbA[this.bMK],"j-hover")}this.bWN()}return};qk.cxE=function(bHm){V.bHs(bHm);if(!E.cr(this.cjl.parentNode,"a-w-sel-do")){this.cxQ=true;this.bMK=-1;if(!!loft.w.suggestnew.hideschlist)loft.w.suggestnew.hideschlist();if(!!loft.w.hidemorelist)loft.w.hidemorelist();this.cjl.style.marginTop="0px";E.ba(this.cjl.parentNode,"a-w-sel-do");J.br(location.dwr,"LoggerBean","printStatLog","homeClick_20130514_03",F)}else{this.bWN()}};qk.bWN=function(){this.cxQ=false;this.bMK=-1;if(!this.cjl)return;if(this.cjl.offsetHeight==0)return;this.cjl.style.marginTop=-this.cjl.offsetHeight+"px";E.bf(this.cjl.parentNode,"a-w-sel-do")};qk.Qx=function(){var qP=this.tk.GK("id",";"),bKC=new RegExp(this.duX,"gi");qP=this.duX==-1?this.tO+";"+qP:qP.replace(bKC,this.duX+";"+this.tO);if(this.tu!=qP){this.tu=qP;this.byA();J.br(location.dwr,"UserBean","updateBlogSequence",qP,function(){}.bHk(this))}};qk.byA=function(){var i=0,ij=[],pP=this.tu.split(";"),byt=pP.length,bt,bHq;for(i=0;i<byt;i++){bt=pP[i];bHq=U.fO(loft.c.jg,function(mV){return mV.blogId==bt});if(bHq!=-1){ij.push(loft.c.jg[bHq])}}loft.c.jg=ij};qk.byS=function(bS){var Lt=!!this.tO?this.tO:E.be("blogmanage").children[0].id,dXo=U.fO(bS,function(mV){return mV.blogId==Lt});if(dXo>=0){this.dXQ=bS.splice(dXo,1)}var i=0,l=bS.length,fC,qC=0,bn=E.bHr(this.cB,"candrag"),bt,bHq,df,cEH,duQ,daK=["unReadContributeCount","unReadAskCount","unReadMsgCount"],dYv=this.dXQ[0];for(;i<l;i++){fC=bS[i]||{};qC+=(fC.unReadContributeCount||0)+(fC.unReadMsgCount||0)+(fC.unReadAskCount||0)}this.dVX.innerHTML=qC;this.dVX.style.display=qC>0?"block":"none";for(i=0;i<bS.length;i++){bt=bn[i].id;bHq=U.fO(bS,function(mV){return mV.blogId==bt});df=E.bHr(bn[i],"ttag");cEH=0;for(var j=1;j<4;j++){duQ=bS[bHq];if(duQ[daK[j-1]]>0){df[j].innerHTML=duQ[daK[j-1]];df[j].parentNode.style.display="inline-block";E.ba(df[j].parentNode,"j-blogman");cEH++}else{df[j].parentNode.style.display="none";E.bf(df[j].parentNode,"j-blogman")}}df[0].style.width=cEH==0?"192px":157-40*(cEH-1)+"px";df[0].style.paddingRight=cEH==0?"17px":52+40*(cEH-1)+"px"}if(this.dXQ.length>0){for(var j=0;j<3;j++){if(!!this.duV[j]&&dYv[daK[j]]>0){this.duV[j].innerHTML=dYv[daK[j]];this.duV[j].style.display=""}}}this.cbA=E.bHr(this.cB,"j-blogman")};p.gX=C();fQ=p.gX.bi(P(N.ui).gX,true);fQ.bHM=function(){p.gX.bw.bHM.call(this);E.ba(this.bHt,"seli seli-hover seli-move")};fQ.fs=function(bl){this.dL=E.be(bl);if(!this.dL)return;this.gH()};fQ.jY=function(bHm){this.cjs=true;this.fci=V.vS(bHm);return};fQ.yd=function(bHm){if(!this.cjs||Math.abs(V.vS(bHm)-this.fci)<5){return}if(!this.cjr)this.cIH(bHm);p.gX.bw.yd.call(this,bHm)};fQ.EK=function(bHm){this.cjs=this.cjr=false;p.gX.bw.EK.call(this)};fQ.cIH=function(bHm){p.gX.bw.jY.call(this,bHm);this.bHt.innerHTML=this.mn.innerHTML;this.cjr=true}})();
(function(){var p=P("loft.w"),jQ,qk,qf,Eu,QY,yI,bFO=10,bzb=12e4,ex="blogcount",duK=0;p.QX=C();yI=p.QX.bi(P(N.ut).hx);yI.bai=function(byZ,byY){duK++;J.br(location.dwr,"TrackBean","getTopCount",byZ,byY,duK,false,this.byW.bHk(this))};yI.fcd=function(bCj){J.rl("/liveConfig.do",{method:"GET",onload:bCj,type:"json"})};yI.byW=function(dU){if(!!dU){var byV=dU.unread||0,bS=dU.list||[];this.gp(ex,bS);this.bh("ongetunreadtrackcount",byV);if(!!E.be("blogmanage")){loft.w.bm.loadMsgCount(bS)}}};p.bas=C();jQ=p.bas.prototype;jQ.bq=function(){this.bv=new p.QX({ongetunreadtrackcount:this.byT.bHk(this)});if(!!this.dK()&&loft.c.cm.userId>0){this.bbc=this.bbd=-1;this.bv.bai(-1,-1);this.byP();this.byO()}this.bv.fcd(function(res){if(res&&res.response&&res.response.liveSwitch){this.fbZ()}}.bHk(this));P("m").loadAllMembers=this.QQ.bHk(this);loft.x.dFN();this.fbP();var collectionRsideNew=E.be("j-collection-rside-new");if(collectionRsideNew){var localStorageKey="collectionRsideFirst"+P("loft.c").cm.mainBlogId;var curTime=(new Date).getTime();var endTime=(new Date("2018/10/05")).getTime();if(localStorage.getItem(localStorageKey)!=1&&curTime<endTime){collectionRsideNew.style.display="block"}var collectionRside=E.be("j-collection-rside");V.bHp(collectionRside,"click",function(){localStorage.setItem(localStorageKey,1)})}};jQ.dK=function(){var byJ=E.be("topbar"),bHo=E.bHr(byJ,"tbtag"),i=0;if(!bHo||!bHo.length)return false;this.FO=bHo[i++];this.QD=bHo[i++];this.pj=bHo[i++];this.fdM=bHo[i++];this.cEG=bHo[i++];this.fbM=bHo[i++];this.cg=bHo[i++];this.cdb=bHo[i++];this.eaw=E.be("uapptip1");this.eaz=E.be("uapptip2");this.fbJ=this.eaz.children[0];this.eaB=this.eaz.children[1];if(!!this.eaB){V.bHp(this.fbJ,"click",this.fbI.bHk(this))}if(!!E.be("apptip")){var crS=E.be("apptip");V.bHp(crS.parentNode,"click",this.fbH.bHk(this,crS));loft.x.bHG("qbydxz_20141230_01")}this.cEG.children[0].style.marginTop="-400px";V.bHp(this.pj.parentNode,"click",this.duH.bHk(this,true));V.bHp(document,"click",this.byE.bHk(this));this.byD();var bHo=E.dE(this.fbM).concat(E.dE(E.be("favtagcnew")).concat(E.dE(E.be("bloglstp")))),l=bHo.length;for(;l--;E.fy(bHo[l],"seli-hover"));this.CN=new loft.w.suggestnew.dKP(null,{stag:"",stype:0});this.IT=new p.yp(null,{});p.hidemorelist=this.duH.bHk(this,false);return true};jQ.fbZ=function(){var liveEntryNode=E.be("live-entry");if(liveEntryNode){liveEntryNode.style.display="";var headBar=E.be("lofterheadbar");if(headBar){E.ba(headBar,"g-live-hdc")}}};jQ.fbH=function(CL,bHm){V.bHs(bHm);J.br(location.dwr,"UserBean","clearAppTip",this.fbB.bHk(this,CL))};jQ.fbB=function(CL){location.href=CL.href};jQ.fbP=function(){var eba=E.be("w-myart");if(!!eba){E.fy(eba,"w-moreList-hover")}};jQ.byP=function(){var byM=function(){this.bv.bai(this.bbc,this.bbd);if(!!this.duC){window.clearTimeout(this.duC)}if(duK<12){this.duC=window.setTimeout(byM,bzb)}}.bHk(this);this.duC=window.setTimeout(byM,bzb)};jQ.byT=function(bHn){if(!!bHn&&bHn>0){this.QD.parentNode.style.display="";this.QD.innerText=bHn;if(!!window.isInDashboard){if(bHn>99){document.title="[99+] "+"LOFTER（乐乎） - 让兴趣，更有趣"}else{document.title="["+bHn+"] "+"LOFTER（乐乎） - 让兴趣，更有趣"}}}else{this.QD.parentNode.style.display="none";if(!!window.isInDashboard){document.title="LOFTER（乐乎） - 让兴趣，更有趣"}}this.bbc=bHn||0};jQ.byD=function(){var fbA=E.be("rside-postcount"),fbx=E.be("rside-postqueuecount"),fbw=E.be("rside-draftcount");this.fbv={postCount:fbA,postQueueCount:fbx,draftCount:fbw};var g=P("loft.g");g.updateRightSide=this.fbu.bHk(this);this.cdb.style.marginTop="-"+this.cdb.offsetHeight+"px";if(!B.dh)return;var bdb=E.be("rside"),cf,l;if(!!bdb){cf=bdb.getElementsByTagName("li");for(l=cf.length;l--;E.fy(cf[l],"j-hover"));}};jQ.fbu=function(by,fbq){var bHz=this.fbv[by];if(bHz){var fC=0;try{fC=parseInt(bHz.innerText)}catch(e){}fC+=fbq;if(fC<=0){fC=0}bHz.innerText=fC;if(by=="postCount")return;bHz.parentNode.parentNode.style.display=fC>0?"":"none"}};jQ.duH=function(gu,bHm){if(!!bHm&&!!E.cr(bHm.originalTarget||bHm.srcElement,"tbtag"))V.bHs(bHm);if(!gu||!!E.cr(this.cEG,"a-w-sel-do")){E.bf(this.cEG,"a-w-sel-do");this.cEG.children[0].style.marginTop="-400px"}else{if(!!this.eaw){J.br(location.dwr,"UAppBean","clearUappTip1",this.fbp.bHk(this))}if(!!loft.w.suggestnew.hideschlist)loft.w.suggestnew.hideschlist();if(!!loft.w.bm.hidebloglist)loft.w.bm.hidebloglist();E.ba(this.cEG,"a-w-sel-do");this.cEG.children[0].style.marginTop="0px";J.br(location.dwr,"LoggerBean","printStatLog","homeClick_20130514_01",F)}};jQ.fbp=function(){E.hE(this.eaw)};jQ.fbI=function(){J.br(location.dwr,"UAppBean","clearUappTip2",this.fbo.bHk(this))};jQ.fbo=function(){E.hE(this.eaB)};jQ.byE=function(bHm){this.duH(false)};jQ.byO=function(){if(loft.c.cm.isFromMobile=="1"){var QK=document.cloneElement("div","g-hd2");QK.innerHTML='<div class="m-bkmbbtn"><a href="#">返回移动版</a>';document.body.insertAdjacentElement("afterBegin",QK);E.ba(document.body,"p-body9");V.bHp(QK,"click",this.byN.bHk(this))}};jQ.byN=function(){U.ir("NTES_LOFT_PCSTICK");U.ir("NTES_LOFT_PCSTICK",".lofter.com","/");location.reload()};jQ.QQ=function(bHm){V.bHs(bHm);var bHz=V.be(bHm,function(bHz){return bHz.tagName=="A"}),bl=bHz.parentNode.parentNode,qC=E.dE(bl),l=qC.length-1;for(;l--;qC[l].style.display="");var QH=qC[0].clientHeight;bl.style.height=(qC.length-1)*QH+"px";bHz.parentNode.style.display="none"}})();
(function(){var mA=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},byg=function(){var bHz=E.be("gtotop"),sv,Qs,bfP,HU;if(!bHz)return;V.bHp(bHz,"click",byf);Qs=function(){if(mA()>500){if(B.dh){bHz.style.top=document.documentElement.clientHeight+mA()-86+"px"}bHz.style.visibility="visible";bHz.style.filter="alpha(opacity=100)";bHz.style.opacity=1;if(!!HU)window.clearTimeout(HU)}else{bHz.style.filter="alpha(opacity=0)";bHz.style.opacity=0;HU=window.setTimeout(function(){bHz.style.visibility="hidden";delete HU}.bHk(this),300)}};bfP=function(){if(!!sv){window.clearTimeout(sv);delete sv}sv=window.setTimeout(Qs,100)};V.bHp(window,"scroll",B.dh?Qs:bfP)},byf=function(bHm){V.bHs(bHm);document.documentElement.scrollTop=document.body.scrollTop=0};byg()})();
(function(){var p=P("loft.w"),dux;p.edI=C();dux=p.edI.prototype;dux.bq=function(){V.bHp(document,"click",this.fbm)};dux.fbm=function(event){var targetElement=V.be(event,function(element){return E.cr(element,"j-track-event")});if(!!targetElement){var data=targetElement.getAttribute("data-log");if(typeof window["_gaq"]==="undefined")return;var logArray=data.split(",");logArray.unshift("_trackEvent");window["_gaq"].push(logArray);var href=targetElement.href;if(!href||href.indexOf("javascript")===0||targetElement.getAttribute("target")==="_blank"){return}V.bHs(event);setTimeout(function(){window.location.href=targetElement.href},200)}}})();
(function(){var p=P("loft.w"),vm,bIC;p.Ie=C();p.Ie.Qq=function(dN,eT,bHl){if(!bIC)bIC=new p.Ie(bHl);if(!!dN)bIC.Qq(dN,eT||0)};vm=p.Ie.prototype;vm.bq=function(bHl){bHl=bHl||O;this.Qo=[];this.bye(bHl);this.bgg=this.bgj();this.byd()};vm.bye=function(bHl){this.bgy=bHl.imgattr||"imgsrc";this.Qm=bHl.diff||0};vm.byd=function(){var sv,self=this;V.bHp(window,"scroll",bgF);V.bHp(window,"resize",function(){self.bgg=self.bgj();bgF(true)});function bgF(qF){if(sv)return;sv=setTimeout(function(){self.bgG(qF);sv=null},100)}};vm.bgG=function(qF){var kj=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;if(!qF&&kj<=this.Qm)return;var dN=this.Qo,byc=this.bgg+kj,i,eJ,In;for(i=0;eJ=dN[i++];){var byb=eJ.dataoffset||E.jO(eJ);if(byb<=byc){In=eJ.getAttribute(this.bgy);if(In&&eJ.src!=In){eJ.src=In;eJ.removeAttribute(this.bgy);dN.splice(--i,1)}}}};vm.bgj=function(){var bgS=document.documentElement.clientHeight;if(this.Qm===0)return 2*bgS;else return this.Qm+bgS};vm.Qq=function(dN,eT){if(!!dN.length){for(var i=0,l=dN.length;i<l;this.Qo.push(dN[i]),dN[i].dataoffset=eT,i++);}else{this.Qo.push(dN);dN.dataoffset=eT}this.bgG(true)}})();
(function(){var p=P("loft.d"),yX;p.vz=C();yX=p.vz.bi(P(N.fw).bOI);yX.yY=function(bIi,dup){dup=dup||(loft.c.bPp||O).targetBlogId||0;J.br(location.dwr,"UserBean","addBlacklist",bIi||"",dup,this.bh.bHk(this,"onaddblacklist"))};yX.bxZ=function(bt){J.br(location.dwr,"UserBean","removeBlacklist",bt||0,this.bh.bHk(this,"onremoveblacklist",bt))};yX.duo=function(bHx,fbe){J.br(location.dwr,"UserBean","removeFollower",bHx||0,fbe||0,this.bh.bHk(this,"onremovefollowed"))};yX.bFQ=function(dx,ci){J.br(location.dwr,"UserBean","getBlacklistUserList",dx,ci,this.bh.bHk(this,"onloadblacklist"))};yX.pQ=function(bHl,ca){ca(bHl.allcount)};yX.kB=function(bHl,ca){J.br(location.dwr,"UserBean","getBlacklistUserList",bHl.limit,bHl.offset,ca)}})();
(function(){window.NRUM=window.NRUM||{};window.NRUM.config={key:"6395fcbb4ed7431ebd980bfa042a6dca",clientStart:+(new Date)};window.setTimeout(function(){new(P("loft.w").bas)},1e3);var bxW=function(){if(typeof screen.fontSmoothingEnabled!="undefined")return screen.fontSmoothingEnabled;try{var a=document.createElement("canvas");a.width="35",a.height="35",a.style.display="none",document.body.appendChild(a);var b=a.getContext("2d");b.textBaseline="top",b.font="32px Arial",b.fillStyle="black",b.strokeStyle="black",b.fillText("E",0,0);for(var c=8;c<=32;c++)for(var d=1;d<=32;d++){var e=b.getImageData(d,c,1,1).data,f=e[3];if(f!=255&&f!=0)return document.body.removeChild(a),true}return document.body.removeChild(a),false}catch(e){return null}},bxU=function(){var b=navigator.userAgent.indexOf("Windows NT 5.1")>-1,c=b?bxW():true,d=document.getElementsByTagName("html")[0];if(c==false)d.className+=" z-ff"};bxU();function test(){var fdQ="just for update!!!"}loft.x.fag("/src/css/retina/style.css");loft.x.fdt();if(window.isInDashboard||window.isInTagSearch){try{showAd()}catch(e){}}function showAd(){var bJ=P("loft.m.g");var cEC=E.be("sidebara4darea");if(!cEC)return;var dDI;bJ.cbGetSidebarA4d=function(bn){var bHo=E.bHr(cEC,"a4dtag");var bHq=0;var dDO=bHo[bHq++];var faZ=bHo[bHq++];var faY=bHo[bHq++];var fdR=bHo[bHq++];var bHn=bn[0];if(!bHn)return;dDI=bHn;if(!!bHn&&!!bHn.action_params&&!!bHn.action_params.link_url&&!!bHn.res_url&&!!bHn.res_url[0]){var dEg=bHn.action_params.link_url;var MH=bHn.res_url[0];faZ.src=loft.x.bKM(MH,226,226,true);dDO.href=dEg;faY.href=dEg;var crg=U.cA(16)+U.cA(16);dDO.onclick=function(){if(!!bHn.monitorList){faU(bHn.monitorList,crg)}else{if(!!bHn.monitorClickUrl){var bYh=bHn.monitorClickUrl;var bZH=(new Date).getTime();var dug=U.cA(16)+U.cA(16);bYh=bYh.replace("__TIME__",bZH);bYh=bYh.replace("__MEID__",crg);bYh=bYh.replace("__MCID__",dug);(new Image).src=bYh}}};cEC.style.display="block";if(!!bHn.monitorList){faT(bHn.monitorList,crg)}else{if(!!bHn.monitorShowUrl){var cgb=bHn.monitorShowUrl;var bZH=(new Date).getTime();cgb=cgb.replace("__TIME__",bZH);cgb=cgb.replace("__MEID__",crg);(new Image).src=cgb}}}else{cEC.style.display="none"}};bJ.closeSidebarA4d=function(bHm){V.bHs(bHm);if(!dDI)return;E.ba(cEC,"js-hide-sidebara4darea");window.setTimeout(function(){cEC.style.display="none"},500)};var faT=function(cuX,crg){if(!cuX)return;var bZH=(new Date).getTime();for(var i=0;i<cuX.length;i++){var bo=cuX[i];if(!!bo&&!!bo.monitorShowUrl){var cgb=bo.monitorShowUrl;cgb=cgb.replace("__TIME__",bZH);cgb=cgb.replace("__MEID__",crg);(new Image).src=cgb}}};var faU=function(cuX,crg){if(!cuX)return;var bZH=(new Date).getTime();var dug=U.cA(16)+U.cA(16);for(var i=0;i<cuX.length;i++){var bo=cuX[i];if(!!bo&&!!bo.monitorClickUrl){var bYh=bo.monitorClickUrl;bYh=bYh.replace("__TIME__",bZH);bYh=bYh.replace("__MEID__",crg);bYh=bYh.replace("__MCID__",dug);(new Image).src=bYh}}};var dEZ="//www.lofter.com/v1.1/yitou/madr?platform=pc&category=WEBHOMEPAGE&location=11001&timestamp="+(new Date).getTime()+"&app=6ED29071";var bHl={url:dEZ,method:"GET",sync:false,ctype:"application/x-www-from-urlencode; charset=utf-8",rtype:"json",onload:function(bHC){if(!!bHC&&!!bHC[0]&&!!bHC[0].ads){loft.m.g.cbGetSidebarA4d(bHC[0].ads)}}.bHk(this),onerror:function(){this.cX.style.display="block"}.bHk(this)};loft.x.bMV(dEZ,bHl)}(function(){var bp="//www.lofter.com/trade/reward/isOpen";var bHl={url:bp,method:"GET",sync:false,ctype:"application/x-www-from-urlencode; charset=utf-8",rtype:"json",onload:function(bHC){if(!!bHC&&bHC.code===200&&!!bHC.data&&bHC.data.status===1){var dFk=E.be("sidebaritem-wallet");if(!!dFk){dFk.style.display="block"}}if(!!bHC&&bHC.code===200&&!!bHC.data&&bHC.data.openReward===1){window.isRewardOpened=true}},onerror:function(){}};loft.x.bMV(bp,bHl)})();loft.x.dbA(function(payViewFlow){if(payViewFlow&&(payViewFlow.isAuth||payViewFlow.isSignedAuth||payViewFlow.isWhiteList)){var payForViewItem=E.be("sidebaritem-payforview");var payForViewItemUrl=E.be("sidebaritem-payforview-url");if(!!payForViewItem){payForViewItem.style.display="block";var localStorageKey="PayForViewShow"+P("loft.c").cm.mainBlogId;if(localStorage.getItem(localStorageKey)!=1){E.ba(payForViewItem,"j-show-new-flag")}V.bHp(payForViewItem,"click",function(e){if(localStorage.getItem(localStorageKey)!=1){localStorage.setItem(localStorageKey,1);E.bf(payForViewItem,"j-show-new-flag")}}.bHk(this));if(payViewFlow.applyStatus===-2&&payViewFlow.closedOver30Days){payForViewItemUrl.href="/front/pay-for-view/open/introduction"}else if(payViewFlow.applyStatus===-1){if(payViewFlow.isAuth&&(window.serverTime||new Date).getTime()-payViewFlow.rejectTime>36e5*24*30||payViewFlow.isSignedAuth){payForViewItemUrl.href="/front/pay-for-view/open/introduction"}}else if(payViewFlow.applyStatus===0){payForViewItemUrl.href="/front/pay-for-view/open/introduction"}}}});new(P("loft.w").edI)})();
(function(){var p=P("loft.m.newpublish.w");p.bJI=function(){var agent=navigator.userAgent.toLowerCase(),opera=window.opera,browser={ie:!!window.ActiveXObject,opera:!!opera&&opera.version,webkit:agent.indexOf(" applewebkit/")>-1,mac:agent.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"};browser.gecko=navigator.product=="Gecko"&&!browser.webkit&&!browser.opera;var version=0;var kernelVersion=0;if(browser.ie){version=parseFloat(agent.match(/msie (\d+)/)[1]);kernelVersion=version;if(version>=7){B.dh=false}}if(browser.gecko){var geckoRelease=agent.match(/rv:([\d\.]+)/);if(geckoRelease){geckoRelease=geckoRelease[1].split(".");version=parseFloat(geckoRelease);kernelVersion=geckoRelease[0]*1e4+(geckoRelease[1]||0)*100+(geckoRelease[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(agent)){browser.chrome=+RegExp["$1"];version=browser.chrome}if(/(\d+\.\d)?(\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(agent)&&!/chrome/i.test(agent)){browser.safari=+(RegExp["$1"]||RegExp["$3"]);try{version=parseFloat(RegExp["$1"])+parseFloat(RegExp["$2"])*.1}catch(e){version=browser.safari}}if(browser.opera){version=parseFloat(opera.version());kernelVersion=version}if(browser.webkit){kernelVersion=parseFloat(agent.match(/ applewebkit\/(\d+)/)[1])}browser.version=version;browser.kernelVersion=kernelVersion;if(browser.gecko&&browser.version>=11&&agent.indexOf(" .net")>-1&&agent.lastIndexOf("like gecko")>-1){browser.ie11plus=true;B.daA=true}return browser}();p.dGP=function(){var bp=location.href;var dGS=bp.indexOf("#");if(dGS>=0&&!!window.history&&!!window.history.replaceState){window.history.replaceState(null,"",bp.substring(0,dGS))}else{if(!!location.hash)location.hash=""}};p.faB=function(){var bp=location.href;var dHh=bp.indexOf("?");if(!!window.history&&!!window.history.replaceState){window.history.replaceState(null,"",bp.substring(0,dHh))}else{location.href=bp.substring(0,dHh)}};p.cEu=function(){var coX=E.be("publishPostBar");if(!coX)return;var bHo=coX.getElementsByTagName("li")||[];var bHq=1;var coZ=bHo[bHq++];var cpa=bHo[bHq++];var cpi=bHo[bHq++];var cpn=bHo[bHq++];var cpp;var cpq;var cpJ;var cpN;if(!!coZ)cpp=(coZ.getElementsByTagName("a")||[])[0];if(!!cpa)cpq=(cpa.getElementsByTagName("a")||[])[0];if(!!cpi)cpJ=(cpi.getElementsByTagName("a")||[])[0];if(!!cpn)cpN=(cpn.getElementsByTagName("a")||[])[0];var bIU=[cpp,cpq,cpJ,cpN];return bIU};p.faz=function(){if(window["__flash__removeCallback"])return;window["__flash__removeCallback"]=function(instance,name){try{if(instance){instance[name]=null}}catch(flashEx){}}};p.fdX=function(){if((p.bJI.ie||p.bJI.ie11plus)&&p.bJI.version>=10){window.setTimeout(function(){p.faz()}.bHk(this),1e3)}};p.bQV=function(){if(p.isAdvancedBrowser!==undefined&&!U.co(p.isAdvancedBrowser,"undefined"))return p.isAdvancedBrowser;var mN=true;try{var bJt=document.createElement("canvas");if(!bJt.toBlob){new Blob(["test"],{type:"text"})}else{var buf=new ArrayBuffer(10);var ui8a=new Uint8Array(buf,0)}var bOr=bJt.getContext("2d");var brG=new XMLHttpRequest;window.URL=window.URL||window.webkitURL;if(!bOr.drawImage||!bJt.toDataURL||!atob||!window.URL||!window.URL.createObjectURL||!brG.upload||!window.localStorage){mN=false}}catch(e){mN=false}if(p.bJI.chrome){if(p.bJI.version>=17)mN=true}else if(p.bJI.ie||p.bJI.ie11plus){if(p.bJI.version>=10&&document.documentMode>=10){mN=true}else{mN=false}}else if(p.bJI.safari){if(p.bJI.version>=4.04)mN=true}var bx="noAdvancedBrowser";var caH=365*100;if(!!mN){U.ru(bx,0,null,caH,"/")}else{U.ru(bx,1,null,caH,"/")}p.isAdvancedBrowser=mN;return p.isAdvancedBrowser};window.setTimeout(function(){p.bQV()}.bHk(this),2e5)})();
(function(){var p=P("loft.w.suggest"),cEq,bSI,cuP,eR,ML="skey_";p.dVq=C();cEq=p.dVq.bi(P(N.ut).hx);cEq.brm=function(bx,dx){if(bx==""||bx==undefined)return;var bS=this.et(ML+bx);if(!!bS){this.bh("onsearchsucc",bx,bS=="empty"?null:bS);return}J.br(location.dwr,"MentionBean","search",bx,30,this.hm.bHk(this,bx))};cEq.faa=function(){var bx="";var bS=this.et(ML+bx);if(!!bS){this.bh("onsearchsucc",bx,bS=="empty"?null:bS);return}J.br(location.dwr,"MentionBean","getLastMentions",this.hm.bHk(this,bx))};cEq.hm=function(bx,bS){if(!!bS){this.gp(ML+bx,bS)}else{this.gp(ML+bx,"empty")}this.bh("onsearchsucc",bx,bS)};cEq.cK=function(){this.iJ("onsearchsucc")};p.dtk=C();bSI=p.dtk.bi(P(N.ui).gB,true);bSI.cM=function(){return""};bSI.cU=function(){return"m-ssch2"};bSI.bz=function(bHl){bHl.option=p.dtj;this.crG=bHl.itemNum||6;this.fdZ=bHl.scrollPos||2;this.dau=bHl.iframeId;this.eZY=bHl.canBlurHide;if(!!this.dau){V.bHp(document.getElementById(this.dau).contentDocument,"click",this.dat)}p.dtk.bw.bz.call(this,bHl)};bSI.xW=function(bn,bHq){if(!bn||!bn.length){this.bOQ.style.height=0;this.bOQ.style.visibility="hidden";return}this.cT=this.SJ.bG(bn,this.fS,this.cP);for(var i=0;i<this.cT.length;i++){this.cT[i].bHt.className="atitm"}if(!!this.cT[bHq]){this.bC=0;this.cT[this.bC].gg(true)}this.bOQ.style.height=(this.cT.length>this.crG?this.crG:this.cT.length)*30+"px";this.cPS={scrollNode:this.bOQ,scrollList:this.fS,vSlideWayNode:this.bRU,hSlideWayNode:this.bVg,vSlideBtn:this.bRJ,hSlideBtn:this.cov,minBtnLength:this.crG,scrollType:"v",hasAnimateMove:true};if(!this.bTR){this.bTR=loft.w.cPL.bG(this.cPS)}else{if(this.cT.length<=this.crG){this.fS.style.minHeight=this.cT.length*30+"px"}this.bTR.bIh(this.cPS)}this.bOQ.style.visibility="visible";this.fS.style.visibility="visible"};bSI.bHM=function(){this.bHt=E.be("atinput");var bHo=E.bHr(this.bHt,"xtag"),i=0;this.dtg=bHo[i++];this.bU=bHo[i++];this.bOQ=bHo[i++];this.fS=bHo[i++];this.bRU=bHo[i++];this.bRJ=bHo[i++];this.bVg=bHo[i++];this.cov=bHo[i++];this.bQi=false;this.dat=this.eZX.bHk(this);this.eZW=this.mW.bHk(this);V.bHp(this.bHt,"click",V.bHs.bHk(V));V.bHp(this.bU,"click",V.bHs.bHk(V));V.bHp(document,"click",this.dat);V.bHp(this.dtg,"click",function(bHm){V.bHs(bHm);this.bU.focus()}.bHk(this));V.bHp(this.bU,"input",this.hu.bHk(this));V.bHp(this.bU,"focus",this.dX.bHk(this,true));V.bHp(this.bU,"blur",this.dX.bHk(this,false));V.bHp(this.bU,"keydown",this.eZW);if(!!B.dh)V.bHp(this.bU,"keypress",this.cRq.bHk(this));if(B.qi){V.bHp(this.bHt,"DOMMouseScroll",this.but.bHk(this))}else{V.bHp(this.bHt,"mousewheel",this.but.bHk(this))}this.dWr=true};bSI.but=function(bHm){if(!bHm||this.bRU.style.display==="none")return;V.bHs(bHm);var bRz;var ckl=1;if(!!bHm.wheelDelta&&!!this.bTR){if(bHm.wheelDelta>0){bRz={deltaTop:-ckl}}else{bRz={deltaTop:ckl}}}else if(!!bHm.detail){if(bHm.detail>0){bRz={deltaTop:ckl}}else{bRz={deltaTop:-ckl}}}if(!!bRz){this.bTR.ecK(bRz)}};bSI.eZX=function(bHm){if(this.bHt.style.visibility==="hidden")return;V.bHs(bHm);this.cEp();this.bh("onselect","atbodyclick")};bSI.dX=function(en,bHm){if(!!en){this.bQi=true;this.hu()}else{this.bQi=false;if(!!this.eZY){window.setTimeout(function(bHm){if(!!this.dWr){this.cEp();this.bh("onselect","atbodyclick")}}.bHk(this),300)}}};bSI.xS=function(){this.lN=false;V.iJ(document,"click",this.dat);if(!!this.dau){V.iJ(document.getElementById(this.dau).contentDocument,"click",this.dat)}V.bJL(this.bU)};var Oq=[38,40,13,27,8];bSI.mW=function(bHm){if(this.bHt.style.visibility!=="visible")return;var bHz=V.be(bHm);if(bHz===this.bU){var rB=bHm&&(bHm.which||bHm.keyCode),bHq=U.fO(Oq,rB);if(bHq==-1){return}switch(bHq){case 0:if(!!this.bQi&&this.fS.style.visibility==="visible"){V.bHs(bHm);this.pz(-1,bHm)}break;case 1:if(!!this.bQi&&this.fS.style.visibility==="visible"){V.bHs(bHm);this.pz(1,bHm)}break;case 2:if(!!this.bQi&&this.fS.style.visibility==="visible"){V.bHs(bHm);this.dtf=true;this.GQ(bHm)}break;case 3:if(!!this.bQi){V.bHs(bHm);this.cEp();this.bh("onselect","atbodyclick")}break;case 4:if(!!this.bQi&&U.bA(this.bU.value)===""){V.bHs(bHm);this.cEp();this.bh("onselect","atbodyclick")}break}}};bSI.cRq=function(bHm){var rB=bHm&&(bHm.which||bHm.keyCode);if(rB==13&&!!this.bQi){V.bHs(bHm);this.dtf=true;this.GQ(bHm)}if(rB==27&&!!this.bQi){V.bHs(bHm);this.cEp();this.bh("onselect","atbodyclick")}};bSI.hu=function(){var bg=U.bA(this.bU.value);if(bg===""){this.dtg.style.display=""}else{this.dtg.style.display="none"}this.he();this.bh("onchange",bg)};bSI.SK=function(bHn){var dWw=true;if(!!this.dtf){dWw=false;this.dtf=false}this.he();this.cEp();this.dWr=false;this.bh("onselect",bHn,dWw)};bSI.pz=function(fW){var dWx=this.bC+fW;if(this.cT.length>this.crG&&(dWx<0||dWx>=this.cT.length)){return}var bo=this.cT[this.bC],bHT=0-parseInt(this.fS.style.top.replace("px","")),cuZ=Math.floor(bHT/30),dWz=cuZ+this.crG-1,fe=this.cT.length,fea=[cuZ,dWz];if(fW===1&&this.bC===dWz&&this.bC!==fe-1){this.fS.style.top=0-(cuZ+1)*30+"px";this.bTR.dwb(cuZ+1,fe+10-this.crG)}else if(fW===-1&&this.bC===cuZ&&this.bC!==0){this.fS.style.top=0-(cuZ-1)*30+"px";this.bTR.dwb(cuZ-1,fe+10-this.crG)}if(!!bo)bo.gg(false);this.bC=(this.bC+fW)%this.cT.length;if(this.bC<0)this.bC=this.cT.length-1;var bo=this.cT[this.bC];if(!!bo)bo.gg(true,2)};bSI.bgH=function(bHq){return};bSI.he=function(MN){this.fS.style.visibility="hidden";this.cT=this.SJ.bHV(this.cT)};bSI.cEp=function(){this.bRU.style.display="none";this.fS.style.minHeight=0};p.dtj=C();cuP=p.dtj.bi(P(N.ut).bJj,true);var Di=E.gD('<span class="atitm"><span class="w-img2"><img class="utag" src="//l.bst.126.net/rsc/img/ava/30.png"></span><span class="name f-thide utag">名称</span></span>');cuP.bq=function(){this.bHB(Di);var bHo=E.bHr(this.bHt,"utag");this.IF=bHo[0];this.fz=bHo[1];V.bHp(this.bHt,"click",this.rF.bHk(this));E.fy(this.bHt,"c-hover",true)};cuP.ce=function(bHn){p.dtj.bw.ce.call(this,bHn);this.gg(false);this.IF.src=bHn.avator||"http://l.bst.126.net/rsc/img/ava/30.png";this.fz.innerHTML=U.ew(bHn.nickName);this.bHy=bHn};cuP.bIh=function(bHl){this.bHp("onclick",bHl.onclick||F)};cuP.rF=function(bHm){V.bHs(bHm);this.bh("onclick",this.bHy)};cuP.gg=function(hU,pN){hU?E.ba(this.bHt,"j-hover"):E.bf(this.bHt,"j-hover")};cuP.cF=function(){return this.bHy}})();
(function(){var p=P("loft.w"),cEq,bVu,bSI,ceK='<div class="inputNode"><label class="xtag">想用@提到谁？</label><input id="atinputb" class="input xtag"></div><div class="scrollNode xtag" style="height: 60px; visibility: hidden;"><div class="result xtag" style="visibility: hidden; position: absolute; min-width: 167px; min-height: 0px; top: 0px;"></div><div class="vSlideWayNode xtag" style="visibility: hidden; display: none; height: 180px; width: 6px;"><div hidefocus="true" class="vSlideBtn xtag" style="top: 0px; left: 0px;">&nbsp;</div></div><div class="hSlideWayNode xtag" style="visibility: hidden; display: block; width: 173px; height: 17px;"><div hidefocus="true" class="hSlideBtn xtag">&nbsp;</div></div></div><div id="atshadow" class="shadow"></div>';p.ceJ=C();bVu=p.ceJ.bi(P(N.ut).gY);bVu.bq=function(bl,bHl){var bHl=bHl||{};this.gF=bHl;this.gF.linkColorClass="s-fc2";this.xI=window;if(!!bHl.iframeId){this.xI=document.getElementById(bHl.iframeId).contentWindow}var feb=loft||this.xI.loft,eZT=!!loft.g?!!loft.g.noAt:false;if(eZT===true){return}this.cjm=bHl.textBody;if(!!bHl.isInLayer){this.das=bHl.isInLayer;E.hE(E.be("atinput"));this.dWR=E.be(bHl.layerId);this.bXp=document.createElement("a");this.bXp.className="m-at";this.bXp.id="atinput";this.bXp.innerHTML=ceK;this.dWR.appendChild(this.bXp)}else{this.bXp=E.be("atinput")}this.bro=new loft.w.suggest.dVq({onsearchsucc:this.brn.bHk(this)});this.eH=loft.w.suggest.dtk.bG(bl,{canBlurHide:bHl.canBlurHide||true,scrollPos:bHl.scrollPos||2,itemNum:bHl.itemNum,iframeId:bHl.iframeId||"",onselect:this.qu.bHk(this),onchange:this.hu.bHk(this),onenter:this.SI.bHk(this)});this.dXc=navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/)?true:false;this.eZS(bHl)};bVu.fed=function(){var bMb=this.xI.getSelection?this.xI.getSelection():document.selection,hy=bMb.createRange?bMb.createRange():bMb.getRangeAt(0),dXz=true,dwN=this.xI.getSelection?bMb.anchorNode.parentNode.tagName.toUpperCase():hy.parentElement().nodeName.toUpperCase();if(dwN==="A"){dXz=false}return dXz};bVu.eZS=function(bHl){this.dXI=this.eZQ(this.cjm);this.eZP();this.bSd=E.bHr(this.cjm,"test")[0];if(!!this.das){var ci=this.eZO(this.bSd,this.dWR),cN=!!this.daq?10:22,cvM=ci.top,cvR=ci.left+cN}else{this.fl=this.YL(this.bSd);var cN=!!this.daq?10:22,dsY={top:0,left:0},cvR,cvM;if(!!bHl.iframeId){dsY=this.YL(document.getElementById(bHl.iframeId));if(this.fl.scrollTop>0){this.fl.top=this.fl.top-this.fl.scrollTop}}cvM=this.fl.top+dsY.top;cvR=this.fl.left+dsY.left+cN;if(!!this.gF.canAutoSetInputPos){var by=0,fee={top:cvM,left:cvR},dYE={top:cvM+175,left:cvR+30*this.gF.itemNum},dYF={width:document.body.offsetWidth,height:document.body.offsetHeight};if(dYE.left>dYF.width){by=by+1;cvR=cvR-2*cN-170}if(dYE.top>dYF.height){by=by+2;cvM=cvM}}}E.be("atshadow").style.display=!!bHl.isSdHide?"none":"";this.bXp.style.top=cvM+"px";this.bXp.style.left=cvR+"px";this.bXp.style.visibility="visible";E.be("atinputb").focus();this.dYG=this.eZM.bHk(this)};bVu.eZM=function(bHm){if(!this.bSd)return;var rB=bHm&&(bHm.which||bHm.keyCode);if(rB===8){window.setTimeout(function(){if(this.bSd.innerText.length===this.eZL.length-1){if(!!this.dXc){this.cjm.focus();var selection=this.xI.getSelection?this.xI.getSelection():document.selection;var range=selection.createRange?selection.createRange():selection.getRangeAt(0);if(!!this.csp){range.setEndAfter(this.csp);range.setStartAfter(this.csp);selection.removeAllRanges();selection.addRange(range)}}E.hE(this.bSd);if(!B.da){this.cwl.nodeValue=this.cwl.nodeValue.replace(/^\s/,"");if(!this.dXc){this.csp.nodeValue=this.csp.nodeValue.replace(/\s$/,"")}}if(B.qi&&this.cjm.innerHTML===""){this.cjm.innerHTML=" "}V.iJ(this.cjm,"keydown",this.dYG);this.bSd=null;this.gF.cbDelTag()}}.bHk(this),40)}this.eZL=this.bSd.innerText};bVu.SI=function(){return};bVu.hu=function(bg){if(loft.c.cm.userId<=0)return;this.eH.xW([],0);if(bg===""){window.setTimeout(function(){this.bro.faa()}.bHk(this),100)}else{window.setTimeout(function(){this.bro.brm(bg,10)}.bHk(this),100)}};bVu.brn=function(bx,bn){var bg=U.bA(this.eH.cF());if(!!bn&&!!bn.length&&bx===bg){var bu=[],i=0,l=bn.length;this.eH.he();this.eH.xW(bn,0)}else if(bx===bg){this.eH.he();this.eH.xW([],0)}};bVu.qu=function(bHn,fW){if(this.bXp.style.visibility==="hidden"||!this.bXp){return}if(bHn==="atbodyclick"){if(!this.bSd){this.bSd=E.bHr(this.cjm,"test")[0]}E.hE(this.bSd);if(!!this.cwl&&!!this.csp){this.cwl.nodeValue="@";this.csp.nodeValue=""}this.bSd=null;this.dZc(false)}else{this.bHy=bHn;if(!!this.daq){this.daq.text=""}this.bSd.href="http://www.lofter.com/mentionredirect.do?blogId="+bHn.blogId;this.bSd.innerHTML="@"+U.ew(bHn.nickName);this.bSd.setAttribute("loftermentionblogId",bHn.blogId+"");this.bSd.target="_blank";V.bHp(this.cjm,"keydown",this.dYG);this.dZc(fW)}};bVu.dZc=function(fW){E.bf(this.bSd,"test");this.gF.cbDelTag();this.bXp.children[1].style.visibility="hidden";this.bXp.style.visibility="hidden";this.bXp.style.top="-150px";this.bXp.style.left="-150px";E.be("atinputb").value="";this.eZK(fW);this.bro.cK();this.eH.cK();if(this.das){E.hE(this.bXp)}};bVu.eZK=function(fW){this.cjm.focus();var selection=this.xI.getSelection?this.xI.getSelection():document.selection;var range=selection.createRange?selection.createRange():selection.getRangeAt(0);if(!!this.cwl&&!!this.csp){range.setEndAfter(this.cwl);range.setStartAfter(this.cwl);selection.removeAllRanges();selection.addRange(range)}else{if(!fW||B.Ud==="8.0"){var cfJ=this.dXI.index;if(!!this.bSd){cfJ=cfJ+this.bSd.innerText.length}range.moveStart("character",cfJ);range.select()}else{range.collapse(false);var cfJ=0-this.dXI.last;range.moveStart("character",cfJ);range.moveEnd("character",cfJ);range.select()}}};bVu.fef=function(){if(!!this.bSd&&!!this.bHy.blogId){}};bVu.YL=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement;var clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+(self.pageYOffset||docElem.scrollTop)-clientTop,left=box.left+(self.pageXOffset||docElem.scrollLeft)-clientLeft;return{left:left,top:top,right:left+box.width,bottom:top+box.height,scrollTop:self.pageYOffset||docElem.scrollTop}};bVu.eZO=function(elem,pelem){var box=elem.getBoundingClientRect(),pbox=pelem.getBoundingClientRect();return{left:box.left-pbox.left,top:box.top-pbox.top}};bVu.eZQ=function(element){var bHq=0,cEm,cfJ=0;if(document.selection){element.focus();cEm=document.selection.createRange();cEm.moveStart("character",-element.innerText.length);var jd=cEm.text;for(var i=0;i<element.innerText.length;i++){if(element.innerText.substring(0,i+1)==jd.substring(jd.length-i-1,jd.length)){bHq=i+1}}cfJ=element.innerText.length-bHq}else{var bMb=this.xI.getSelection(),eZI=bMb.anchorNode.parentNode.tagName,bfd=bMb.anchorOffset,csr=bMb.anchorNode.parentNode.previousSibling,tM="";if(eZI==element.tagName){while(csr!=null){tM+=csr.textContent;csr=csr.previousSibling;bHq=tM.trim().length+bfd}}else{while(csr!=null){tM+=csr.textContent;csr=csr.previousSibling}bHq=tM.trim().length+bfd}this.feg=this.xI.getSelection().baseNode}return{index:bHq,last:cfJ}};bVu.eZP=function(){this.cjm.focus();var bMb=this.xI.getSelection?this.xI.getSelection():document.selection;var hy=bMb.createRange?bMb.createRange():bMb.getRangeAt(0);if(!this.xI.getSelection){var eZG=!!this.gF.linkColorClass?'<a href="#" class="test f-atbox '+this.gF.linkColorClass+'">&nbsp;</a>&nbsp;':'<a href="#" class="test f-atbox">&nbsp;</a>&nbsp;';var cEm=bMb.createRange();cEm.moveStart("character",-1);this.daq=cEm;hy.pasteHTML(eZG);hy.collapse(false);hy.select()}else{var cEk,cPK;var dZC=!!this.gF.linkColorClass?'&nbsp;<a href="#" class="test f-atbox '+this.gF.linkColorClass+'">@</a>&nbsp;':'&nbsp;<a href="#" class="test f-atbox">@</a>&nbsp;';if(!!hy.createContextualFragment){cEk=hy.createContextualFragment(dZC)}else{var dZE=document.createElement("div");cEk=document.createDocumentFragment();cEk.appendChild(dZE);dZE.outerHTML=dZC}cPK=cEk.lastChild;this.cwl=cPK;this.csp=cEk.firstChild;hy.insertNode(cEk);bMb.anchorNode.nodeValue=bMb.anchorNode.nodeValue.replace(/@$/,"");if(cPK){hy.setEndAfter(cPK);hy.setStartAfter(cPK)}bMb.removeAllRanges();bMb.addRange(hy)}};bVu.bE=F})();
(function(){var p=P("loft.m.comment"),eN=50,iP,iy;p.bcM=C();iy=p.bcM.bi(P("loft.w").cV,true);iy.bq=function(){this.bHB();if(!loft.c.cm.userId){if(!!this.bHu.tpUserId){loft.c.cm.userId=this.bHu.tpUserId-0}}this.eeC=this.bHu.needFocusComment;this.dzh=loft.c.cm.isEditor||false;this.bv=new p.hx;this.bv.bHp("onaddcmt",this.OG.bHk(this));this.bv.bHp("ondelcmt",this.OF.bHk(this));this.dK();this.mK="id";this.dq={opage:{pcase:this.eS,index:1,type:1},oitem:{icase:this.LD,postType:this.bHu.postType},ocache:{number:eN,lazy:false,hkey:this.mK,pid:this.bHu.pid||0,allcount:this.bHu.cmtCount||0},onempty:this.lr.bHk(this),onafterchange:this.Hy.bHk(this)};this.cP={postType:this.bHu.postType,isedit:this.bHu.isedit||0,onreply:this.lJ.bHk(this),ondelete:this.pV.bHk(this)};if(!!this.dzh){this.cP.isedit=1}this.dw={pid:this.bHu.pid||0,limit:eN,offset:0};this.iT();U.ru("regtoken",2e3,".lofter.com",.1,"/")};iy.iT=function(){if(!!this.cpC)return;this.cQ.style.display="";this.bv.kB(this.dw,this.OI.bHk(this))};iy.OI=function(bS){var LC=!!this.bHu.cancomment&&!!loft.c.cm.userId;this.bcR.style.display=LC?"":"none";this.LB.style.display=LC?"none":"";this.cP.hasRight=LC;this.cQ.style.display="none";if(!bS||!bS.length){this.lr();this.cpC=true}else{this.dw.offset+=bS.length;var bS=p.kD.bG(bS,this.LD,this.cP);if(!!this.cB){this.cB=this.cB.concat(bS)}else{this.cB=bS}if(bS.length<eN||this.cB.length>=this.bHu.cmtCount){this.cpC=true}}this.pj.parentNode.parentNode.style.display=!!this.cpC?"none":"";this.Hy()};iy.bpX=function(bHn){this.cP.before=true;var bo=p.kD.bG(bHn,this.LD,this.cP);if(!this.cB)this.cB=[];this.cB.unshift(bo);this.cP.before=false;this.bJx=""};iy.uQ=function(bt){var bHq=U.fO(this.cB,function(bo){return bo.hY().id==bt});if(bHq!=-1){var bo=this.cB.splice(bHq,1);p.kD.bHV(bo)}};iy.lJ=function(eeB,Oz,Bs,gR){this.Ow=Bs||"";this.Bw=gR||"";this.cdK=Oz||0;this.ctW=eeB||0;loft.x.dEN(this.qa,"回复 "+gR+"：");this.bJx=this.qa.innerText};iy.lr=function(bHn){};iy.dK=function(){var bHo=E.bHr(document.body,"ztag"),i=0;this.LB=bHo[i++];this.qa=bHo[i++];this.ep=bHo[i++];this.cX=bHo[i++];this.LD=bHo[i++];this.cQ=bHo[i++];this.pj=bHo[i++];this.bcR=this.cX.parentNode.parentNode;loft.x.AL(this.qa,this.bLu.bHk(this));V.bHp(this.qa,"mousedown",this.eeA.bHk(this));V.bHp(this.qa,"keyup",this.cdQ.bHk(this));V.bHp(this.cX,"click",this.bLu.bHk(this));V.bHp(this.pj,"click",this.bpW.bHk(this));if(!loft.c.cm.userId){this.LB.innerHTML='<div class="bcmtlogin">'+'\t<div class="f-fl s-fc0"><a href="" class="infolink ttag" target="_top" onclick="window[\'_gaq\'].push([\'_trackEvent\', \'个人主页相关文章模块\', \'评论区登录注册LOFTER链接点击\']);">登录/注册LOFTER&nbsp;</a>开始评论</div>'+'    <div class="w-wb">'+'    \t<span class="f-fl s-fc0">|&nbsp;&nbsp;其他方式登录</span>'+'        <a href="#" title="新浪微博" class="infolink ttag" onclick="window[\'_gaq\'].push([\'_trackEvent\', \'个人主页相关文章模块\', \'评论区新浪微博登录\']);"><em class="wb1" title="新浪微博">新浪微博</em>新浪微博</a>'+'        <a href="#" title="腾讯QQ" class="infolink ttag" onclick="window[\'_gaq\'].push([\'_trackEvent\', \'个人主页相关文章模块\', \'评论区QQ登录\']);"><em class="wb2" title="腾讯QQ">腾讯QQ</em>腾讯QQ</a>'+"    </div>"+"</div>";var bHo=E.bHr(document.body,"ttag");V.bHp(bHo[0],"click",this.cKw.bHk(this));V.bHp(bHo[1],"click",this.Qz.bHk(this,"Sina"));V.bHp(bHo[2],"click",this.Qz.bHk(this,"QQ"))}else{this.LB.innerHTML="由于该用户的权限设置，您暂时无法进行评论..."}if(!!this.bHu.isReblog)E.ba(this.bcR,"bcmtadd-tbu");this.bJx="";this.bVP=[];if(!loft.x.dbi()){V.bHp(this.qa,"keydown",this.cfv.bHk(this));V.bHp(this.qa,"paste",this.chE.bHk(this))}window.onload=function(){window.parent.postMessage(document.body.clientHeight,"*")}};iy.cfv=function(bHm){if(!bHm)return;var bJy=bHm.which||bHm.keyCode;if(bHm.ctrlKey&&(bJy==86||bJy==118)){V.bHs(bHm);return}};iy.chE=function(bHm){V.bHs(bHm);return};iy.cKw=function(bHm){V.bHs(bHm);var lL=document.createElement("iframe");lL.width=0;lL.height=0;lL.style.display="none";document.body.appendChild(lL);lL.src=location.protocol+"//"+this.bHu.blogname+".lofter.com/html/reglogin/regloginproxy.html#operate=open"};iy.eeA=function(bHm){if(!!this.eez)return;this.eez=true;var eT=this.bpT();eT+=70;this.Hy(eT,"firstclick");this.qa.style.height="130px";this.qa.focus();window.parent.postMessage(document.body.clientHeight+70,"*");window.setTimeout(function(){this.qa.focus()}.bHk(this),500)};iy.cdQ=function(bHm){var rB=bHm&&(bHm.which||bHm.keyCode);if(rB==86){var ck=this.qa.children,l=ck.length;if(l==0){this.bJx=this.qa.innerText;return}for(var i=l-1;i>-1;i--){if(ck[i].tagName==="A"&&!!E.cr(ck[i],"f-atbox")&&ck[i].innerText.indexOf("@")>=0){if(ck[i].children.length>0){ck[i].innerHTML=ck[i].innerText}continue}else{ck[i].outerHTML=ck[i].innerText}}}else if(rB!==86&&this.qa.innerText.split("@").length===this.bJx.split("@").length+1){if(!!loft.x.ciX()||loft.c.cm.userId<=0){this.bJx=this.qa.innerText;return}V.bHs(bHm);var bVr=new loft.w.ceJ(null,{textBody:this.qa,itemNum:4,isSdHide:true,scrollPos:3,canBlurHide:true,linkColorClass:"s-fc2",canAutoSetInputPos:true,cbDelTag:this.bSz.bHk(this)});this.bVP.push(bVr)}this.bJx=this.qa.innerText};iy.bSz=function(){this.bJx=this.qa.innerText};iy.Qz=function(by,bHm){V.bHs(bHm);var bjK=by+"SiteBean";var kC="getConnectLoginAuthorUrl";if(by=="Sina"){kC="getConnectLoginOauth2AuthorUrl"}var eF="https://"+this.bHu.blogname+".lofter.com/post/"+this.bHu.permalink;window.setTimeout(function(){J.br(location.dwr,bjK,kC,eF,false,function(bu){if(!!bu){top.location=bu}}.bHk(this))}.bHk(this),500)};iy.bpW=function(bHm){V.bHs(bHm);this.iT()};iy.hR=function(fU){if(!!this.LA)this.LA=window.clearTimeout(this.LA);this.ep.innerText=fU;this.ep.style.display="";this.LA=window.setTimeout(function(){this.ep.style.display="none"}.bHk(this),3e3)};iy.bLu=function(){if(!!P("loft.m.comment.g").isVerifyPhone){this.cHR()}else{if(this.dca)return;this.dca=true;window.doSubmit4PhoneVerify=this.cHR.bHk(this);var url="/bindPhoneAccount.do ";var opt={url:url,method:"POST",sync:true,rtype:"json",data:"op=getBind",onload:function(data){if(data&&data.meta&&data.meta.status==200){var verifyPhone=data.response&&(data.response.verifyPhone||data.response.bindPhone);if(!verifyPhone){this.dca=false;window.open("//www.lofter.com/bindPhoneAccount.do?op=verifyPage","")}else{P("loft.m.comment.g").isVerifyPhone=true;this.dca=false;this.cHR()}}}.bHk(this),onerror:function(err){this.dca=false}.bHk(this)};P("loft.x").bMV(url,opt)}};iy.cHR=function(){if(!!window.isForbidUser){this.hR("由于权限设置，您暂时无法进行该操作");return}var bg="",ebL=U.bA(this.qa.innerText);if(B.da||B.daA){bg=U.bA(loft.x.dFo(this.qa,true))}else{bg=U.bA(this.qa.innerHTML.replace(/<\/div>/ig,"").replace(/<div>(<[\/]?\s*br>)?/ig,"<br>").replace(/^(<br>)*/ig,"").replace(/(<br>)*$/ig,""))}if(!!this.cdK){var tI=U.ew("回复 "+this.Bw+"：");if(bg.indexOf(tI)!=0){this.cdK=0;this.ctW=0}else{bg=bg.replace(tI,"")}}if(!ebL){this.hR("请输入评论内容");this.qa.focus();return}if(ebL.length>400){this.hR("评论内容不超过400个字");this.qa.focus();return}this.cX.innerText="发布中...";this.qa.disabled=this.cX.disabled=true;this.bv.Ao(bg,this.bHu.pid,this.bHu.bid,this.ctW,this.cdK,false);var bIu={scene:"UNKNOW",itemId:this.bHu.permalink,itemType:"ARTICLE",rating:3,text:"",cost:"",progress:"",algInfo:"",recId:""};loft.x.bKi(bIu)};iy.OG=function(bHn){this.cX.innerText="发布";this.qa.disabled=this.cX.disabled=false;if(!!bHn){if(bHn.id==-10){this.hR("对不起，您没有权限发表评论。")}else if(bHn.id==-11){this.hR("对不起，由于用户设置，您没有权限发表评论")}else if(bHn.id==-15){this.hR("该文章已删除，不能回复评论！")}else if(bHn.id==-16){this.hR("该评论已删除，不能回复评论！")}else if(bHn.id==-17){E.bHw("每次最多允许@60个人！")}else if(bHn.id==-100){this.hR("您发布得太快了，请休息一下。")}else if(bHn.id==-199){this.hR("您提交的内容中含敏感词！")}else{this.qa.innerHTML="";if(!!bHn.replyToUserId){bHn.replyBlogInfo={blogId:this.cdK,blogName:this.Ow,blogNickName:this.Bw}}this.bpX(bHn);this.Hy();window.parent.postMessage(this.cX.parentNode.parentNode.parentNode.parentNode.clientHeight,"*")}}};iy.pV=function(sT){if(!window.confirm("确定删除该评论吗？"))return;this.bv.Pm(sT,this.bHu.pid,this.bHu.bid)};iy.OF=function(sT){if(!!sT){this.uQ(sT);this.Hy()}};iy.Hy=function(eT,by){var lL=document.cloneElement("iframe");eT=eT||this.bpT();lL.width=0;lL.height=0;lL.style.display="none";var bp=this.bHu.blogLink.replace(/^(http[s]{0,1}:\/\/)/,location.protocol+"//")+"/cmtheightproxy.html#height="+eT;if(!!by){bp+="&"+by}document.body.appendChild(lL);lL.src=bp;if(!!this.eeC){this.qa.focus()}};iy.bpT=function(){return document.body.offsetHeight};p.hx=C();kE=p.hx.bi(P(N.fw).bOI);kE.pQ=function(bHl,ca){ca(bHl.allcount)};kE.kB=function(bHl,ca){J.br(location.dwr,"PostBean","getPostResponses",bHl.pid,bHl.limit,bHl.offset,ca)};kE.Ao=function(bHA,bJp,dA,cck,rs,rq){var Po={postId:bJp,blogId:dA,content:bHA,replyToUserId:rs||0,replyToResponseId:cck||0};var needSynch=false;J.br(location.dwr,"PostBean","addPostResponse",Po,!!rq,needSynch,false,this.bh.bHk(this,"onaddcmt"))};kE.Pm=function(sT,dR,bHx){window.parent.postMessage(document.body.clientHeight,"*");if(!!loft.c.cm&&loft.c.cm.isEditor){J.br(location.dwr,"PostBean","removePostResponse4Editor",sT,dR,bHx,false,this.bh.bHk(this,"ondelcmt"))}else{J.br(location.dwr,"PostBean","removePostResponse",sT,dR,bHx,false,this.bh.bHk(this,"ondelcmt"))}};p.kD=C();iP=p.kD.bi(P(N.ut).bJj,true);iP.bq=function(){this.bHB("ntp-comment-0");var bHo=E.bHr(this.bHt,"itag"),i=0;this.bD=bHo[i++];this.hJ=bHo[i++];this.BQ=bHo[i++];this.Lz=bHo[i++];this.dg=bHo[i++];this.vq=bHo[i++];this.HF=bHo[i++];this.uU=bHo[i++];if(!!loft.c.cm.userId){V.bHp(this.bHt,"mouseover",this.Du.bHk(this,true));V.bHp(this.bHt,"mouseout",this.Du.bHk(this,false));V.bHp(this.uU,"click",this.lJ.bHk(this));V.bHp(this.HF,"click",this.pV.bHk(this))}else{this.uU.style.visibility="hidden"}};iP.bIh=function(bHl){bHl=bHl||O;this.bGz=bHl.postType;this.BR=!!bHl.before;this.lm=!!bHl.isedit;this.bpR=!!bHl.hasRight;this.bHp("onreply",bHl.onreply||F);this.bHp("ondelete",bHl.ondelete||F);if(!this.bpR)this.uU.style.display="none"};iP.ce=function(bHn){bHn=bHn||{};p.kD.bw.ce.call(this,bHn);var du=bHn.publisherMainBlogInfo;this.lm=!!this.lm||loft.c.cm.userId===du.blogId;this.bD.src=loft.x.eK(du.bigAvaImg);this.hJ.innerText=du.blogNickName||"";if(du.blogId<0){if(!!du.blogName){this.bD.parentNode.href=this.hJ.href=du.blogName;this.bD.parentNode.target=this.hJ.target="_blank"}else{this.bD.parentNode.removeAttribute("href");this.hJ.removeAttribute("href");this.bD.parentNode.style.cursor="default";this.hJ.style.cursor="default";this.hJ.style.textDecoration="none"}}else{this.bD.parentNode.href=this.hJ.href=loft.x.bM(du.blogName)}var title=loft.x.AD(du.blogNickName,20,true)+" - "+loft.x.qB(bHn.publishTime);this.hJ.title=title;this.bD.parentNode.title=title;if(!!bHn.replyBlogInfo){this.Lz.innerText=bHn.replyBlogInfo.blogNickName||"";if(bHn.replyBlogInfo.blogId<0){if(!!bHn.replyBlogInfo.blogName){this.Lz.href=bHn.replyBlogInfo.blogName;this.Lz.target="_blank"}else{this.Lz.removeAttribute("href");this.Lz.style.cursor="default";this.Lz.style.textDecoration="none"}}else{this.Lz.href=loft.x.bM(bHn.replyBlogInfo.blogName)}this.BQ.style.display="";E.bf(this.hJ,"bcmtlstk");E.ba(this.Lz,"bcmtlstk")}else{this.BQ.style.display="none";E.ba(this.hJ,"bcmtlstk")}this.dg.innerHTML=bHn.content||"";this.dsq();this.vq.href=loft.x.bM()+"/blacklist?u="+du.blogName;if(!this.lm){this.HF.style.display="none"}else{this.HF.style.display=""}if(bHn.publisherUserId==-90){this.uU.style.display="none"}};iP.dsq=function(){var bVH=this.dg.getElementsByTagName("a"),i=0,l=bVH.length;for(;i<l;i++){if(!!bVH[i].getAttribute("loftermentionblogId")){bVH[i].target="_blank"}}};iP.fs=function(bl){p.kD.bw.fs.call(this,bl,this.BR)};iP.Du=function(gu){if(loft.c.cm.userId<0||this.hY().publisherUserId<0||this.hY().publisherUserId==loft.c.cm.userId){this.vq.style.visibility="hidden"}else{this.vq.style.visibility=!!gu?"visible":"hidden"}if(!!this.lm){this.HF.style.visibility=!!gu?"visible":"hidden"}};iP.lJ=function(bHm){V.bHs(bHm);var du=this.bHy.publisherMainBlogInfo||O;this.bh("onreply",this.bHy.id,du.blogId,du.blogName,du.blogNickName)};iP.pV=function(bHm){V.bHs(bHm);if(!this.lm)return;this.bh("ondelete",this.bHy.id)};new p.bcM})()