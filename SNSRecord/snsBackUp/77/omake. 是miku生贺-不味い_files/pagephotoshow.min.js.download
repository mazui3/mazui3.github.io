(function(){window.define=function(j,f,e){e()}})();define("{lib}base/global.js",[],function(){var j={},f=function(){this._$super.apply(this,arguments)},e=function(d,b){if(d&&U._$isType(d,"function")&&U._$isType(this,"function")){if(b)for(var c in d)U._$isType(d[c],"function")&&(this[c]=d[c]);this._$super=d;this._$supro=d.prototype;this.prototype=new d(j);this.prototype.constructor=this;this.prototype._$initialize=f;var g=d;this.prototype._$super=function(){var b=g.prototype._$initialize;g=g._$super||d;return!!b&&b.apply(this,arguments)};return this.prototype}},
l=function(){for(var d=this.prototype,b=0,c=arguments.length,g;b<c;b++)if(g=arguments[b],U._$isType(g,"function")){g=g.prototype;for(var e in g)U._$isType(g[e],"function")&&(d[e]=g[e])}return d},i=function(){var d=this,b=arguments,c=Array.prototype.shift.call(arguments);return function(){Array.prototype.push.apply(arguments,b);return d.apply(c||window,arguments)}};window.O={};window.F=function(){return!1};window.P=function(d){if(!d||!d.length)return null;for(var b=window,d=d.split("."),c=d.length,
g="window"==d[0]?1:0;g<c;b=b[d[g]]=b[d[g]]||{},g++);return b};window.C=function(){var d=function(){if(arguments[0]!=j&&this._$initialize)return this._$initialize.apply(this,arguments)};d._$extend=e;d._$implement=l;return d};Function.prototype._$bind=function(){var d=arguments,b=arguments[0],c=this;return function(){var g=[].slice.call(d,1);[].push.apply(g,arguments);return c.apply(b||window,g)}};Function.prototype._$bind2=i;Function.prototype._$bindAsEventListener=i;i=P("N");i.rc=i.rc||{};i.xd=i.xd||
[];i.tm=i.tm||O;i.ui=i.ui||"ntes.ui";i.ut=i.ut||"ntes.util";i.gb=i.gb||"ntes.global";i.gw=i.gw||"ntes.widget";i.fw=i.fw||"ntes.framework";i.rc.r=i.rc.r||"http://b.bst.126.net/common/";i.rc.s=i.rc.s||"/common/storage.swf";i.rc.u=i.rc.u||"/common/upload.swf";0>i.rc.s.indexOf("?")&&(i.rc.s+="?t="+(new Date).getTime())});define("{lib}base/browser.js",["{lib}base/global.js"],function(){var j=window.navigator.userAgent;P("B");B.__destroy=F;B._$ISMB=0<=j.indexOf("Mobile");B._$ISIE=!B._$ISMB&&/msie\s+(.*?)\;/i.test(j);B._$ISFF=!B._$ISMB&&!B._$ISIE&&/rv\:(.*?)\)\s+gecko\//i.test(j);B._$ISOP=!B._$ISMB&&!B._$ISIE&&!B._$ISFF&&/opera\/(.*?)\s/i.test(j);B._$ISSF=!B._$ISMB&&!B._$ISIE&&!B._$ISFF&&!B._$ISOP&&/applewebkit\/(.*?)\s/i.test(j);B._$ISKQ=!B._$ISMB&&!B._$ISIE&&!B._$ISFF&&!B._$ISOP&&!B._$ISSF&&/konqueror\/(.*?)\;/i.test(j);
B._$VERSION=RegExp.$1||"";B._$ISOLDIE=B._$ISIE&&"7.0">B._$VERSION;B._$ISMT=B._$ISIE&&0<=j.indexOf("Maxthon");B._$ISTT=B._$ISIE&&0<=j.indexOf("TencentTraveler");if(B._$ISIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}});define("{lib}base/util.js",["{lib}base/global.js"],function(){var j=/(?:^\s+)|(?:\s+$)/g,f=/^\s*$/,e={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""},l={r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"',"<br/>":"\n"},i={i:!0,r:/\byyyy|yy|MM|M|dd|d|HH|H|mm|ms|ss|m|s\b/g},d={r:/\'|\"|\\/g,"'":"\\'",'"':'\\"',"\\":"\\\\"};P("U");U.__destroy=F;U._$number=function(b){b=
parseInt(b)||0;return(10>b?"0":"")+b};U._$trim=function(b){return!!b&&!!b.replace&&b.replace(j,"")||""};U._$subString=function(b,c){b=b||"";if(!c)return b;for(var d=0,e=0,a=b.length;d<a;d++)if(e+=255<b.charCodeAt(d)?2:1,e>=c)return b.substr(0,d+(e==c?1:0));return b};U._$isEmpty=function(b){return f.test(b||"")};U._$rand=function(b,c){return Math.floor(Math.random()*(c-b)+b)};U._$randNumberString=function(b){b=Math.max(0,Math.min(b||10,100));b=Math.pow(10,b-1);return U._$rand(b,10*b).toString()};U._$isType=
function(b,c){return Object.prototype.toString.call(b).toLowerCase()=="[object "+c.toLowerCase()+"]"};U._$indexOf=function(b,c){var d=U._$isType(c,"function");if(b&&0<b.length)for(var e=0,a=b.length;e<a;e++)if(d?c(b[e]):b[e]==c)return e;return-1};U._$encode=function(b,c){return!b||!c||!c.replace?c||"":c.replace(b.r,function(c){var d=b[!b.i?c.toLowerCase():c];return null!=d?d:c})};U._$escape=function(b){return U._$encode(e,b)};U._$unescape=function(b){return U._$encode(l,b)};U._$string=function(b){return U._$encode(d,
b)};U._$format=function(b,c){if(!b||!c)return"";U._$isType(b,"string")&&(b=new Date(Date.parse(b)));U._$isType(b,"date")||(b=new Date(b));i.yyyy=b.getFullYear();i.yy=(""+i.yyyy).substr(2);i.M=b.getMonth()+1;i.MM=U._$number(i.M);i.d=b.getDate();i.dd=U._$number(i.d);i.H=b.getHours();i.HH=U._$number(i.H);i.m=b.getMinutes();i.mm=U._$number(i.m);i.s=b.getSeconds();i.ss=U._$number(i.s);i.ms=b.getMilliseconds();return U._$encode(i,c)};U._$serialize=function(b){if(U._$isType(b,"number"))return b;if(U._$isType(b,
"date"))return b.getTime();if(U._$isType(b,"boolean"))return b?"true":"false";if(U._$isType(b,"string"))return"'"+U._$string(b)+"'";if(!b)return"null";if(U._$isType(b,"array")){for(var c=[],d=0,e=b.length;d<e;c.push(U._$serialize(b[d])),d++);return"["+c.join(",")+"]"}if(U._$isType(b,"object")){c=[];for(d in b)c.push(U._$serialize(d)+":"+U._$serialize(b[d]));return"{"+c.join(",")+"}"}return"null"};U._$deserialize=function(b){try{return!b?null:(new Function("return "+b))()}catch(c){return null}};U._$parseJSON=
window.JSON?JSON.parse:U._$deserialize;U._$toJSONString=window.JSON?JSON.stringify:U._$serialize;U._$getGValue=function(b){var c=window[b];try{if(!delete window[b])throw"";}catch(d){window[b]=void 0}return c}});define("{lib}base/element.js",["{lib}base/browser.js","{lib}base/util.js"],function(){var j,f={},e=/\s+/g,l=document.createDocumentFragment(),i=function(a){if(a){switch(a.tagName.toLowerCase()){case "a":a.href="#";a.hideFocus=!0;break;case "iframe":a.frameBorder=0;a.src="about:blank";return;case "script":a.defer="defer";a.type="text/javascript";return;case "style":a.type="text/css";return;case "link":a.type="text/css";a.rel="stylesheet";return}l.appendChild(a)}},d=function(a){a=U._$trim(a);return!a?
"":"(\\s|^)(?:"+a.replace(e,"|")+")(?=\\s|$)"},b=function(a,b){if(a=E._$getElement(a))if(b=!!b,a.__hatkey__!=b){var k=a.__hvrkey__;k&&((a.__hatkey__=b)?E._$addClassName(a,k):E._$delClassName(a,k))}},c=function(a){if(a=E._$getElement(a)){var b=a.mt,k=a.mv;a.style[b]=a["width"==b?"scrollWidth":"scrollHeight"]<k?"auto":k+"px"}},g=function(a){if(a=E._$getElement(a)){var b=a.mt,k=a.mv,c=a.mr,d=a.style,g=a.scrollWidth/a.scrollHeight||1,e="width"==b?k:Math.floor(k*c),b="width"==b?Math.floor(k/c):k;g>=c&&
a.scrollWidth>e?(d.width=e+"px",d.height="auto"):g<=c&&a.scrollHeight>b?(d.width="auto",d.height=b+"px"):(d.width="auto",d.height="auto")}},h=function(a,b,k){a=E._$getElement(a);if(!a)return 0;for(var k=k||F,c=0;a&&!k(a);){c+=a[b];if("offsetTop"==b){var d=(a.currentStyle||document.defaultView.getComputedStyle(a,null)).position;d&&"fixed"==d.toLowerCase()&&(c+=(document.documentElement||{}).scrollTop||document.body.scrollTop)}a=a.offsetParent}return c},a;a=document.defaultView&&document.defaultView.getComputedStyle?
function(a,b){var k=document.defaultView.getComputedStyle(a,null);return!k?"":k[b]}:function(a,b){return a.currentStyle[b]};P("E");E.__destroy=function(){var a=document.createElement("div");a.style.display="none";document.body.appendChild(a);a.appendChild(l)};E._$getElement=function(a){if(1>=arguments.length)return U._$isType(a,"string")||U._$isType(a,"number")?document.getElementById(a):a;for(var b=[],k=0,c=arguments.length;k<c;b.push(E._$getElement(arguments[k])),k++);return b};E._$getChildElements=
function(a,b){a=E._$getElement(a);if(!a)return null;for(var k=[],c=a.children||a.childNodes,d=0,g=c.length;d<g;d++)c[d].nodeType!=Node.ELEMENT_NODE||b&&!E._$hasClassName(c[d],b)||k.push(c[d]);return k};E._$getElementsByClassName=function(a,b){b=U._$trim(b);a=E._$getElement(a);if(!a||!b)return null;if(a.getElementsByClassName)return Array.prototype.slice.call(a.getElementsByClassName(b),0);if(document.evaluate){for(var c=[],g=document.evaluate(".//*"+k(b),a,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,
null),e=0,i=g.snapshotLength;e<i;c.push(g.snapshotItem(e)),e++);return c}for(var c=[],h=RegExp(d(b),"g"),g=a.getElementsByTagName("*"),e=0,i=g.length;e<i;e++)E._$hasClassName(g[e],h)&&c.push(g[e]);return c};E._$hasClassName=function(a,b){a=E._$getElement(a);if(!a||!b)return!1;b=U._$isType(b,"string")?d(b):b;return 0<=(a.className||"").search(b)};E._$replaceClassName=function(a,b,k){if((a=E._$getElement(a))&&(b||k)){var c=a.className||"",k=" "+(k||"");(b=d(b+k))&&(c=c.replace(RegExp(b,"g"),"$1"));
a.className=U._$trim(c+k).replace(e," ")}};E._$addClassName=function(a,b){E._$replaceClassName(a,"",b)};E._$delClassName=function(a,b){E._$replaceClassName(a,b,"")};E._$addNodeTemplate=function(a,b){var k=E._$getElement(a),c=b||"tp_"+U._$randNumberString(6);k?(f[c]=k,l.appendChild(k)):U._$isType(a,"string")&&(f[c]=a);return c};E._$getNodeTemplate=function(a){var b=f[a];b&&U._$isType(b,"string")&&E._$addNodeTemplate(E._$parseElement(b),a);return!f[a]?null:f[a].cloneNode(!0)};E._$parseElement=function(a){if(!U._$isType(a,
"string"))return a;a=U._$trim(a);if(!a)return null;var b=document.cloneElement("div");b.innerHTML=a;return 1==b.childNodes.length?b.childNodes[0]:b};E._$parseStyle=function(a,b){if(!a)return null;if(!B._$ISIE||30>document.getElementsByTagName("style").length)return b||(b=document.cloneElement("style"),document.head.appendChild(b)),!B._$ISIE?b.innerText=a:b.styleSheet.cssText=a,b;j.styleSheet.cssText+=a;return j};E._$getStyle=function(b,k){b=E._$getElement(b);return!b?"":b.style[k]||a(b,k)};E._$offsetX=
function(a,b){return h(a,"offsetLeft",b)};E._$offsetY=function(a,b){return h(a,"offsetTop",b)};E._$removeElement=function(a){if((a=E._$getElement(a))&&a.parentNode)a.parentNode.removeChild(a),B._$ISIE&&a.outerHTML&&(a.outerHTML="")};E._$removeElementByEC=function(){for(var a=0,b=arguments.length,k;a<b;a++)(k=E._$getElement(arguments[a]))&&l.appendChild(k)};E._$noSelect=function(a,b){if(B._$ISIE&&(a=E._$getElement(a)))a.onselectstart=!b?F:null};E._$hoverElement=function(a,k,c){if(B._$ISOLDIE||c)if((a=
E._$getElement(a))&&k&&!a.__hvrkey__)a.__hvrkey__=k,k=a.id=a.id||"xnd_"+U._$randNumberString(10),V._$addEvent(a,B._$ISIE?"mouseleave":"mouseout",b._$bind(E,k,!1)),V._$addEvent(a,B._$ISIE?"mouseenter":"mouseover",b._$bind(E,k,!0))};E._$maxBoxElement=function(a,b,k,d){if(B._$ISOLDIE&&(a=E._$getElement(a))){var e=a.id||"mnd_"+U._$randNumberString(10);a.id=e;a.mt=b;a.mv=k;a.mr=d;a.maxkey||(a.maxkey=!0,b="img"==a.tagName.toLowerCase()?"load":"resize",d?V._$addEvent(a,b,g._$bind(E,e)):V._$addEvent(a,b,
c._$bind(E,e)))}};E._$maxWidthElement=function(a,b,k){E._$maxBoxElement(a,"width",b,k)};E._$maxHeightElement=function(a,b,k){E._$maxBoxElement(a,"height",b,k)};E._$getFlashObject=function(a){return B._$ISIE?window[a]:document[a]};var k;document.evaluate&&(k=function(a){if(!a)return null;if(!e.test(a))return"[contains(concat(' ',@class,' '),' "+a+" ')]";for(var a=a.split(e),b="",c=0,d=a.length,g;c<d;c++)g=k(a[c]),b+=!g?"":g;return b});window.Node||(window.Node={ELEMENT_NODE:1});B._$ISFF&&(HTMLElement.prototype.__defineGetter__("innerText",
function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(a){this.textContent=a}),HTMLElement.prototype.insertAdjacentElement=function(a,b){if(a&&b)switch(a){case "beforeEnd":this.appendChild(b);break;case "beforeBegin":this.parentNode.insertBefore(b,this);break;case "afterBegin":!this.firstChild?this.appendChild(b):this.insertBefore(b,this.firstChild);break;case "afterEnd":!this.nextSibling?this.parentNode.appendChild(b):this.parentNode.insertBefore(b,this.nextSibling)}},
HTMLElement.prototype.insertAdjacentHTML=function(a,b){a&&b&&this.insertAdjacentElement(a,document.createRange().createContextualFragment(b))});document.head=document.getElementsByTagName("head")[0]||document.body;document.cloneElement=function(a,b){var k=document.createElement(a);i(k);b&&(k.className=b);return k};B._$ISIE&&(j=document.cloneElement("style"),document.head.appendChild(j))});define("{lib}base/event.js",["{lib}base/global.js","{lib}base/browser.js","{lib}base/util.js","{lib}base/element.js"],function(){var j="__"+(new Date).getTime()+"__",f={},e=function(a,b,c){if(!(a==window||a==document||a==top||a==parent)){var d=a[j];if(d)a=f[d].evn,(d=a[b])?U._$isType(d,"array")?d.push(c):a[b]=[d,c]:a[b]=c;else{var d="ev_"+U._$randNumberString(),g={evn:{}};g.evn[b]=c;g.elm=a;f[d]=g;a[j]=d}}},l=function(a,b,c,d,g){if(a&&b&&c&&U._$isType(c,"function")){var e=!1,i=a[j];if(i&&f[i]&&f[i].evn&&
f[i].evn[b]){var r=f[i],i=r.evn[b];if(!U._$isType(i,"array")&&U._$isType(i,"function")&&c.toString()==i.toString())c=i,e=!0,g&&(delete r.evn[b],h(a,b,c,d),h(a,b,c,!d));else for(r=0;r<i.length;r++)if(U._$isType(i[r],"function")&&c.toString()==i[r].toString()){c=i[r];e=!0;g&&(i.splice(r,1),h(a,b,c,d),h(a,b,c,!d));break}}return e}},i=function(a,b){try{var c=f[a];if(c)if(b){var g=c.evn[b];if(g){if(U._$isType(g,"array"))for(var e;e=g.pop();V._$delEvent(c.elm,b,e));else V._$delEvent(c.elm,b,g);delete c.evn[b]}}else d(a)}catch(i){}},
d=function(a){var b=f[a];if(b){for(var c in b.evn)c&&i(a,c);b.elm[j]="";delete b.elm;delete b.evn;delete f[a]}},b=function(a,b){var c=V._$getElement(b)||document;c&&!("loaded"!=c.readyState&&"complete"!=c.readyState)&&a(b)},c=function(a,b){var c=(a.tagName||"").toLowerCase();return B._$ISIE&&(a==document&&"DOMContentLoaded"==b||("iframe"==c||"script"==c)&&"load"==b)},g,h;document.addEventListener?(g=function(a,b,c,d){a.addEventListener(b,c,!!d)},h=function(a,b,c,d){a.removeEventListener(b,c,!!d)}):
(g=function(a,b,c){a.attachEvent("on"+b,c)},h=function(a,b,c){a.detachEvent("on"+b,c)});P("V");V.__destroy=function(){for(var a in f)try{d(a)}catch(b){}};V._$getElement=function(a){if(!a)return null;var b=a.target||a.srcElement;if(!arguments[1]||!U._$isType(arguments[1],"function"))return b;for(;b;){if(arguments[1](b))return b;b=b.parentNode}return null};V._$addEvent=function(a,k,d,i,q){if((a=E._$getElement(a))&&k&&d){if(c(a,k)){k="readystatechange";d=b._$bind(null,d)}B._$ISIE&&(k=="input"&&!("oninput"in
document.createElement("input")))&&(k="propertychange");if(q){g(a,k,d,i);e(a,k,d)}else if(!l(a,k,d,i)){g(a,k,d,i);e(a,k,d)}}};V._$delEvent=function(a,b,c,d){if((a=E._$getElement(a))&&b&&c){B._$ISIE&&(b=="input"&&!("oninput"in document.createElement("input")))&&(b="propertychange");l(a,b,c,d,true)}};V._$clearEvent=function(a,b){if(a=E._$getElement(a)){c(a,b)&&(b="readystatechange");B._$ISIE&&(b=="input"&&!("oninput"in document.createElement("input")))&&(b="propertychange");i(a[j],b)}};V._$dispatchEvent=
function(a,b,c){if(a=E._$getElement(a))if(document.createEvent){c=document.createEvent("MouseEvent");c.initEvent(b,false,false);a.dispatchEvent(c)}else document.createEventObject&&a.fireEvent("on"+b,c||window.event||document.createEventObject())};V._$stop=function(a){V._$stopBubble(a);V._$stopDefault(a)};V._$stopBubble=function(a){if(a)a.stopPropagation?a.stopPropagation():a.cancelBubble=true};V._$stopDefault=function(a){if(a)a.preventDefault?a.preventDefault():a.returnValue=false};V._$pointerX=function(a){return!a?
0:a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)};V._$pointerY=function(a){return!a?0:a.pageY||a.clientY+(document.documentElement.scrollTop||document.body.scrollTop)}});define("{lib}base/destroy.js",["{lib}base/event.js"],function(){V._$addEvent(window,"unload",function(){try{V.__destroy(),E.__destroy(),U.__destroy(),B.__destroy()}catch(j){}})});define("{lib}util/event.js",["{lib}base/base.js"],function(){var j=P(N.ut);j._$$Event=C();j=j._$$Event.prototype;j._$initialize=function(){this.__events={}};j._$addEvent=function(f,e){f&&(e&&U._$isType(e,"Function"))&&(this.__events[f.toLowerCase()]=e)};j._$batEvent=function(f){if(f)for(var e in f)this._$addEvent(e,f[e])};j._$delEvent=function(f){f&&delete this.__events[f.toLowerCase()]};j._$getEvent=function(f){return this.__events[f.toLowerCase()]||null};j._$dispatchEvent=function(){if(arguments.length){var f=
this.__events[Array.prototype.shift.apply(arguments).toLowerCase()];if(f)return f.apply(window,arguments)}}});define("{lib}util/item.js",["{lib}util/event.js","{lib}util/extend/jst.js"],function(){var j=P(N.ut),f;j._$$Item=C();f=j._$$Item._$extend(j._$$Event);j._$$Item._$allocate=function(e,f,i){if(!e)return null;i=i||{};if(i._single_||!U._$isType(e,"array")){var d=!!this.__pool&&this.__pool.shift()||new this;d._used_=!0;d._$reset(i);d._$appendToParent(f,i.before);d._$setData(e);return d}if(!e.length)return null;for(var d=[],b=Math.max(0,i._start_||0),c=0,g=Math.min(null!=i._end_?i._end_:e.length,e.length);b<
g;c++,b++)i._index_=c,d.push(this._$allocate(e[b],f,i));return d};j._$$Item._$recycle=function(e){if(!e)return null;if(e._used_&&e instanceof this)return e._used_=!1,e._$destroy(),this.__pool&&this.__pool.push(e),null;if(U._$isType(e,"array"))for(var f;f=e.pop();this._$recycle(f));return null};f._$initialize=function(e){this._$super();this.__body=E._$getNodeTemplate(e);this.constructor.__pool=this.constructor.__pool||[]};f._$appendToParent=function(e,f){(this.__parent=E._$getElement(e))&&this.__body&&
(!f?this.__parent.appendChild(this.__body):this.__parent.insertAdjacentElement("afterBegin",this.__body))};f._$destroy=function(){delete this.__data;E._$removeElementByEC(this.__body)};f._$getData=function(){return this.__data||null};f._$setData=function(e){this.__data=e||O};f._$reset=F});define("{lib}util/extend/cookie.js",["{lib}base/base.js"],function(){P("U");var j,f=/\s*\;\s*/,e=new Date,l=e.getTime(),i=function(d,b,c,g,i){g&&e.setTime(l+864E5*g);i=i?"path="+i+";":"";c=c?"domain="+c+";":"";g=g?"expires="+e.toGMTString()+";":"";return d+"="+b+";"+c+i+g};U._$getCookie=function(d){return j[d]||""};U._$delCookie=function(d,b,c){document.cookie=i(d,"",b,-100,c);delete j[d]};U._$setCookie=function(d,b){document.cookie=i.apply(null,arguments);j[d]=b};U._$refreshCookie=function(){j={};
for(var d=0,b=document.cookie.split(f),c=b.length,g;d<c;d++)g=b[d].indexOf("="),j[b[d].substring(0,g)]=b[d].substr(g+1)};U._$refreshCookie()});define("{lib}util/extend/md5.js",["{lib}base/base.js"],function(){P("U");var j=function(d,b){var c=(d&65535)+(b&65535);return(d>>16)+(b>>16)+(c>>16)<<16|c&65535},f=function(d,b,c,g,e,a){d=j(j(b,d),j(g,a));return j(d<<e|d>>>32-e,c)},e=function(d,b,c,g,e,a,k){return f(b&c|~b&g,d,b,e,a,k)},l=function(d,b,c,g,e,a,k){return f(b&g|c&~g,d,b,e,a,k)},i=function(d,b,c,g,e,a,k){return f(c^(b|~g),d,b,e,a,k)};U._$md5=function(d){for(var b=[],c=0,g=8*d.length;c<g;b[c>>5]|=(d.charCodeAt(c/8)&255)<<c%32,c+=8);d=
8*d.length;b[d>>5]|=128<<d%32;b[(d+64>>>9<<4)+14]=d;for(var d=1732584193,c=-271733879,g=-1732584194,h=271733878,a=0,k=b.length,m,n,q,p;a<k;a+=16)m=d,n=c,q=g,p=h,d=e(d,c,g,h,b[a+0],7,-680876936),h=e(h,d,c,g,b[a+1],12,-389564586),g=e(g,h,d,c,b[a+2],17,606105819),c=e(c,g,h,d,b[a+3],22,-1044525330),d=e(d,c,g,h,b[a+4],7,-176418897),h=e(h,d,c,g,b[a+5],12,1200080426),g=e(g,h,d,c,b[a+6],17,-1473231341),c=e(c,g,h,d,b[a+7],22,-45705983),d=e(d,c,g,h,b[a+8],7,1770035416),h=e(h,d,c,g,b[a+9],12,-1958414417),g=
e(g,h,d,c,b[a+10],17,-42063),c=e(c,g,h,d,b[a+11],22,-1990404162),d=e(d,c,g,h,b[a+12],7,1804603682),h=e(h,d,c,g,b[a+13],12,-40341101),g=e(g,h,d,c,b[a+14],17,-1502002290),c=e(c,g,h,d,b[a+15],22,1236535329),d=l(d,c,g,h,b[a+1],5,-165796510),h=l(h,d,c,g,b[a+6],9,-1069501632),g=l(g,h,d,c,b[a+11],14,643717713),c=l(c,g,h,d,b[a+0],20,-373897302),d=l(d,c,g,h,b[a+5],5,-701558691),h=l(h,d,c,g,b[a+10],9,38016083),g=l(g,h,d,c,b[a+15],14,-660478335),c=l(c,g,h,d,b[a+4],20,-405537848),d=l(d,c,g,h,b[a+9],5,568446438),
h=l(h,d,c,g,b[a+14],9,-1019803690),g=l(g,h,d,c,b[a+3],14,-187363961),c=l(c,g,h,d,b[a+8],20,1163531501),d=l(d,c,g,h,b[a+13],5,-1444681467),h=l(h,d,c,g,b[a+2],9,-51403784),g=l(g,h,d,c,b[a+7],14,1735328473),c=l(c,g,h,d,b[a+12],20,-1926607734),d=f(c^g^h,d,c,b[a+5],4,-378558),h=f(d^c^g,h,d,b[a+8],11,-2022574463),g=f(h^d^c,g,h,b[a+11],16,1839030562),c=f(g^h^d,c,g,b[a+14],23,-35309556),d=f(c^g^h,d,c,b[a+1],4,-1530992060),h=f(d^c^g,h,d,b[a+4],11,1272893353),g=f(h^d^c,g,h,b[a+7],16,-155497632),c=f(g^h^d,c,
g,b[a+10],23,-1094730640),d=f(c^g^h,d,c,b[a+13],4,681279174),h=f(d^c^g,h,d,b[a+0],11,-358537222),g=f(h^d^c,g,h,b[a+3],16,-722521979),c=f(g^h^d,c,g,b[a+6],23,76029189),d=f(c^g^h,d,c,b[a+9],4,-640364487),h=f(d^c^g,h,d,b[a+12],11,-421815835),g=f(h^d^c,g,h,b[a+15],16,530742520),c=f(g^h^d,c,g,b[a+2],23,-995338651),d=i(d,c,g,h,b[a+0],6,-198630844),h=i(h,d,c,g,b[a+7],10,1126891415),g=i(g,h,d,c,b[a+14],15,-1416354905),c=i(c,g,h,d,b[a+5],21,-57434055),d=i(d,c,g,h,b[a+12],6,1700485571),h=i(h,d,c,g,b[a+3],10,
-1894986606),g=i(g,h,d,c,b[a+10],15,-1051523),c=i(c,g,h,d,b[a+1],21,-2054922799),d=i(d,c,g,h,b[a+8],6,1873313359),h=i(h,d,c,g,b[a+15],10,-30611744),g=i(g,h,d,c,b[a+6],15,-1560198380),c=i(c,g,h,d,b[a+13],21,1309151649),d=i(d,c,g,h,b[a+4],6,-145523070),h=i(h,d,c,g,b[a+11],10,-1120210379),g=i(g,h,d,c,b[a+2],15,718787259),c=i(c,g,h,d,b[a+9],21,-343485551),d=j(d,m),c=j(c,n),g=j(g,q),h=j(h,p);b=[d,c,g,h];d=[];c=0;for(g=4*b.length;c<g;d.push("0123456789abcdef".charAt(b[c>>2]>>8*(c%4)+4&15)+"0123456789abcdef".charAt(b[c>>
2]>>8*(c%4)&15)),c++);return d.join("")}});define("{lib}util/extend/jst.js",["{lib}base/base.js"],function(){var j={},f={},e=[],l=/\t/g,i=/\s+/g,d=/\n/g,b=/\r\n?/g,c=/\|\|/g,g=/#@@#/g,h={r:/\n|\\|\'/g,"\n":"\\n","\\":"\\\\","'":"\\'"},a=/^\{(cdata|minify|eval)/i,k={"if":{pfix:"if(",sfix:"){",pmin:1},"else":{pfix:"}else{"},elseif:{pfix:"}else if(",sfix:"){",pdft:"true"},"/if":{pfix:"}"},"for":{pfix:function(a){if("in"!=a[2])throw"bad for loop statement: "+a.join(" ");e.push(a[1]);return"var __HASH__"+a[1]+" = "+a[3]+","+a[1]+","+a[1]+"_count=0;if (!!__HASH__"+
a[1]+")for(var "+a[1]+"_key in __HASH__"+a[1]+"){"+a[1]+" = __HASH__"+a[1]+"["+a[1]+"_key];if (!"+a[1]+"||typeof("+a[1]+')=="function") continue;'+a[1]+"_count++;"},pmin:3},forelse:{pfix:function(){var a=e[e.length-1];return"}; if(!__HASH__"+a+"||!"+a+"_count){"}},"/for":{pfix:function(){e.pop();return"};"}},list:{pfix:function(a){if("as"!=a[2])throw"bad for list loop statement: "+a.join(" ");var b=a[1].split("..");return 1<b.length?"for(var "+a[3]+","+a[3]+"_index=0,_beg="+b[0]+",_end="+b[1]+","+
a[3]+"_length=parseInt(_end-_beg+1);"+a[3]+"_index<"+a[3]+"_length;"+a[3]+"_index++){"+a[3]+" = _beg+"+a[3]+"_index;":"for(var __LIST__"+a[3]+" = "+a[1]+","+a[3]+","+a[3]+"_index=0,"+a[3]+"_length=__LIST__"+a[3]+".length;"+a[3]+"_index<"+a[3]+"_length;"+a[3]+"_index++){"+a[3]+" = __LIST__"+a[3]+"["+a[3]+"_index];"},pmin:3},"/list":{pfix:"};"},"break":{pfix:"break;"},"var":{pfix:"var ",sfix:";"},macro:{pfix:function(a){if(a&&a.length){a.shift();var b=a[0].split("(")[0];return"var "+b+" = function"+
a.join("").replace(b,"")+"{var __OUT=[];"}}},"/macro":{pfix:"return __OUT.join(''); };"}},m={trim:U._$trim,rand:U._$randNumberString,escape:U._$escape,format:U._$format,string:U._$string,substr:U._$subString,"default":function(a,b){return a||b}},n=function(a,b){if(a){var k=a.split("\n");if(k&&k.length)for(var d=0,m=k.length;d<m;d++){for(var e=k[d],i=b,n="}",f=-1,h=e.length,j=void 0,l=void 0,o=void 0,t=void 0,j=void 0;f+n.length<h;){j="${";l="}";o=e.indexOf(j,f+n.length);if(0>o)break;"%"==e.charAt(o+
2)&&(j="${%",l="%}");t=e.indexOf(l,o+j.length);if(0>t)break;q(e.substring(f+n.length,o),i);j=e.substring(o+j.length,t).replace(c,"#@@#").split("|");n=0;for(f=j.length;n<f;j[n]=j[n].replace(g,"||"),n++);i.push("__OUT.push(");p(j,i);i.push(");");n=l;f=t}q(e.substring(f+n.length),i)}}},q=function(a,b){a&&b.push("__OUT.push('"+U._$encode(h,a)+"');")},p=function(a,b){if(a&&a.length)if(1==a.length)b.push(a.pop());else{var c=a.pop().split(":");b.push("__MDF['"+c.shift()+"'](");p(a,b);0<c.length&&b.push(","+
c.join(":"));b.push(")")}},o=function(c){for(var c=U._$trim(c).replace(b,"\n").replace(l,"    "),m=["if(!__CTX) return '';var __OUT=[];with(__CTX){"],e=-1,g=c.length,f,h,p,j,o;e+1<g;){f=e;for(f=c.indexOf("{",f+1);0<=f;){h=c.indexOf("}",f+1);p=c.substring(f,h);if(h=p.match(a)){if(j=h[1].length+1,o=c.indexOf("}",f+j),0<=o&&(p=0>=o-f-j?"{/"+h[1]+"}":p.substr(j+1),j=c.indexOf(p,o+1),0<=j)){n(c.substring(e+1,f),m);e=c.substring(o+1,j);switch(h[1]){case "cdata":q(e,m);break;case "minify":q(e.replace(d,
" ").replace(i," "),m);break;case "eval":e&&m.push("__OUT.push((function(){"+e+"})());")}f=e=j+p.length-1}}else if("$"!=c.charAt(f-1)&&"\\"!=c.charAt(f-1)&&0==p.substr("/"==p.charAt(1)?2:1).search("forelse|for|list|if|elseif|else|var|macro|break"))break;f=c.indexOf("{",f+1)}if(0>f)break;h=c.indexOf("}",f+1);if(0>h)break;n(c.substring(e+1,f),m);o=c.substring(f,h+1);e=m;f=o.slice(1,-1).split(i);if(j=k[f[0]]){if(j.pmin&&j.pmin>=f.length)throw"Statement needs more parameters:"+o;e.push(j.pfix&&"string"!=
typeof j.pfix?j.pfix(f):j.pfix||"");if(j.sfix){if(1>=f.length)j.pdft&&e.push(j.pdft);else{o=1;for(p=f.length;o<p;o++)1<o&&e.push(" "),e.push(f[o])}e.push(j.sfix)}}else n(o,e);e=h}n(c.substring(e+1),m);m.push("};return __OUT.join('');");return new Function("__CTX","__MDF",m.join(""))};E._$getHtmlTemplate=function(a,b,c){try{b=b||{};if(!j[a]&&!f[a])return"";j[a]||(j[a]=o(f[a]),delete f[a]);b.defined=function(a){return b[a]!=null};if(c)for(var k in m)c[k]=m[k];return j[a](b,c||m)}catch(d){return d.message||
""}};E._$addHtmlTemplate=function(a){if(!a)return"";var b,c=this._$getElement(a);c&&(b=c.id,a=c.value||c.innerText);b=b||"ck_"+U._$randNumberString();f[b]=a;return b}});define("{lib}util/ajax/tag.js",["{lib}base/base.js"],function(){P("J");var j={},f=function(e,d,b){if(j[e]){var c=j[e].cb;var g=j[e];g&&(delete j[e],delete g.cb,e=g.rpc,delete g.rpc,g.timer=window.clearTimeout(g.timer),V._$clearEvent(e),E._$removeElement(e));if(c&&c.length){g=0;for(e=c.length;g<e;g++)try{(c[g][d]||F)(b)}catch(f){}}}},e=function(e){f(e,"onload")},l=function(e,d){f(e,"onerror",d||"\u811a\u672c\u52a0\u8f7d\u51fa\u9519\uff01")};J._$loadStyle=function(e){if(e){var d=document.cloneElement("link");
document.head.appendChild(d);d.href=e;return d}};J._$loadScript=function(e,d,b){return J._$loadScriptWithOpt(e,{onload:d,onerror:b})};J._$loadScriptWithOpt=function(f,d){if(f){var d=d||O,b=j[f],c=!b,g,h={onload:d.onload||F,onerror:d.onerror||d.onload||F};c?(g=document.cloneElement("script"),b={cb:[h],rpc:g},j[f]=b,d.charset&&(g.charset=d.charset),V._$addEvent(g,"load",e._$bind(window,f)),V._$addEvent(g,"error",l._$bind(window,f,"\u65e0\u6cd5\u52a0\u8f7d\u6307\u5b9a\u7684\u811a\u672c\u6587\u4ef6\uff01"))):
(g=b.rpc,b.cb.unshift(h),b.timer=window.clearTimeout(b.timer));0!=d.timeout&&(b.timer=window.setTimeout(l._$bind(window,f,"\u8bf7\u6c42\u8d85\u65f6\uff01"),d.timeout||6E4));c&&(g.src=f,document.head.appendChild(g));return g}}});define("{lib}util/ajax/xdr.js",["{lib}base/base.js","{lib}util/event.js"],function(){P("J");var j,f={},e=[location.host,location.host,document.domain],l=/^(?:[\w]+\:\/\/)?(.*?\.([-a-zA-Z0-9\.\u4e00-\u9fa5\uf900-\ufa2d]+\.[-a-zA-Z0-9\.\u4e00-\u9fa5\uf900-\ufa2d]+)(?:\:[\d]+)?)(?:\/|$)/i,i=/^(?:[\w]+\:\/\/)?(.*?\.?([-a-zA-Z0-9\.\u4e00-\u9fa5\uf900-\ufa2d]+\.[-a-zA-Z0-9\.\u4e00-\u9fa5\uf900-\ufa2d]+)(?:\:[\d]+)?)(?:\/|$)/i,d=function(a){if(/^\s*\//.test(a))return e;var b=a.match(l);b&&(0<b.length&&b[0]==
a)&&(b=a.match(i));return!b||3>b.length?[]:b},b=function(a){try{if(!a)return null;if(a.gx)return a.gx();if(a.XMLHttpRequest)return new a.XMLHttpRequest;if(j)return new a.ActiveXObject(j);for(var b="Msxml2.XMLHTTP.6.0 Msxml2.XMLHTTP.3.0 Msxml2.XMLHTTP.4.0 Msxml2.XMLHTTP.5.0 MSXML2.XMLHTTP Microsoft.XMLHTTP".split(" "),c=0,k=b.length,d;c<k;c++)try{return d=new a.ActiveXObject(b[c]),j=b[c],d}catch(e){}return null}catch(m){return null}},c=function(a){var b=f[a];if(b)try{b.w=E._$getElement(a).contentWindow}catch(c){}};
J.a=c;null==document.readyState&&V._$addEvent(document,"DOMContentLoaded",function(){try{document.readyState="complete"}catch(a){}});J._$allocateXDR=function(a){var a=d(a)[1]||location.host,c=f[a];return!c?(this._$registXDomain(a,!0),null):c.p.shift()||b(c.w)};J._$recycleXDR=function(a,b){b&&(delete b.onreadystatechange,b.abort())};J._$getXWindow=function(a){a=d(a)[1]||location.host;return(a=f[a])&&a.w||null};J._$isXDomain=function(a){a=d(a);return!!a[1]&&a[1]!=location.host};J._$registXDomain=function(a,
b){if(a==location.host)f[a]={w:window,p:[]};else{var k=d(a);if(k[2]==document.domain&&k[1]&&!f[k[1]]){var e=0<=a.toLowerCase().indexOf("http://")?a:"http://"+k[1]+"/crossdomain.html?t=20100205";f[k[1]]={w:null,p:[]};if("complete"!=document.readyState&&!b)document.write('<iframe width="0" height="0" src="'+e+'" id="'+k[1]+'" name="'+k[1]+'" onload="J.a(\''+k[1]+'\');" style="display:none;"></iframe>');else{var m=document.cloneElement("iframe");m.width=0;m.height=0;m.id=k[1];m.style.display="none";
V._$addEvent(m,"load",c._$bind(null,k[1]));document.body.appendChild(m);m.src=e}}}};J._$registXDomain(location.host);if(N.xd&&0<N.xd.length){for(var g=0,h=N.xd.length;g<h;J._$registXDomain(N.xd[g]),g++);delete N.xd}V._$addEvent(document,"keypress",function(a){27==a.keyCode&&V._$stop(a)});var g=P(N.ut),a=[];g._$$XDR=C();h=g._$$XDR._$extend(g._$$Event);g._$$XDR._$allocate=function(b){var c=a.shift()||new this;c._$reset(b);return c};g._$$XDR._$recycle=function(b){b instanceof this&&b._$used()&&(b._$destroy(),
a.push(b))};h._$used=function(){return this.__used};h._$reset=function(a){this.__used=!0;a=a||O;this.__rty=100;this.__url=a.url||"";this.__async=!a.sync;this.__rtype=a.rtype||"text";this.__ctype=a.ctype||"text/plain";this.__method=a.method||"POST";this.__headers=a.headers||null;this.__interval=a.interval||4E4;this.__notimeout=a.notimeout||!1;this._$addEvent("onload",a.onload||F);this._$addEvent("onerror",a.onerror||F);this._$addEvent("ontimeout",a.ontimeout||a.onerror||F)};h._$send=function(a){this.__url?
(!this.__notimeout&&!this.__rtimer&&(this.__timer=window.setTimeout(this.__onTimeout._$bind(this),this.__interval)),this.__xdr=J._$allocateXDR(this.__url))?B._$ISOP&&J._$isXDomain(this.__url)?this.__sendInOP(a):B._$ISIE?this.__sendInIE(a):this.__send(a):(this.__rtimer=window.setTimeout(this._$send._$bind(this,a),this.__rty),this.__rty+=200):this._$dispatchEvent("onerror","\u8bf7\u63d0\u4f9b\u8bf7\u6c42\u7684\u5730\u5740!")};h._$destroy=function(){this.__used=!1;this._$delEvent("onload");this._$delEvent("onerror");
this._$delEvent("ontimeout");J._$recycleXDR(this.__url,this.__xdr);delete this.__xdr;this.__timer&&(this.__timer=window.clearTimeout(this.__timer));this.__rtimer&&(this.__rtimer=window.clearTimeout(this.__rtimer))};h.__send=function(a){try{this.__xdr.open(this.__method,this.__url,this.__async);this.__xdr.setRequestHeader("Content-Type",this.__ctype);if(this.__headers)for(var b in this.__headers)"limit"!=b&&this.__xdr.setRequestHeader(b,this.__headers[b]);this.__async&&(this.__xdr.onreadystatechange=
this.__onStateChange._$bind(this));this.__xdr.send(a);this.__async||this.__onStateChange()}catch(c){this._$dispatchEvent("onerror","\u65e0\u6cd5\u53d1\u9001\u8bf7\u6c42,"+c.message)}};h.__sendInIE=function(a){!this.__async?this.__send(a):window.setTimeout(this.__send._$bind(this,a),100)};h.__sendInOP=function(a){try{var b=J._$getXWindow(this.__url);b.b||(b.b=b.document.createElement("input"),b.b.type="button",b.document.body.appendChild(b.b));b.b.onclick=this.__send._$bind(this,a);b.b.click()}catch(c){}};
h.__getResponseBody=function(){switch(this.__rtype.toLowerCase()){case "xml":return this.__xdr.responseXML;case "text":return this.__xdr.responseText;case "json":try{return eval("("+this.__xdr.responseText+")")}catch(a){}}return null};h.__onStateChange=function(){try{this.__xdr&&4==this.__xdr.readyState&&(this.__timer&&(this.__timer=window.clearTimeout(this.__timer)),200!=this.__xdr.status?this._$dispatchEvent("onerror","\u670d\u52a1\u5668\u8fd4\u56de\u5f02\u5e38["+this.__xdr.status+"]!"):this._$dispatchEvent("onload",
this.__getResponseBody()))}catch(a){this._$dispatchEvent("onerror","\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u51b5!")}};h.__onTimeout=function(){this.__rtimer&&(this.__rtimer=window.clearTimeout(this.__rtimer));this.__timer&&(this.__timer=window.clearTimeout(this.__timer),this._$dispatchEvent("ontimeout","\u8bf7\u6c42\u8d85\u65f6\uff01"))};var f={},k=function(a){var b=f[a];b&&(P(N.ut)._$$XDR._$recycle(b.req),delete b.req,delete b.onload,delete b.onerror,delete f[a])},m=function(a,
b){var c=f[a];if(c){try{c.onload(b)}catch(d){}k(a)}},n=function(a,b){var c=f[a];if(c){try{c.onerror(b)}catch(d){}k(a)}};J._$request=function(a,b){if(a){var b=b||O,c;if(c=b.data){var k=[],d;for(d in c)k.push(encodeURIComponent(d)+"="+encodeURIComponent(c[d]));c=k.join("&")}else c=null;(k="GET"==(b.method||"").toUpperCase())&&c&&(a+=(0>a.indexOf("?")?"?":"&")+c);d=U._$randNumberString();var e={url:a,sync:!!b.sync,rtype:b.type,ctype:b.ctype||"application/x-www-form-urlencoded",method:b.method,headers:b.header,
interval:b.timeout,notimeout:0==b.timeout,onload:m._$bind(null,d),onerror:n._$bind(null,d)};f[d]={req:P(N.ut)._$$XDR._$allocate(e),onload:b.onload||F,onerror:b.onerror||b.onload||F};f[d].req._$send(k?null:c);return d}}});define("{lib}util/ajax/dwr.js",["{lib}util/ajax/tag.js","{lib}util/ajax/xdr.js","{lib}util/extend/cookie.js"],function(){P("J");var j=F,f=F,e=0,l=0,i=null,d="JSESSIONID";J._$registDWRLogger=function(a){j=a||F};J._$registDWRErrorFilter=function(a){f=a||F};J._$setTimeout=function(a){e=Math.max(0,parseInt(a)||0)};J._$setBatchId=function(a){l=a};J._$setHeaders=function(a){i=a||null};J._$setCookieName=function(a){d=a||d};var b={},c,g=function(a,b){if(void 0==a)return"null:null";if(U._$isType(a,"boolean"))return"boolean:"+
(a?"true":"false");if(U._$isType(a,"number"))return"number:"+a;if(U._$isType(a,"string"))return"string:"+encodeURIComponent(a);if(U._$isType(a,"date"))return"Date:"+a.getTime();if(U._$isType(a,"array")){for(var k=[],d=0,e=a.length,m,f;d<e;d++)if(c.p++,m=b+"-e"+c.p,f=g(a[d],b))c.m[m]=f,k.push("reference:"+m);return"Array:["+k.join(",")+"]"}if(U._$isType(a,"object")){k=[];for(m in a)if(c.p++,d=b+"-e"+c.p,e=g(a[m],b))c.m[d]=e,k.push(encodeURIComponent(m)+":reference:"+d);return"Object_Object:{"+k.join(",")+
"}"}return U._$isType(a,"function")?"":"default:"+a},h=function(a,b){if(!a)return null;var c=[],k="&"==b,d;for(d in a)c.push(k?encodeURIComponent(d)+"="+encodeURIComponent(a[d]):d+"="+a[d]);return c.join(b||"\n")},a=function(a,b,k,e){var m=!1;c||(this._$beginBatch(),m=!0,U._$refreshCookie(),c.m.httpSessionId=U._$getCookie(d));var f=Array.prototype.slice.call(arguments,0);c.t=f.shift()||0;c.u=f.shift();var n="c"+c.m.callCount;c.m[n+"-scriptName"]=f.shift();c.m[n+"-methodName"]=f.shift();c.m[n+"-id"]=
c.m.callCount;var i={c:F,e:null};0<f.length&&(f[f.length-1]&&U._$isType(f[f.length-1],"function"))&&(i.c=f.pop());0<f.length&&(f[f.length-1]&&U._$isType(f[f.length-1],"function"))&&(i.e=i.c,i.c=f.pop());c.h[c.m.callCount]=i;if(c)for(var i=0,h=f.length,j;i<h;i++)(j=g(f[i],n))&&(c.m[n+"-param"+i]=j);c.m.callCount++;m&&this._$endBatch()},k=function(a,b){try{!b||0>b.search("//#DWR")?m(a,"\u8fd4\u56de\u6570\u636e\u4e0d\u5408\u6cd5!"):(new Function(b))()}catch(c){m(a,c.message)}finally{w(a)}},m=function(a,
c){j(c);var k=b[a];if(k){var k=k.h,d;for(d in k)r(k[d],c)}},n=function(a,b){m(a,b);w(a)},q=function(a,c,k){var d=b[a];if(d)try{d.h[c].c(k)}catch(e){o(a,c,e)}},p=function(a,c){var k=b[a];if(k)for(var d=0,k=k.m.callCount;d<k;o(a,d,c,!0),d++);},o=function(a,c,k){j(k);(a=b[a])&&r(a.h[c],k)},r=function(a,b){a&&!f(b)&&(!a.e?a.c(null):a.e(b))},w=function(a){var c=b[a];c&&(P(N.ut)._$$XDR._$recycle(c.r),delete c.r,delete c.h,delete b[a])};J._$beginBatch=function(){c||(c={h:{},p:0,m:{callCount:0,scriptSessionId:"${scriptSessionId}187"}})};
J._$endBatch=function(){if(!c||!c.u)c=null;else{var a=l||U._$randNumberString(6);l=0;c.m.batchId=a;b[a]=c;c=null;var d=b[a];if(d){var g="";0<=d.u.indexOf("?")&&(g=d.u.split("?"),d.u=g.shift(),g="?"+g.join("?"));d.u+="/call/plaincall/";d.u+=1<d.m.callCount?"Multiple."+d.m.callCount+".dwr":d.m["c0-scriptName"]+"."+d.m["c0-methodName"]+".dwr";d.u+=g;g=d.t%10;if(1==g||2==g)d.u=d.u+(0<=d.u.indexOf("?")?"&":"?")+h(d.m,"&");2==d.t?J._$loadScript(d.u,null,m._$bind(window,a)):(a={url:d.u,sync:10<=d.t,interval:e,
headers:i,onload:k._$bind(window,a),onerror:n._$bind(window,a)},e=0,i&&-1!=i.limit&&(i=null),1==g?(a.method="GET",d.r=P(N.ut)._$$XDR._$allocate(a),d.r._$send(null)):(a.method="POST",d.r=P(N.ut)._$$XDR._$allocate(a),d.r._$send(h(d.m,"\n"))))}}};J._$postDataByDWR=function(b,c,k){Array.prototype.unshift.call(arguments,0);a.apply(J,arguments)};J._$postDataByDWRWithSync=function(b,c,k){Array.prototype.unshift.call(arguments,10);a.apply(J,arguments)};J._$loadDataByDWR=function(b,c,k){Array.prototype.unshift.call(arguments,
1);a.apply(J,arguments)};J._$loadDataByDWRWithSync=function(b,c,k){Array.prototype.unshift.call(arguments,11);a.apply(J,arguments)};J._$loadDataByTAG=function(b,c,k){Array.prototype.unshift.call(arguments,2);a.apply(J,arguments)};P("dwr.engine");dwr.engine._remoteHandleCallback=q;dwr.engine._remoteHandleException=o;dwr.engine._remoteHandleBatchException=p;P("dwr._");dwr._=[{handleCallback:q,handleException:o,handleBatchException:p}]});define("{lib}ui/abstract.js",["{lib}base/base.js","{lib}util/event.js"],function(){var j=P(N.ui),f,e,l=/\#\<.*?\>/gi;j._$pushStyle=function(f,d){f&&f.replace&&(e||(e=[]),d&&(f=f.replace(l,"."+d)),e.push(f))};j._$dumpStyle=function(){e&&(E._$parseStyle(e.join("")),e=null)};j._$$UIAbstract=C();f=j._$$UIAbstract._$extend(P(N.ut)._$$Event);j._$$UIAbstract._$allocate=function(e,d){d=d||{};d.group=!!d.singleton&&"__singleton__"||d.group;var b;d.group&&(this.__group=this.__group||{},b=this.__group[d.group]);
b||(this.__pool=this.__pool||[],b=this.__pool.shift());b?(b._$destroy(!0),b._$reset(e,d)):b=new this(e,d);d.group&&(this.__group[d.group]=b);return b};j._$$UIAbstract._$recycle=function(e){if(!(e instanceof this)||e._$destroyed())return null;var d=e._$group();if(d&&!this.__group[d])return null;e._$destroy();d&&delete this.__group[d];this.__pool=this.__pool||[];this.__pool.push(e);return null};f._$initialize=function(e,d){this._$super();j._$dumpStyle();this.__body=document.cloneElement("div",this.__getSpace());
this.__body.innerHTML=this.__getXhtml()||"";this.__intXnode();this._$reset(e,d)};f._$destroy=function(){this._$getEvent("onbeforedestroy")&&(this._$dispatchEvent("onbeforedestroy"),this._$delEvent("onbeforedestroy"),this.__recycleBody(),E._$delClassName(this.__body,this.__class),delete this.__class)};f._$reset=function(e,d){d=d||O;this.__group=d.group;this._$resetOption(d);this._$appendToParent(e,!!d.before)};f._$resetOption=function(e){e=e||O;this.__class=e["class"]||"";E._$addClassName(this.__body,
this.__class);this.__hhack=B._$ISIE&&!!e.hackhover;this._$addEvent("onbeforedestroy",e.onbeforedestroy||F)};f._$getBody=function(){return this.__body};f._$appendToParent=function(e,d){if(this.__body&&(e=E._$getElement(e)))this.__parent=e==document.documentElement?document.body:e,this.__revertBody(d)};f._$group=function(){return this.__group||null};f._$destroyed=function(){return!this.__used};f.__recycleBody=function(){this.__used=!1;this.__hhack?this.__body.style.display="none":E._$removeElementByEC(this.__body)};
f.__revertBody=function(e){this.__parent&&this.__body&&(!e?this.__parent.appendChild(this.__body):this.__parent.insertAdjacentElement("afterBegin",this.__body),this.__hhack&&(this.__body.style.display=""),this.__used=!0)};f.__getSpace=F;f.__getXhtml=F;f.__intXnode=F});define("{pro}base/extend.js",["{lib}base/base.js","{lib}ui/abstract.js","{lib}util/extend/cookie.js","{pro}base/lofter_aswlf_V2_1.js"],function(){P("U");var j={r:/\<|\>|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""},f;U._$serialize=function(a){if(U._$isType(a,"number"))return a;if(U._$isType(a,"date"))return a.getTime();if(U._$isType(a,"boolean"))return a?"true":"false";if(U._$isType(a,"string"))return'"'+U._$string(a)+'"';if(!a)return"null";if(U._$isType(a,
"array")){for(var b=[],c=0,d=a.length;c<d;b.push(U._$serialize(a[c])),c++);return"["+b.join(",")+"]"}if(U._$isType(a,"object")){b=[];for(c in a)b.push(U._$serialize(c)+":"+U._$serialize(a[c]));return"{"+b.join(",")+"}"}return"null"};U._$deserialize=function(a){try{return!a?null:(new Function("return "+a))()}catch(b){return null}};U._$parseJSON=B._$ISIE?U._$deserialize:window.JSON?JSON.parse:U._$deserialize;U._$toJSONString=B._$ISIE?U._$serialize:window.JSON?JSON.stringify:U._$serialize;var e=P("loft.x"),
l=document.createElement("input"),i=/(&nbsp;(\w+))/gi,d=/((\w+)&nbsp;([^ ]+))/gi;e._$escapeForSpace=function(a){a=U._$escape(a||"");a=a.replace(i," $2");return a=a.replace(d,"$2 $3")};e._$escapeForSpace2=function(a){a=(a||"").replace(i," $2");return a=a.replace(d,"$2 $3")};e._$escapeWithoutAnd=function(a){return U._$encode(j,a)};e._$emptyParagraphToEmpty=function(a){return(a||"").replace(/^(<p>(&nbsp;|<br\s*\/?>)<\/p>)|(&nbsp;|<br\s*\/?>)$/i,"")};e._$filterEmptyLine=function(a){return(a||"").replace(/(^<p>(&nbsp;|<br\s*\/?>)<\/p>)|(<p>(&nbsp;|<br\s*\/?>)<\/p>$)/gi,
"")};e._$filterAllEmptyLine=function(a){return(a||"").replace(/(^(<p>(&nbsp;|<br\s*\/?>)*<\/p>)+)|((<p>(&nbsp;|<br\s*\/?>)*<\/p>)+$)/gi,"")};e._$filterAllEmptyFormat=function(a){return(a||"").replace(/(&nbsp;)/gi,"")};e._$filterLastLineBr=function(a){return(a||"").replace(/<p>(\w+)(&nbsp;|<br\s*\/?>)+<\/p>$/gi,"<p>$1</p>")};e._$setUEditorCursor=function(a,b){if(a)if(b)a.focus();else{var c=a.selection.getRange(),d=E._$getChildElements(a.body)||[];if(0<d.length){var e=E._$getChildElements(d[d.length-
1])||[],g=e[e.length-1];g&&g.tagName&&"br"==g.tagName.toLowerCase()?(c.selectNodeContents(e[e.length-1]),c.setCursor(!1,!0)):(c.selectNodeContents(d[d.length-1]),c.setCursor(!0,!0))}}};e._$printLog=function(a){if((P("loft.c")._$testDBMode||P("loft.c")._$devSourceMode)&&a){debugger;alert(a)}};e._$linkCssFile=function(a){if(a){var b=document.cloneElement("link");b.setAttribute("href",a);document.head&&b&&document.head.insertAdjacentElement("beforeEnd",b)}};e._$linkRetinaCssFile=function(a){window.devicePixelRatio&&
(1<window.devicePixelRatio&&!B._$ISIE)&&e._$linkCssFile(a)};e._$statistic=function(a){try{(new Image).src="http://www.lofter.com/statistic.png?act="+a+"&t="+(new Date).getTime()}catch(b){}};window.statistic4Lofter=e._$statistic;e._$statisticAddCallBack=function(a,b){try{var c=new Image;c.onload=function(){window.clearTimeout(f);b()};f=window.setTimeout(function(){c.onload=function(){};b()},300);c.src="http://www.lofter.com/statistic.png?act="+a+"&t="+(new Date).getTime()}catch(d){}};e._$getScrollTop=
function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};e._$clone=function(a){if(U._$isType(a,"number"))return a;if(U._$isType(a,"date"))return a.getTime();if(U._$isType(a,"boolean")||U._$isType(a,"string")||U._$isType(a,"function"))return a;if(!a)return null;if(U._$isType(a,"array")){for(var b=[],c=0,d=a.length;c<d;b.push(this._$clone(a[c])),c++);return b}if(U._$isType(a,"object")){b={};for(c in a)b[c]=this._$clone(a[c]);return b}};e._$object2String=
function(a){return U._$toJSONString(a)};e._$getParmvalByKey=function(a,b,c){var c=c||"?",a=U._$trim(a||""),d=a.indexOf(c);if(0>d)return"";"#"!=c&&(c=a.indexOf("#")||0,0<=c&&d<c&&(a=a.substring(0,c)));a=a.substr(d+1);if(!a)return"";for(var a=a.split("&"),d=0,c=a.length,e;d<c;d++)if(e=a[d].indexOf("="),a[d].substring(0,e)===b)return a[d].substr(e+1)||"";return""};e._$getStringLen=function(a){for(var a=a||"",b=0,c=0,d=a.length;c<d;c++)b+=255<a.charCodeAt(c)?2:1;return b};var b=["http://www.lofter.com/control",
"https://www.lofter.com/theme"];e.isInReferrerBlackList=function(a){a=U._$trim(a);if(!a)return!1;for(var c=0;c<b.length;c++)if(b[c]){if(0==a.indexOf(b[c]))return!0}else break;return!1};e._$getUserUrl=function(a){a=a||"";return!a&&"http://www.lofter.com"||"http://"+a+".lofter.com"};e._$getPostUrl=function(a,b,c){return this._$getUserUrl(a)+"/post/"+c.toString(16)+"_"+b.toString(16)};e._$getValue=function(a){var b=window[a];try{if(!delete window[a])throw"";}catch(c){window[a]=void 0}return b};e._$getAvator=
function(a,b){b=b||64;return a?140<b?a:"http://imgsize.ph.126.net/?imgurl="+a+"_"+b+"x"+b+"x0.jpg":30>=b?location.dirhost+"/rsc/img/ava/30.png":64>=b?location.dirhost+"/rsc/img/ava/64.png":location.dirhost+"/rsc/img/ava/110.png"};e._$imgResize=function(a,b,c,d,g,f){if(!a)return null;d=d||0;g=g||!1;f=300<=b?f||95:f||90;if(0<=a.toLowerCase().indexOf("http://imgsize.ph.126.net")){var a=e._$getParmvalByKey(a,"imgurl","?")||"",h=a.lastIndexOf("_");a&&0<=h&&(a=a.substring(0,h));if(!a)return null}if(!b||
0>b)return a;if(!c||0>c)c=b;f=parseInt(f)||0;100<f&&(f=100);return 0<a.indexOf("nos.netease.com")||0<a.indexOf("nosdn.127.net")||0<a.indexOf("nosdn0.126.net")?(f=a,f="thumbnail="+b+(1==d?"y":"x")+c+(g?"&enlarge=1":""),/\.gif/.test(a)?500>b&&(f+="&type=jpg"):f+="&type=jpg",f=/thumbnail=\d+[xyz]\d+/.test(a)?a.replace(/thumbnail=\d+[xyz]\d+/,f):a.replace(/imageView/,"imageView&"+f),/watermark&/.test(f)&&(a=8,c=10,d=240,1680<=b?(a=32,c=36,d=680):500<b?(a=16,c=20,d=360):300<=b&&(a=8,c=10,d=240),f=f.replace(/dx=\d+/,
"dx="+a),f=f.replace(/dy=\d+/,"dy="+c),f=f.replace(/fontsize=\d+/,"fontsize="+d)),f):"http://imgsize.ph.126.net/?"+(g?"enlarge=true&":"")+"imgurl="+a+"_"+b+"x"+c+"x"+d+(0<f?"x"+f:"")+".jpg"};e._$getLoginUrl=function(a){return this._$getUserUrl()+"/login"+(a?"?target="+encodeURIComponent(a):"")};B._$placeholder="placeholder"in l;delete l;e._$enablePlaceholder=function(a,b){var b=b||"",c,d,g;if(!B._$placeholder&&a)if(a=E._$getElement(a),U._$isType(a,"array")){d=0;for(g=a.length;d<g;d++)e._$enablePlaceholder(a[d],
b)}else""==a.value&&(a.value=a.getAttribute("placeholder")),V._$addEvent(a,"focus",function(){c=a.getAttribute("placeholder");if(a.value==c)a.value="";b&&E._$addClassName(a,b)}),V._$addEvent(a,"blur",function(){c=a.getAttribute("placeholder");if(!a.value){a.value=c;b&&E._$delClassName(a,b)}})};e._$getTypeText=function(a){switch(a||1){case 1:return"\u6587\u5b57";case 2:return"\u56fe\u7247";case 3:return"\u97f3\u4e50";case 4:return"\u89c6\u9891";case 5:return"\u95ee\u7b54";case 6:return"\u957f\u6587\u7ae0";
default:return"\u6587\u5b57"}};P(N.ui)._$pushStyle("#<proxy-span2>{position:absolute;z-index:-1;left:0;bottom:0;width:370px;height:0;overflow:hidden;visibility:hidden;word-wrap:break-word;word-break:break-all;}\t\t            #<proxy-span2> .proxy-span{position:absolute;visibility:hidden;width:370px;line-height:20px;}","proxy-span2");e._$enableAutoMultiLine=function(a,b){var c=document.cloneElement("span","proxy-span2"),d=document.cloneElement("span","proxy-span");c.appendChild(d);b&&(d.style.width=
c.style.width=b+"px");a.insertAdjacentElement("afterEnd",c);V._$addEvent(a,"input",function(){if(a.value){if(a.value.length>200)a.value=a.value.substring(0,200);var b=a.value.replace(/\n/g,"<br>"),b=b.replace(/<br>$/,"<br>&nbsp;");d.innerText=b;a.style.height=d.clientHeight>20?d.clientHeight+"px":"20px"}else a.style.height="20px"});return d};e._$enableCtrlEnterSubmit=function(a,b){a&&b&&V._$addEvent(a,"keydown",function(a){var c=a&&(a.which||a.keyCode)||0;a&&a.ctrlKey&&13==c&&b.call()})};e._$hideOutdatedBrowserBanner=
function(a){V._$stop(a);E._$delClassName(document.body,"p-tmsg2");E._$addClassName(this.__outdatedBrowserBanner,"f-dn");U._$setCookie("OutdatedBrowserBanner","1",".lofter.com",30,"/");this.__isShowOutdatedBrowserBanner=!1;this.__showForeverEntryNode()};e._$showOutdatedBrowserBanner=function(){if("1"!=U._$getCookie("OutdatedBrowserBanner")&&B._$ISOLDIE){E._$addClassName(document.body,"p-tmsg2");var a=document.createElement("div");document.body.insertAdjacentElement("afterBegin",a);a.className="m-tmsg2";
a.innerHTML='<p>\u6e29\u99a8\u63d0\u793a\uff1a\u4f7f\u7528<a href="http://www.google.com/chrome" target="_blank">Chrome</a>\u3001<a href="http://firefox.com.cn/download/" target="_blank">Firefox</a>\u3001<a href="http://windows.microsoft.com/zh-CN/windows/downloads" target="_blank">IE7\u4ee5\u4e0a\u7248\u672c</a>\u7b49\u6700\u65b0\u6d4f\u89c8\u5668\u8bbf\u95eeLOFTER\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u89c6\u89c9\u4f53\u9a8c\uff01</p><a href="#" id="closeOutdatedBrowserBanner" class="w-close2">\u5173\u95ed</a>';
this.__outdatedBrowserBanner=a;a=E._$getElement("closeOutdatedBrowserBanner");V._$addEvent(a,"click",this._$hideOutdatedBrowserBanner._$bind(this));this.__isShowOutdatedBrowserBanner=!0}};e._$datetime=function(a){var b=new Date,c=new Date(a),d=b.getTime()-a;if(468E5<d)return U._$format(a,(c.getFullYear()!=b.getFullYear()?"yyyy/":"")+"MM/dd HH:mm");for(a=12;0<a;a--)if(d>36E5*a)return a+"\u5c0f\u65f6\u524d";return 18E5<d?"\u534a\u5c0f\u65f6\u524d":9E5<d?"\u4e00\u523b\u949f\u524d":6E5<d?"10\u5206\u949f\u524d":
3E5<d?"5\u5206\u949f\u524d":"1\u5206\u949f\u524d"};e._$showForbidUserMsg=function(){E._$showError("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u5e10\u53f7\u89e3\u5c01\u540e\u518d\u8bd5\uff01",!0)};e._$isValidEmail=function(a){return!!a&&4<a.length&&/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)};e._$initForeverEntry=function(){};e.__showForeverEntryNode=function(){B._$ISOLDIE?this.__doShowForeverEntry():(this.__foreverEntryTimer&&(this.__foreverEntryTimer=window.clearTimeout(this.__foreverEntryTimer)),
this.__foreverEntryTimer=window.setTimeout(this.__doShowForeverEntry._$bind(this),10))};e.__doShowForeverEntry=function(){var a=this._$getScrollTop(),b=this.__rightSide.clientHeight||this.__rightSide.offsetHeight||300,c=document.documentElement||document.body,d=E._$getElementsByClassName(document.body,"mlistimg").length;0<d&&20>=d&&(this.__limitHeight=this.__bd.offsetHeight>b+100?this.__bd.offsetHeight:b+100);c=c.clientHeight||0;a+c>b+220&&a+c<this.__limitHeight+220?(B._$ISOLDIE&&(b=this.__foreverEntryNode.style.left=
0,this.__isShowOutdatedBrowserBanner&&(b=46),this.__foreverEntryNode.style.top=a+c-163-b+"px"),this.__foreverEntryTimer_1&&(this.__foreverEntryTimer_1=window.clearTimeout(this.__foreverEntryTimer_1)),E._$addClassName(this.__foreverEntryNode,"js-foreverEntry-show-1"),E._$addClassName(this.__foreverEntryNode,"js-foreverEntry-show")):(E._$delClassName(this.__foreverEntryNode,"js-foreverEntry-show"),this.__foreverEntryTimer_1&&(this.__foreverEntryTimer_1=window.clearTimeout(this.__foreverEntryTimer_1)),
this.__foreverEntryTimer_1=window.setTimeout(function(){E._$delClassName(this.__foreverEntryNode,"js-foreverEntry-show-1")}._$bind(this),300))};e._$imageProtect=function(a){var b="";0<a.citeRootBlogId&&a.citeRootBlogInfo?(b=a.citeRootBlogInfo.blogNickName||"",b='<a href="'+loft.x._$getPostUrl(a.citeRootBlogInfo.blogName,a.citeRootPostId,a.citeRootBlogId)+'" target="_blank">\u8f6c\u8f7d\u81ea&nbsp;&nbsp;'+b+"</a>"):a.blogInfo.imageProtected&&(b="&copy;"+a.blogInfo.blogNickName);return b};e._$cutString=
function(a,b,c){return a?(b=U._$subString(a,b),c&&b.length<a.length&&(b+="..."),b):a};e._$filterUEditorPasteContent=function(a){a&&a.addListener("afterpaste",this.__doFilterAfterPaste._$bind(this,a))};e.__doFilterAfterPaste=function(a){if(a&&a.document&&a.document.getElementsByTagName){for(var b=a.document.getElementsByTagName("span")||[],c=0;c<b.length;c++){var d=b[c].style.textDecoration||"";b[c].style.cssText="";"underline"==d.toLowerCase()?b[c].style.textDecoration=d:"line-through"==d.toLowerCase()&&
(b[c].style.textDecoration=d)}b=a.document.getElementsByTagName("ol")||[];for(c=0;c<b.length;c++)b[c].style.cssText="",b[c].style.listStyleType="decimal";b=a.document.getElementsByTagName("ul")||[];for(c=0;c<b.length;c++)b[c].style.cssText="",b[c].style.listStyleType="disc"}};e._$fixEidtorPasteForChrome=function(a){B._$ISSF&&a&&a.addListener("afterpaste",this.__afterEditorPaste._$bind(this,a))};e.__afterEditorPaste=function(a){if(a&&a.document&&a.document.getElementsByTagName&&(a=a.document.getElementsByTagName("span"))&&
!(0>=a.length))for(var b=0;b<a.length;b++)a[b].style.whiteSpace=""};e._$clearSpanStyle4EidtorPaste=function(a){a&&a.addListener("afterpaste",function(a){if(a&&a.document&&a.document.getElementsByTagName&&(a=a.document.getElementsByTagName("span"))&&!(0>=a.length))for(var b=0;b<a.length;b++){var c=a[b].style.textDecoration||"";a[b].style.cssText="";c&&(a[b].style.textDecoration=c)}}._$bind(this,a))};e.stopEvent=V._$stop;e._$isSafari=function(){var a=window.navigator.userAgent.toLowerCase(),b=!1;if(0<=
a.indexOf("safari"))try{b=a.match(/version\/([\d.]+)/)[1]}catch(c){}return b};e._$isIpad=function(){return 0<=window.navigator.userAgent.toLowerCase().indexOf("ipad")};e._$getIosVersion=function(){/OS ([0-9]_\d[_\d]*) like Mac OS X/i.test(window.navigator.userAgent);return RegExp.$1||""};var c=/(?:<embed.*?>)|(?:<\/embed>)/gi;e._$filterMediaContent=function(a){return(a||"").replace(c,"")};e._$imageLoadResize=function(a,b){b=b||125;if(a){var c=V._$getElement(a);if(c){if(c.clientWidth>c.clientHeight){c.style.height=
b+"px";c.style.width="auto";var d=c.clientWidth,e=c.clientHeight||1;c.style.left=-((b*d/e-b)/2)+"px"}else c.style.width=b+"px",c.style.height="auto",d=c.clientWidth,e=c.clientHeight||1,c.style.top=-((b*e/d-b)/2)+"px";c.style.visibility="visible"}}};e._$editDivFocus=function(a,b){a.focus();a.innerHTML=U._$escape(b);if(!B._$ISIE){var c=window.getSelection?window.getSelection():document.selection,d=c.createRange?c.createRange():c.getRangeAt(0),e=a.lastChild;d.setEndAfter(e);d.setStartAfter(e);c.removeAllRanges();
c.addRange(d)}};e._$filterMailToAndAutoATag=function(a,b){if(a){for(var c=a.getElementsByTagName("a"),d=c.length-1;-1<d;d--)if("A"===c[d].tagName&&(0<=c[d].href.indexOf("mailto")||""===c[d].className))c[d].outerHTML=c[d].innerHTML;return b?a.innerHTML.replace(/^(<p>&nbsp;<\/p>(\r)?(\n)?)*/ig,"").replace(/(<p>&nbsp;<\/p>(\r)?(\n)?)*$/ig,"").replace(/<\/p>/ig,"").replace(/<p>/ig,"<br>").replace(/^(<br>)?/ig,""):a.innerHTML}};e._$cursorInATag=function(a){this.__window=a?document.getElementById(a).contentWindow:
window;var a=this.__window.getSelection?this.__window.getSelection():document.selection,b=a.createRange?a.createRange():a.getRangeAt(0),c=!1;this.__window.getSelection||b.parentElement();if("A"===(this.__window.getSelection?a.anchorNode.parentNode.tagName.toUpperCase():b.parentElement().nodeName.toUpperCase()))c=!0;return c};e._$showErrorFollowMsg=function(a){-100==a?E._$showError("\u60a8\u5173\u6ce8\u5f97\u592a\u5feb\u4e86\uff0c\u8bf7\u4f11\u606f\u4e00\u4e0b\u3002",!0):-2==a?E._$showError("\u60a8\u5df2\u7ecf\u5173\u6ce8\u8be5\u535a\u5ba2\u3002",
!0):-4==a?E._$showError("\u535a\u5ba2\u5df2\u7ecf\u4e0d\u5b58\u5728\uff0c\u4e0d\u5141\u8bb8\u5173\u6ce8\u3002",!0):-6==a?E._$showError("\u5173\u6ce8\u5931\u8d25\uff0c\u60a8\u5173\u6ce8\u535a\u5ba2\u7684\u603b\u6570\u5df2\u7ecf\u8d85\u8fc7\u9650\u5236\u3002",!0):-7==a?E._$showError("\u52a0\u5bc6\u535a\u5ba2\uff0c\u65e0\u6cd5\u5173\u6ce8\uff01",!0):-8==a?E._$showError("\u7531\u4e8e\u7528\u6237\u6743\u9650\u8bbe\u7f6e\uff0c\u60a8\u65e0\u6cd5\u5173\u6ce8\u8be5\u7528\u6237\uff01",!0):0>=a&&E._$showError("\u5173\u6ce8\u5931\u8d25\uff0c\u9519\u8bef\u7801: "+
a,!0)};e._$checkIE=function(){return null!=/(msie\s|trident.*rv:)([\w.]+)/.exec(navigator.userAgent.toLowerCase())?!0:!1};e._$setSPCarNum=function(){e._$showDldTipsInIpad();var a=E._$getElement("artCart"),b=U._$getCookie("spcartmessages")||"";b?(b=U._$parseJSON(decodeURIComponent(b)))&&0<b.length?(a.innerText="\u8d2d\u7269\u8f66("+b.length+")",a.style.display=""):U._$delCookie("spcartmessages",".lofter.com","/"):(a.innerText="\u8d2d\u7269\u8f66(0)",U._$delCookie("spcartmessages",".lofter.com","/"))};
e._$showDldTipsInIpad=function(){if(e._$isIpad()&&E._$getElement("showDldTipsInIpad")){var a=E._$getElement("showDldTipsInIpad"),b=a.getElementsByClassName("w-close2")[0],c=U._$getCookie("showDldTipsInIpadStatus")||"",d=E._$getElement("m-blogSetting");c?d&&E._$delClassName(d,"js-showDldTipsInIpad"):(d&&E._$addClassName(d,"js-showDldTipsInIpad"),E._$delClassName(a,"f-dn"),V._$addEvent(b,"click",function(b){V._$stop(b);E._$addClassName(a,"f-dn");d&&E._$delClassName(d,"js-showDldTipsInIpad");U._$setCookie("showDldTipsInIpadStatus",
"1",".lofter.com",5,"/")}))}};e._$setFistClickStatus=function(a,b,c){var d=decodeURIComponent(U._$getCookie(b))||"",e=E._$getElementsByClassName(a,"w-tip")[0]||a;d==c?e.style.display="none":(e.style.display="block",V._$addEvent(a,"click",this.__onSetFistClickStatus._$bind(this,e,b,c)))};e.__onSetFistClickStatus=function(a,b,c){a.style.display="none";U._$setCookie(b,c,".lofter.com",300,"/")};e._$eventStatistic=function(a,b,c,d,e,g){a=a||"_trackEvent";b=b||"";c=c||"";d=d||"";g=g||400;e&&U._$isType(e,
"function")&&(e=function(a){var b=function(){b.isExeced||(b.isExeced=!0,a())};return b}(e),setTimeout(e,g),window._gaq.push(["_set","hitCallback",e]));window._gaq.push([a,b,c,d]);window._gaq.push(["_set","hitCallback",null])};e._$eventStatisticForLOFTER5=function(a,b,c,d,e,g,f,h,i,j,l,u){a=a||"_trackEvent";b=b||"";c=c||"";d=(d||"")+"###"+JSON.stringify({userid:e,itemid:g,itemid2:f,itemtype2:h,actiontype:i,Recommend_business_name:j,Recommend_scene_name:l,actionTime:u});window._gaq.push([a,b,c,d]);
window._gaq.push(["_set","hitCallback",null])};e._$eventStatisticForLongText=function(a,b,c,d){window._gaq.push([a||"_trackEvent",b||"",c||"",d||""]);window._gaq.push(["_set","hitCallback",null])};e._$eventStatisticForLOFTER6=function(){for(var a=Array.prototype.slice.apply(arguments),b="sceneName itemId itemType actionType puid platform actionTime uid actionCost".split(" "),c={},d=0;d<a.length;d++)"platform"==b[d]||"actionTime"==b[d]||"actionCost"==b[d]?c[b[d]]=a[d]||0:(a[d]=a[d]||"",c[b[d]]=a[d].toString()||
"");this._$sendRequest("http://da.lofter.com/datacollect/recdata/action.do",{url:"http://da.lofter.com/datacollect/recdata/action.do",method:"POST",sync:!1,ctype:"application/json; charset=utf-8",rtype:"text",data:JSON.stringify(c),onload:function(){},onerror:function(){}})};e._$sendRequest=function(a,b){var c=this.__getXMLHTTPRequest();if(null==c)alert("\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301AJAX\uff01");else{var d=b.ctype||"application/x-www-form-urlencoded";c.open(b.method,a,!b.sync);
c.setRequestHeader("Content-type",d);if(b.headers)for(var e in b.headers)c.setRequestHeader(e,b.headers[e]);c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var a;switch(b.rtype){case "xml":a=c.responseXML;break;case "text":a=c.responseText;break;case "json":try{a=eval("("+c.responseText+")")}catch(d){}break;default:a=c.responseText}if(b.onload)b.onload(a)}};c.send(b.data)}};e.__getXMLHTTPRequest=function(){var a=null;if(window.XMLHttpRequest)a=new XMLHttpRequest;else try{a=ActiveXobject("Msxml2.XMLHTTP")}catch(b){try{a=
ActiveXobject("Microsoft.XMLHTTP")}catch(c){a=null}}return a};e._$isShow=function(a){var b=-999;if(!a)return b;var c=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset||0,d=c+(window.innerHeight||(document.documentElement.clientHeight||document.body.clientHeight)||0),e=E._$offsetY(a),a=e+a.clientHeight;return 0==c&&0==d||0==e&&0==a?b:a<c?-1:e>d?1:0};e._$getAncestorATag=function(a){for(;a&&a!=document.body;){if(a.tagName&&"a"==a.tagName.toLowerCase())return a;a=a.parentNode}};
e.globalEventStatistic=function(a,b,c,d,g,f,h,i){var a=a?a:window.event,j;a&&b&&(j=e._$getAncestorATag(b));if(j){var l=U._$trim(j.href||"");if("_blank"!=U._$trim(j.target||"").toLowerCase())V._$stopDefault(a),!h&&l&&(h=function(){location.href=l})}e._$eventStatistic(c,d,g,f,h,i)};e._$getListByRand=function(a,b){var a=a||[],c=loft.x._$clone(a),d=c.length||0,b=b||d;b>d&&(b=d);if(0<d){for(var d={},e=[],g=-1,f;0<c.length&&e.length<b;)g=U._$rand(0,c.length),f=c[g],c.splice(g,1),f&&!d[f]&&(d[f]=f,e.push(f));
c=e}return c};e._$ready=function(a){if(a&&U._$isType(a,"function")){var b=function(c){"complete"===document.readyState?setTimeout(function(){b.isExced||(b.isExced=!0,a())},1):c&&(document.addEventListener?(document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",b,!1)):(document.attachEvent("onreadystatechange",b),window.attachEvent("onload",b)))};b(!0)}};e._$appendActivityTags=function(a){if(a){loft.c._$activityTags=loft.c._$activityTags||[];U._$isType(a,"string")&&(a=a.split(","));
for(var b=0;b<a.length;b++)0>U._$indexOf(loft.c._$activityTags,function(a,b){return a===b}._$bind(this,a[b]))&&loft.c._$activityTags.push(a[b])}};e._$dealActivityTags=function(a){if(a)if(U._$isType(a,"object")&&a.activityTags)loft.x._$appendActivityTags(a.activityTags);else if(U._$isType(a,"array")&&a.length)for(var b=0;b<a.length;b++)a[b]&&a[b].activityTags&&loft.x._$appendActivityTags(a[b].activityTags)};var g=".baidu.com www.163.com bbs.163.com blog.163.com mail.163.com pp.163.com photo.163.com reg.163.com weibo.com".split(" "),
h=function(a,b){if(!a)return-1;for(var b=b||[],c=0;c<b.length;c++)if(0<=a.indexOf(b[c]))return c;return-1};e._$outDomainsStatistic=function(){var a=U._$getCookie("referrer4statistic");try{a=unescape(a||"")}catch(b){}if(a&&(U._$delCookie("referrer4statistic","www.lofter.com","/"),a=h(a,g),0<=a)){e._$eventStatistic("_trackEvent","\u5916\u90e8\u6d41\u91cf",g[a],"");return}if(a=document.referrer||"")a=h(a,g),0<=a&&g[a]&&e._$eventStatistic("_trackEvent","\u5916\u90e8\u6d41\u91cf",g[a],"")};e._$isLofterEditors=
function(){return!0};e.hashCode=function(a,b){b||(a=a.toLowerCase());var c=1315423911,d,e;for(d=a.length-1;0<=d;d--)e=a.charCodeAt(d),c^=(c<<5)+e+(c>>2);return c&2147483647};e._$isNosImg=function(a){a=a||"";return 0<=a.indexOf("nos.netease.com")||0<=a.indexOf("nosdn.127.net")||0<=a.indexOf("nosdn0.126.net")?!0:!1};e._$analyzeNosImg=function(a,b){if(!a||!loft.x._$isNosImg(a))return null;var b=b||{},c={imageView:{},watermark:{}};b.ow&&(c.ow=b.ow);b.oh&&(c.oh=b.oh);var d=a.split("?");c.raw=d[0];for(var d=
(d[1]||"").split("%7C")||[],e=0;e<d.length;e++)if(d[e]&&0<=d[e].indexOf("imageView"))for(var g=d[e].split("&")||[],f=0;f<g.length;f++){if(g[f]){var h=g[f].split("=");c.imageView[h[0]]=h[1]}}else if(d[e]&&0<=d[e].indexOf("watermark")){g=d[e].split("&")||[];for(f=0;f<g.length;f++)g[f]&&(h=g[f].split("="),c.watermark[h[0]]=h[1])}return c};e._$watermak4NosImg=function(a,b){a=a||{};a.imageView=a.imageView||{};var c=a.imageView.rotate||0,d=a.ow||0,e=a.oh||0;if(90==c||270==c)d=e;b=b||500;0<d&&d<b&&(b=d);
c=8;d=10;e=240;if(1680<=b)c=32,d=36,e=680;else if(500<b)c=16,d=20,e=360;else if(300<=b)c=8,d=10,e=240;else return"";var g="watermark",f=a.watermark||{},h;for(h in f)h&&("watermark"!=h&&f[h])&&(g="fontsize"==h?g+"&"+h+"="+e:"dx"==h?g+"&"+h+"="+c:"dy"==h?g+"&"+h+"="+d:g+"&"+h+"="+f[h]);"watermark"==g&&(g="");return g};e._$imageView4NosImg=function(a){var a=a||{},b="imageView",a=a.imageView||{},c;for(c in a)c&&("imageView"!=c&&a[c])&&(b=b+"&"+c+"="+a[c]);return b};e._$parsePermalink=function(a){if(a){var b=
{},c=a.indexOf("_");if(0<c&&c<a.length)try{b.blogId=parseInt(a.substring(0,c),16),b.postId=parseInt(a.substring(c+1,a.length),16)}catch(d){}return b}};e._$filterDigest=function(a){return a=(a||"").replace(/<.*?>/g,"")};e._$parseFirstImageUrl=function(a){return U._$parseJSON(a)};e._$loadStubImg=function(a,b,c){b=b||"imgsrc";if(a=a||document.body)if(a=c?a.getElementsByClassName(c):a.getElementsByTagName("img"),c=(a||O).length||0,a&&0<c)for(var d=0;d<c;d++)if(a[d]){var e=a[d].getAttribute(b);e&&a[d].src!=
e&&(a[d].src=e)}};e._$accAdd=function(a,b){var c,d;try{c=a.toString().split(".")[1].length}catch(e){c=0}try{d=b.toString().split(".")[1].length}catch(g){d=0}c=Math.pow(10,Math.max(c,d));return Math.round(a*c+b*c)/c};e._$accMultiply=function(a,b){var c,d;try{c=a.toString().split(".")[1].length}catch(e){c=0}try{d=b.toString().split(".")[1].length}catch(g){d=0}c=Math.pow(10,Math.max(c,d));return 0==c?a*b:Math.round(a*c*b*c)/(c*c)};e._$parseURL=function(a){var b=document.createElement("a");b.href=a;for(var c=
b.origin||b.protocol+"//"+b.host,d=b.protocol,e=b.protocol.replace(":",""),g=b.host,f=b.hostname,h=b.port,i=b.search,j={},l=b.search.replace(/^\?/,"").split("&"),u=l.length,s=0,v;s<u;s++)l[s]&&(v=l[s].split("="),j[v[0]]=v[1]);return{source:a,origin:c,protocol:d,protocolname:e,host:g,hostname:f,port:h,search:i,params:j,file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,
"").split("/")}}});define("{pro}widget/photo/photoshow.js",["{pro}system.js","{lib}ui/abstract.js","{lib}util/item.js","{lib}util/extend/md5.js"],function(){var j=P("loft.w"),f,e=!1,l={};j._$$PhotoShow=C();f=j._$$PhotoShow._$extend(P(N.ui)._$$UIAbstract,!0);f._$initialize=function(){this._$super.apply(this,arguments);P("loft.g").stopBubble=V._$stopBubble};f._$resetOption=function(b){b=b||O;j._$$PhotoShow._$supro._$resetOption.call(this,b);window.__photo_showing_lock__=!0;V._$addEvent(document,"keydown",this.__onShortcutPressBind);
window.addEventListener&&window.addEventListener("DOMMouseScroll",this.__onMouseWheelBind,!1);V._$addEvent(document,"mousewheel",this.__onMouseWheelBind);this.__scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;b=document.documentElement||document.body;this.__bodyOverflowY=b.style.overflowY;this.__bodyOverflowX=b.style.overflowX;b.style.overflowY="hidden";b.style.overflowX="hidden";this.__scrollTopNow=window.pageYOffset||document.documentElement.scrollTop||
document.body.scrollTop||0};f._$reset=function(b,c){j._$$PhotoShow._$supro._$reset.call(this,b,c);this.__photos=c.photos||[];this.__index=c.index||0;window.Theme=window.Theme||O;this.__pOption={cctype:c.cctype||window.Theme.CcType||0,imageProtected:!!c.contextValue||!!window.Theme.ImageProtected,contextValue:c.contextValue||window.Theme.ContextValue||"",firstShowPhoto:this.__photos[this.__index],authorId:c.authorId};this.__resetPhoto()};f.__resetPhoto=function(){var b=document.documentElement||document.body;
B._$ISOLDIE&&(this.__cover.style.width=b.scrollWidth+"px",this.__cover.style.height=b.scrollHeight+"px");window.setTimeout(function(){this.__cover.style.opacity=0.9}._$bind(this),1);this.__table.style.top=this.__scrollTopNow+"px";this.__prior.style.display=this.__next.style.display=1>=this.__photos.length?"none":"";this.__showPhotoAtCurrentIndex();this.__photosCT.style.display="";e=!1;this.__photoItems=j._$$PhotoItem._$allocate(this.__photos,this.__photosCT,this.__pOption);this.__resize();this.__sizeTimer=
window.setInterval(this.__resize._$bind(this),280)};f.__resize=function(){var b=document.documentElement||document.body,c=b.clientWidth,b=b.clientHeight;this.__photoItems[this.__index]._$resize();this.__photosCT.style.width=c*this.__photos.length+"px";this.__table.style.height=b+"px";this.__next.style.left=c-60+"px"};f.__getSpace=function(){return"widgetcommon photoshow"};f.__getXhtml=function(){return'<div class="a-show-mask m-mask wtag" style="opacity:0;"></div>\t\t\t<table class="m-bphoto wtag"><tbody><tr><td>\t\t\t\t<div class="photos wtag" style="position:absolute;_position:relative;left:0;top:0;width:1000000px;height:100%;"></div>\t\t\t\t<a title="\u4e0a\u4e00\u5f20" class="wtag w-pctrl w-pctrl-pre" href="#">\u4e0a\u4e00\u5f20</a>\t\t\t\t<a title="\u4e0b\u4e00\u5f20" class="wtag w-pctrl w-pctrl-nxt" href="#" style="right:auto;">\u4e0b\u4e00\u5f20</a>\t\t\t</td></tr></tbody></table>'};
f._$destroy=function(){j._$$PhotoShow._$supro._$destroy.call(this);this.__sizeTimer&&window.clearInterval(this.__sizeTimer);this.__photoItems=j._$$PhotoItem._$recycle(this.__photoItems);this.__photosCT.style.display="none";this.__cover.style.opacity=0;V._$delEvent(document,"keydown",this.__onShortcutPressBind);try{document.removeEventListener("keydown",this.__onShortcutPressBind,!1)}catch(b){}window.__photo_showing_lock__=!1;window.removeEventListener&&window.removeEventListener("DOMMouseScroll",
this.__onMouseWheelBind,!1);V._$delEvent(document,"mousewheel",this.__onMouseWheelBind)};f.__intXnode=function(){var b=E._$getElementsByClassName(this.__body,"wtag"),c=0;this.__cover=b[c++];this.__table=b[c++];this.__photosCT=b[c++];this.__prior=b[c++];this.__next=b[c++];V._$addEvent(this.__body,"click",this.__onBodyClick._$bind(this));V._$addEvent(this.__prior,"click",this.__onNext._$bind(this,-1));V._$addEvent(this.__next,"click",this.__onNext._$bind(this,1));this.__onShortcutPressBind=this.__onShortcutPress._$bind(this);
this.__onMouseWheelBind=this.__onMouseWheel._$bind(this)};f.__onBodyClick=function(b){V._$getElement(b)==this.__photoItems[this.__index].__img?this.__index+1==this.__photos.length?this.__onExit(b):this.__onNext(1,b):this.__onExit(b)};f.__onNext=function(b,c){V._$stop(c);if(this.__photos&&!(1>=this.__photos.length)){var d=this.__index,e=(this.__index+b+this.__photos.length)%this.__photos.length;this.__index=e;this.__photoItems[d]._$dispear();this.__photoItems[e]._$appear();this.__showPhotoAtCurrentIndex()}};
f.__showPhotoAtCurrentIndex=function(){this.__photosCT.style.left=-(document.documentElement||document.body).clientWidth*this.__index+"px"};f.__onMouseWheel=function(b){var c=0;b.wheelDelta?(c=b.wheelDelta/Math.abs(b.wheelDelta),B._$ISOP&&(c=-c)):b.detail&&(c=-b.detail/Math.abs(b.detail));this.__onNext(-c)};var i=[37,38,39,40,27];f.__onShortcutPress=function(b){var c=U._$indexOf(i,b&&(b.which||b.keyCode));V._$stop(b);if(-1!=c)switch(V._$getElement(b),c){case 0:case 1:this.__onNext(-1);break;case 2:case 3:this.__onNext(1);
break;case 4:this.__onExit()}};f.__onExit=function(b){V._$stop(b);b=document.documentElement||document.body;b.style.overflowY=this.__bodyOverflowY||"";b.style.overflowX=this.__bodyOverflowX||"";document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop;j._$$PhotoShow._$recycle(this);V._$dispatchEvent(document.body,"exitView")};var d=E._$addNodeTemplate('<table class="photowrap" style="width:1640px;"><tr><td>\t\t\t\t\t\t<div class="bphoto" style="background-color:transparent;">\t\t\t\t\t\t\t<img class="xtag a-show a-show-photo">\t\t\t\t\t\t\t<a class="rphlink xtag" href="#" target="_blank" style="display:none;">\u67e5\u770b\u539f\u56fe\uff081280x1024\uff09&gt;</a>\t\t\t\t\t\t\t<div class="rinfo xtag" onclick="loft.g.stopBubble(event);" style="display:none;transition:opacity 0.3s;-webkit-transition:opacity 0.3s;-moz-transition:opacity 0.3s;-o-transition:opacity 0.3s;"></div>\t\t\t\t\t\t\t<div class="w-load2 xtag" style="display:none;"><div class="load">&nbsp;</div></div>\t\t\t\t\t\t</div>\t\t\t\t\t</td></tr></table>');
j._$$PhotoItem=C();f=j._$$PhotoItem._$extend(P(N.ut)._$$Item,!0);f._$initialize=function(){P("loft.g").cbJSONPExif=function(b){var b=b||{},b=b.response,c;a:{var a=b;if(a){if(!0!==a.valid){c=!1;break a}for(c in a)if(a.hasOwnProperty(c)&&"valid"!=c&&a[c]&&"0 EV"!=a[c]){c=!0;break a}}c=!1}c||(b=null);c=loft.g.cbJSONPExif.key||"";loft.g.cbJSONPExif.key="";this.__cbLoadExif(c,b)}._$bind(this);this._$super(d);this.__exifJST=E._$addHtmlTemplate("<div class=\"exif\" style=\"display:none;\" onclick=\"loft.g.stopBubble(event);\">                    <div class=\"exifbg\"></div>                    <a class=\"w-ii\"  onclick=\"this.parentNode.className= 'exif exif-open'\"></a><a class=\"w-ii w-ii-hover\" onclick=\"this.parentNode.className='exif'\"></a>                    <table>                        <tbody>                            <tr><th>\u54c1\u724c</th><td>${make||'-'}</td></tr>                            <tr><th>\u578b\u53f7</th><td>${model||'-'}</td></tr>                            <tr><th>\u7126\u8ddd</th><td>${focalLength||'-'}</td></tr>                            <tr><th>\u5149\u5708</th><td>${apertureValue||'-'}</td></tr>                            <tr><th>\u5feb\u95e8\u901f\u5ea6</th><td>${exposureTime||'-'}</td></tr>                            <tr><th>ISO</th><td>${isoSpeedRatings||'-'}</td></tr>                            <tr><th>\u66dd\u5149\u8865\u507f</th><td>${exposureBiasValue||'-'}</td></tr>                            <tr><th>\u955c\u5934</th><td><div class=\"exifitm\" title=\"${lens||''}\">${lens||'-'}</div></td></tr>                        </tbody>                    </table>                </div>");
var b=E._$getElementsByClassName(this.__body,"xtag"),c=0;this.__img=b[c++];this.__openOrign=b[c++];this.__contextMenu=b[c++];this.__loading=b[c++];V._$addEvent(this.__openOrign,"click",V._$stopBubble._$bind(null));V._$addEvent(this.__img.parentNode,"contextmenu",this.__onShowContextMenu._$bind(this));V._$addEvent(this.__img.parentNode,"mouseover",this.__imageMouseOverOrOut._$bind(this,!0));V._$addEvent(this.__img.parentNode,"mouseout",this.__imageMouseOverOrOut._$bind(this,!1));"ontouchstart"in window&&
(V._$addEvent(this.__img.parentNode,"touchstart",this.__imageTouchstart._$bind(this)),V._$addEvent(this.__img.parentNode,"touchend",this.__imageTouchend._$bind(this)),this.__startTime=null);V._$addEvent(this.__img,"load",this.__onLoad._$bind(this))};f.__convert4nos=function(b){if(!b||!loft.x._$isNosImg(b.orign)||1680>=(b.ow||0))return b||{};var c={};c.ow=b.ow||1;c.oh=b.oh||1;var d=c.ow/c.oh;if(1>d){if(2E3<c.ow&&(c.ow=2E3,c.oh=parseInt(2E3/d)),5E3<c.oh)c.oh=5E3,c.ow=parseInt(5E3*d)}else if(2E3<c.oh&&
(c.oh=2E3,c.ow=parseInt(2E3*d)),3E3<c.ow)c.ow=3E3,c.oh=parseInt(3E3/d);c.orign=loft.x._$imgResize(b.orign,c.ow,c.oh,1,!1);return c};f._$setData=function(b){j._$$PhotoItem._$supro._$setData.call(this,b);this.__photo=b;this.__loadingState=!0;b=this.__convert4nos(this.__photo);this.__src=b.orign||"";this.__ow=b.ow||1;this.__oh=b.oh||1;this.__ratio=this.__ow/this.__oh;B._$ISSF&&(this.__src!=N.rc.r+"empty.png"&&this.__img.src==this.__src)&&(this.__src=this.__src+"?copyone_"+U._$randNumberString());var b=
document.documentElement||document.body,c=b.clientHeight;this.__body.style.width=b.clientWidth+"px";this.__body.style.height=c+"px";this.__img.style.visibility="hidden";this.__img.style.width="500px";this.__img.style.height=500/this.__ratio+"px";this.__img.style.display="";this.__lazyLoadImage();this.__contextMenu.style.display="none"};f.__lazyLoadImage=function(){e||this.__firstShowPhoto==this.__photo?(window.setTimeout(function(){this.__img.src=this.__src}._$bind(this),20),window.setTimeout(function(){this.__loading.style.display=
this.__loadingState?"":"none"}._$bind(this),100),this.__loadExif(this.__src)):window.setTimeout(this.__lazyLoadImage._$bind(this),100)};f._$reset=function(b){b=b||O;this.__imageProtected=!!b.imageProtected;this.__contextValue=b.contextValue||"";this.__cctype=b.cctype||0;this.__firstShowPhoto=b.firstShowPhoto;this.__authorId=b.authorId||0;this._$addEvent("onblack",b.onblack||F)};f._$destroy=function(){E._$delClassName(this.__img,"a-show-do");this.__img.src=N.rc.r+"empty.png";this.__img.style.opacity=
1;this.__img.style.display="none";this.__loading.style.display="none";E._$removeElementByEC(this.__cctypeElement);this.__openOrign.style.display="none";j._$$PhotoItem._$supro._$destroy.apply(this,arguments)};f._$dispear=function(){var b=parseInt(this.__img.style.width)||0,c=parseInt(this.__img.style.height)||0;0<b&&0<c&&(this.__img.style.height=c/4+"px",this.__img.style.width=b/4+"px");this.__img.style.opacity=0.5};f._$appear=function(){this._$resize();this.__img.style.opacity=1};f._$resize=function(){var b=
document.documentElement||document.body,c=b.clientWidth,b=b.clientHeight;this.__body.style.width=c+"px";this.__body.style.height=b+"px";this.__loadingState||(this.__ratio>c/b?this.__ow>c-100?(this.__img.style.width=c-100+"px",this.__img.style.height=(c-100)/this.__ratio+"px"):(this.__img.style.width=this.__ow+"px",this.__img.style.height=this.__oh+"px"):this.__oh>b-100?(this.__img.style.height=b-100+"px",this.__img.style.width=(b-100)*this.__ratio+"px"):(this.__img.style.height=this.__oh+"px",this.__img.style.width=
this.__ow+"px"))};f.__onLoad=function(){this.__img.src!=N.rc.r+"empty.png"&&(this.__loadingState=!1,e=!0,this.__loading.style.display="none",this.__img.style.visibility="visible",E._$addClassName(this.__img,"a-show-do"),this._$resize(),this.__resetCCType(),this.__imageProtected&&(!P("loft.c")._$$VISITOR||!loft.c._$$VISITOR.userId||!this.__isIncludeAuthorBlog()||0<this.__contextValue.indexOf("\u8f6c\u8f7d\u81ea"))?this.__openOrign.style.display="none":(this.__imageProtected?(this.__openOrign.title=
"\u4ec5\u4f5c\u8005\u53ef\u89c1",this.__openOrign.innerText="\u67e5\u770b\u539f\u56fe\uff08"+this.__ow+"x"+this.__oh+"\uff09>(\u4ec5\u4f5c\u8005\u53ef\u89c1)"):this.__openOrign.innerText="\u67e5\u770b\u539f\u56fe\uff08"+this.__ow+"x"+this.__oh+"\uff09>",this.__openOrign.style.display="",this.__openOrign.href=this.__src))};f.__isIncludeAuthorBlog=function(){for(var b=loft.c._$$BLOGS,c=0,d=b.length;c<d;c++)if(b[c].blogId===this.__authorId)return!0;return!1};f.__onShowContextMenu=function(b){if(this.__imageProtected){this.__contextMenu.innerHTML=
this.__contextValue||"TEST";var c=E._$offsetX(this.__img),d=E._$offsetY(this.__img);this.__contextMenu.style.left=V._$pointerX(b)-c+"px";this.__contextMenu.style.top=V._$pointerY(b)-d+"px";this.__contextMenu.style.opacity="0.8";this.__contextMenu.style.display="";this.__contextMenuTimer1&&(this.__contextMenuTimer1=window.clearTimeout(this.__contextMenuTimer1));this.__contextMenuTimer2&&(this.__contextMenuTimer2=window.clearTimeout(this.__contextMenuTimer2));this.__contextMenuTimer1=window.setTimeout(function(){this.__contextMenu.style.opacity=
"0"}._$bind(this),2700);this.__contextMenuTimer2=window.setTimeout(function(){this.__contextMenu.style.display="none"}._$bind(this),3E3)}return this.__imageProtected?(V._$stop(b),b.returnValue=!this.__imageProtected,!this.__imageProtected):b.returnValue=!0};f.__resetCCType=function(){var b;this.__cctypeElement&&E._$removeElement(this.__cctypeElement);switch(this.__cctype){case 1:b='<a onclick="loft.g.stopBubble(event);" href="http://creativecommons.org/licenses/by-nc-nd/2.5/deed.zh" class="w-cc1 w-cc1-1" target="_blank" title="\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u7981\u6b62\u6f14\u7ece">\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u7981\u6b62\u6f14\u7ece</a>';
break;case 2:b='<a onclick="loft.g.stopBubble(event);" href="http://creativecommons.org/licenses/by-nc-sa/2.5/deed.zh" class="w-cc1 w-cc1-2" target="_blank" title="\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab">\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab</a>';break;case 3:b='<a onclick="loft.g.stopBubble(event);" href="http://creativecommons.org/licenses/by-nc/2.5/deed.zh" class="w-cc1 w-cc1-3" target="_blank" title="\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528">\u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528</a>';
break;case 4:b='<a onclick="loft.g.stopBubble(event);" href="http://creativecommons.org/licenses/by-nd/2.5/deed.zh" class="w-cc1 w-cc1-4" target="_blank" title="\u7f72\u540d-\u7981\u6b62\u6f14\u7ece">\u7f72\u540d-\u7981\u6b62\u6f14\u7ece</a>';break;case 5:b='<a onclick="loft.g.stopBubble(event);" href="http://creativecommons.org/licenses/by-sa/2.5/deed.zh" class="w-cc1 w-cc1-5" target="_blank" title="\u7f72\u540d-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab">\u7f72\u540d-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab</a>';
break;case 6:b='<a onclick="loft.g.stopBubble(event);" href="http://creativecommons.org/licenses/by/2.5/deed.zh" class="w-cc1 w-cc1-6" target="_blank" title="\u7f72\u540d">\u7f72\u540d</a>'}b&&(this.__cctypeElement=E._$parseElement(b),this.__img.parentNode.appendChild(this.__cctypeElement))};f.__imageTouchstart=function(b){this.__imageProtected&&(V._$stop(b),this.__startTime=new Date)};f.__imageTouchend=function(b){if(this.__imageProtected&&this.__startTime){V._$stop(b);if(1E3<new Date-this.__startTime)try{this.__contextMenu.innerHTML=
this.__contextValue||"TEST";var c=E._$offsetX(this.__img),d=E._$offsetY(this.__img),e=b.touches[0]||b.changedTouches[0];this.__contextMenu.style.left=e.pageX-c+"px";this.__contextMenu.style.top=e.pageY-d+"px";this.__contextMenu.style.opacity="0.8";this.__contextMenu.style.display="";this.__contextMenuTimer1&&(this.__contextMenuTimer1=window.clearTimeout(this.__contextMenuTimer1));this.__contextMenuTimer2&&(this.__contextMenuTimer2=window.clearTimeout(this.__contextMenuTimer2));this.__contextMenuTimer1=
window.setTimeout(function(){this.__contextMenu.style.opacity="0"}._$bind(this),2700);this.__contextMenuTimer2=window.setTimeout(function(){this.__contextMenu.style.display="none"}._$bind(this),3E3)}catch(a){}this.__startTime=null}};f.__imageMouseOverOrOut=function(b,c){this.__exifElement&&(V._$getElement(c,function(b){return E._$hasClassName(b,"exif")||"IMG"==b.tagName?!0:!1})&&"exif exif-open"!==this.__exifElement.className)&&(this.__exifElement.style.display=b?"":"none")};f.__loadExif=function(b){if(b){var c=
U._$md5(b),d=l[c];this.__exifElement&&(E._$removeElement(this.__exifElement),delete this.__exifElement);d?(!U._$isType(d,"string")||!("loading"===d||"none"===d))&&this.__cbLoadExif(c,d):!/\.(?:jpg|jpeg)$/.test(b)&&!loft.x._$isNosImg(b)?l[c]="none":(l[c]="loading",loft.g.cbJSONPExif.key?window.setTimeout(function(b,a){loft.g.cbJSONPExif.key=b;var c="https://www.lofter.com/v1.1/exif.api?product=lofter-api&image="+encodeURIComponent(a)+"&callback=loft.g.cbJSONPExif";J._$loadScript(c,F)}._$bind(this,c,
b),1E3):(loft.g.cbJSONPExif.key=c,b="https://www.lofter.com/v1.1/exif.api?product=lofter-api&image="+encodeURIComponent(b)+"&callback=loft.g.cbJSONPExif",J._$loadScript(b,F)))}};f.__cbLoadExif=function(b,c){l[b]=c||"none";c&&(this.__exifElement=E._$parseElement(E._$getHtmlTemplate(this.__exifJST,c)),this.__img.parentNode.appendChild(this.__exifElement))}});define("{pro}widget/photo/pagephotoshow.js","{lib}base/global.js {lib}base/browser.js {lib}base/util.js {lib}base/element.js {lib}base/event.js {lib}base/destroy.js {lib}util/event.js {lib}util/item.js {lib}util/extend/md5.js {lib}util/extend/jst.js {lib}util/ajax/tag.js {lib}util/ajax/xdr.js {lib}util/ajax/dwr.js {lib}ui/abstract.js {pro}widget/photo/photoshow.js".split(" "),function(){var j=P("loft.w"),f,e;window.addEventListener("message",function(f){e=parseInt(f.data)});j._$$PagePhotoShow=C();
f=j._$$PagePhotoShow._$extend(P(N.ut)._$$Event);j._$$PagePhotoShow._$bind=function(e,f){if(e=E._$getElement(e))return new j._$$PagePhotoShow(e,f)};P("loft.w.g").initPagePhotoShow=function(e,f){return j._$$PagePhotoShow._$bind(e,f)};f._$initialize=function(e,f){this._$super();this.__imgsContainer=E._$getElement(e);this._$resetOption(f)};f._$resetOption=function(e){e=e||{};this.__imggroup=e.imggroup||"imggroup";this.__bigimgsrc=e.bigimgsrc||"bigimgsrc";this.__bigimgwidth=e.bigimgwidth||"bigimgwidth";
this.__bigimgheight=e.bigimgheight||"bigimgheight";this.__imgclasstag=e.imgclasstag||"imgclasstag";if(this.__imgsContainer&&this.__bigimgsrc){e=this.__imgclasstag?E._$getElementsByClassName(this.__imgsContainer,this.__imgclasstag)||[]:this.__imgsContainer.getElementsByTagName("img")||[];this.__showBigImgs=[];for(var f=0;f<e.length;f++)if(e[f].getAttribute(this.__bigimgsrc)||e[f].getAttribute("src")){this.__showBigImgs.push(e[f]);V._$addEvent(e[f],"click",this.__onShowBigImg._$bind(this,e[f]))}}};
f.__onShowBigImg=function(f,i){V._$stop(i);if(f){var d,b=[],c=f.getAttribute(this.__imggroup),g=0,h;if(c){if(!f.id){h="id_"+U._$randNumberString();f.id=h}for(var a=0,j=0;a<this.__showBigImgs.length;a++)if(this.__showBigImgs[a].getAttribute("imggroup")==c){d={};d.orign=this.__showBigImgs[a].getAttribute(this.__bigimgsrc)||this.__showBigImgs[a].getAttribute("src");d.ow=this.__showBigImgs[a].getAttribute(this.__bigimgwidth);d.oh=this.__showBigImgs[a].getAttribute(this.__bigimgheight);b.push(d);if(f.id&&
f.id==this.__showBigImgs[a].id){g=j;if(h)f.id=""}j++}}else{d={};d.orign=f.getAttribute(this.__bigimgsrc)||f.getAttribute("src");d.ow=f.getAttribute(this.__bigimgwidth);d.oh=f.getAttribute(this.__bigimgheight);b.push(d)}c=false;d.orign.indexOf(".gif")>0&&(c=true);d=window.location.href;h=d.indexOf("post")+5;d=d.substring(h);d=loft.x._$parsePermalink(d).postId;c?loft.x._$eventStatisticForLOFTER5("_trackEvent","Web\u548cWap\u7684\u6240\u6709\u9875\u9762","VIEW_ALLGIF","article",e,d,null,null,"VIEW_GIF",
null,null,null):loft.x._$eventStatisticForLOFTER5("_trackEvent","Web\u548cWap\u7684\u6240\u6709\u9875\u9762","VIEW_ALLBIGPIC","article",e,d,null,null,"VIEW_BIG_PIC",null,null,null);P("loft.w")._$$PhotoShow._$allocate(document.body,{singleton:true,index:g,photos:b})}}});define("{pro}theme/thements.js",[],function(){P("Thements.dwr").post=J._$postDataByDWR});
