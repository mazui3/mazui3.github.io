<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/star.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/star.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/star.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":265,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ab testing的定义,control group与group with testing feature中,分成两组,来统计人们的反馈进行测试比较. 个人用笔记…写的很杂,我猜除我以外的人看不懂,记着记着就成英文的了(...).">
<meta property="og:type" content="article">
<meta property="og:title" content="关于A&#x2F;B testing的笔记">
<meta property="og:url" content="http://yoursite.com/2020/11/03/P124/index.html">
<meta property="og:site_name" content="Underlake Reading Room">
<meta property="og:description" content="ab testing的定义,control group与group with testing feature中,分成两组,来统计人们的反馈进行测试比较. 个人用笔记…写的很杂,我猜除我以外的人看不懂,记着记着就成英文的了(...).">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2020/11/03/P124/P124.png">
<meta property="article:published_time" content="2020-11-03T22:31:05.000Z">
<meta property="article:modified_time" content="2020-11-28T16:54:14.610Z">
<meta property="article:author" content="Mazui">
<meta property="article:tag" content="以头抢地(诚)">
<meta property="article:tag" content="data">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/11/03/P124/P124.png">

<link rel="canonical" href="http://yoursite.com/2020/11/03/P124/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>关于A/B testing的笔记 | Underlake Reading Room</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  <!--<script type="text/javascript" src="/js/my_js/clicklove.js"></script>-->

<link rel="alternate" href="/atom.xml" title="Underlake Reading Room" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Underlake Reading Room</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">这里是图书馆外的休息室🌟</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-readme">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>ReadMe</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a>

  </li>
        <li class="menu-item menu-item-mailbox">

    <a href="/mailbox/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>Mailbox</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/03/P124/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/logo_2.png">
      <meta itemprop="name" content="Mazui">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Underlake Reading Room">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          关于A/B testing的笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-11-03 17:31:05" itemprop="dateCreated datePublished" datetime="2020-11-03T17:31:05-05:00">2020-11-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-11-28 11:54:14" itemprop="dateModified" datetime="2020-11-28T11:54:14-05:00">2020-11-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>13 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>ab testing的定义,control group与group with testing feature中,分成两组,来统计人们的反馈进行测试比较.</p>
<p>个人用笔记…写的很杂,我猜除我以外的人看不懂,记着记着就成英文的了(...). <a id="more"></a> <br> <br></p>
<h2 id="intro">intro</h2>
<p>什么不能做ab testing: - 需要测试的事件时间过长的feature. - 对并不存在的事件进行测试(可以比较已有的两种方案,但是无法统计未有的第三种方案反馈).</p>
<p>什么适合做ab testing: - clear control and clear metrics. - can give out repeatable results.</p>
<h2 id="metric-choice">metric choice</h2>
<p>(a method of measuring something, or the results obtained from this)</p>
<ul>
<li><p>click through rate #of clicks / #of page views</p></li>
<li><p>click through probabilty Unique visitors who click / Unique visitors to page</p></li>
</ul>
<p>一个是couting点击数,一个是couting访问人数.</p>
<p><br> <br></p>
<h6 id="asidebinomial-distruibution">Aside:binomial distruibution</h6>
<p><em>mean = N </em> p<em> </em>standard deviation = sqrt(N * p * (1-p))<em> standard error = sqrt(p </em> (1-p) / N)</p>
<p><em>eg.</em> We have N = 2000, with x = 300, find confidence level = 99%</p>
<p><em>sol.</em> Phat(estimated probability) = 300/2000 = 0.15 m(margin of error) = z-value(for 99%) * standard error(sqrt(p * (1-p) / N)) =&gt; 2.58 * sqrt(0.15 * 0.85 / 2000) =&gt; 0.021</p>
<p>=&gt; P = 0.15 +- 0.021 <br> <br></p>
<h2 id="hypothesis-testing">hypothesis testing</h2>
<p>null hypothesis(baseline): (例子)假设我们的改变方案不会影响任何人们的反馈(control group和experimental group没有区别).</p>
<p>alternative hypothesis: 我们想要的变化反馈. <br> <br></p>
<h2 id="pooled-standard-error">pooled standard error</h2>
<p>将control group和experimental group结合在一起的方法.</p>
<p><em>our data: Xcont Xexp Ncont Nexp</em></p>
<p>P pool hat = (Xcont + Xexp) / (Ncont + Nexp)</p>
<p>SE pool = sqrt(P pool hat * (1 - P pool hat) * (1/Ncont + 1/Nexp))</p>
<p>d hat(different) = P exp hat - P cont hat (practical significance level - mim detectable effect)</p>
<p>m(margin of error) = pool standard error * 1.96</p>
<p>For null hypothesis: d = 0, d hat ~ N(0,SEpool) If d hat &gt; 1.96 * SE pool or d hat &lt; -1.96 * SE pool, reject null</p>
<p><br> <br></p>
<h2 id="sampling">sampling</h2>
<p>eg. how many page views do we need(in each group)</p>
<p>a = P(reject null | null true) b = P(fail to reject | null false)</p>
<p>small sample : a low, b high</p>
<p>sensitivity = 1 - b(in general, we want experiment to have a high level of sensitivity at the partical significance boundary, often 80%)</p>
<p>larger sample : a same, b lower</p>
<p><em>online calculator for sample size</em> https://www.evanmiller.org/ab-testing/sample-size.html</p>
<p><br> <br></p>
<h2 id="policy-and-ethics-for-experiment">policy and ethics for experiment</h2>
<p>因为作为sample的基本都是人(纸上谈兵数学人很可能会忽视),所以得有实验前提和准则.</p>
<ul>
<li>Risk. what risk is the participant being exposed to</li>
<li>Benefit. what benefits might be the outcome of study</li>
<li>Choice. what other choices do participants have</li>
<li>Privacy(data sensitivity). what expectation of privacy and confidentiality do participants have</li>
</ul>
<blockquote>
<p>Aside: 关于匿名.为确保匿名后的data还能互相分辨,会加入time stamps(one of HIPAA 18 identifiers). Anonymous data: data without any personally identifiable infomation. Anonymized data: identified or anonymous data that has been looked at and guaranteed in some way that the re-identification isk is now to non-existent.</p>
</blockquote>
<p>Note: 虽然没有写名字,但一些info(timestamp也可能行)还是能idenfity个人(AOL search data leak例子), may still have high re-identificaiton risk.</p>
<p><br> <br></p>
<h2 id="metric">metric</h2>
<ul>
<li><p>sanity check metrics</p></li>
<li><p>evaluation metrics</p></li>
<li><p>external data(data collected by ppl outside of your company)</p></li>
<li><p>gather own in-depth data(Retrospective, User Experience Research, focus groups and surveys)</p></li>
<li><p>User Experience Research: Go depth with few users. Good for brainstorming. Can use special equipment. Want to valid result.</p></li>
<li><p>Focus group: more participants less depth. Get feedback on hypotheticals. Run the risk of group think.</p></li>
<li><p>Surveys: Useful for metrics you cannot measure yourself. Cannot directly compare to other results.</p></li>
<li><p>Human evaluation: pay human raters to evaluate.</p></li>
</ul>
<p><br> <br></p>
<h2 id="compute-data-from-metric">compute data from metric</h2>
<ul>
<li>1st: what data to look at when actually compute the metric.</li>
<li>2rd: given those events, how to summarize metric.</li>
</ul>
<p>--&gt; building intuition about your metric.</p>
<p>Define a metric:</p>
<p>for example click-though-probability = (# of users who click)/(# of users who visit)</p>
<p>Def#1: For each <time interval> :(# cookies that click)/(#cookies) Question: how long is the time interval -&gt; we can add per minute click(or per hour) - as required.</p>
<p>Def#2: Create unique ID for each page view -&gt; (#pageviews w/click within <time interval>)/(#pageviews)</p>
<p>Def#3: (# clicks)/(#pageviews) -&gt; click-though-rate</p>
<p>Possible situation to think about: - double click - back button cashes page(page reload) - click-tracking bug</p>
<h6 id="aside-segmenting-and-filtering-data">Aside: Segmenting and filtering data</h6>
<p>data的归类和分析(比如说week over week, year over year,按地区分类,分开手机和电脑平台等).data是否bias.</p>
<p>general categories of metrics: - sums and counts eg. # users who visited page</p>
<ul>
<li><p>distribution: means, medians, 25th, 75th, 90th percentiles eg. mean age of users who completed a course eg. median latency of page load</p></li>
<li><p>probabilities and rates probability has 0 or 1 outcome in each case rate has 0 or more</p></li>
<li><p>ratios eg. P(revenue-generating click)/P(any click)</p></li>
</ul>
<p><br> <br></p>
<h6 id="aside-calculating-variabilityvariance-or-standard-deviation-distribution">Aside: Calculating variability(variance or standard deviation &amp;&amp; distribution)</h6>
<p>Binomial distribution: - SE(standard error) = sqrt(β * (1 - β) / N) - m(margin of error) = Z(z score confidence level) * SE</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Type of metric</th>
<th style="text-align: center;">distribution</th>
<th style="text-align: center;">estimated variance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">probability</td>
<td style="text-align: center;">binomial(normal)</td>
<td style="text-align: center;">(Phat * (1 - Phat) / N)</td>
</tr>
<tr class="even">
<td style="text-align: left;">mean</td>
<td style="text-align: center;">normal</td>
<td style="text-align: center;">𝜎 ^ 2 / N</td>
</tr>
<tr class="odd">
<td style="text-align: left;">median/percentile</td>
<td style="text-align: center;">depends</td>
<td style="text-align: center;">depends</td>
</tr>
<tr class="even">
<td style="text-align: left;">count/difference</td>
<td style="text-align: center;">normal(often)</td>
<td style="text-align: center;">Var(x) + Var(y)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rates</td>
<td style="text-align: center;">poisson</td>
<td style="text-align: center;">mean</td>
</tr>
<tr class="even">
<td style="text-align: left;">ratios</td>
<td style="text-align: center;">depends</td>
<td style="text-align: center;">depends</td>
</tr>
</tbody>
</table>
<ul>
<li>𝜎 -&gt; variants of sample</li>
</ul>
<p><br> <br></p>
<h2 id="calculating-variability-empirically">calculating variability empirically</h2>
<p>Uses of A/A tests: - Compare results to what you expect(sanity check) - Estimate variance and calculate confidence - Directly estimate confidence interval</p>
<h6 id="boot-strapping">Boot strapping</h6>
<p>Run one experiment, take random sample from each side of experiment and calculate as it were a full experimental group, use as simulated experiment. Repeat. Use the result as if run multiple experiments.</p>
<p>confidence interval(z = 1.96) vs empirical confidence interval: empirical去掉最高和最低就是interval balance. 注: empirical最好有more than 40 experiments to be confident.</p>
<p><br> <br></p>
<h2 id="designing-an-experiment">designing an experiment</h2>
<h3 id="unit-of-diversion">Unit of diversion</h3>
<p>how we define what an individual subject is in the experience.</p>
<p>Commonly used: - <strong>User id</strong> (user name, email address, phone number) - stable, unchanging - personally identifiable - <strong>Anonymous id</strong> (cookie) - changes when you switch browser or device - users can clear cookies(easy to change) - <strong>Event</strong> - no consistent experience(for the change that is not user visible) - use only for non-user-visible changes</p>
<p>Less common: - <strong>Device id</strong> - only available for mobile - tied to specific device - unchangeable by user - <strong>IP address</strong> - changes when location changes</p>
<p>Example: unit of diversion (check means assigned to a group)</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 12%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: center;">(desktop) homepage</th>
<th style="text-align: center;">sign in</th>
<th style="text-align: center;">visit class</th>
<th style="text-align: center;">watch video</th>
<th style="text-align: center;">(mobile) auto sign in</th>
<th style="text-align: center;">watch video</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">user-id</td>
<td style="text-align: center;">None</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">cookie</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">Note: if they did not clear their cookie</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">event</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">🍁</td>
</tr>
<tr class="even">
<td style="text-align: left;">device id</td>
<td style="text-align: center;">None</td>
<td style="text-align: center;">None</td>
<td style="text-align: center;">None</td>
<td style="text-align: center;">None</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">IP address</td>
<td style="text-align: center;">🍁</td>
<td style="text-align: center;">Not clear</td>
<td style="text-align: center;">Not clear</td>
<td style="text-align: center;">Not clear</td>
<td style="text-align: center;">Not clear</td>
<td style="text-align: center;">Not clear</td>
</tr>
</tbody>
</table>
<p>How we choose: - <strong>user consistency</strong> (whether cross devices/ sign in sign off border) - event(not necessary) &gt; cookie(enough) &gt; user-id(necessary) - <strong>ethical consideration</strong> (what data is collecting/ data is identified or not) - security and confidentiality questions - informed consent - <strong>variability</strong> - unit of analysis -&gt; whatever denominator of metric (eg. page view if unit of analysis over click rough rate) - unit of diversion(if is cookie or user id) (eg. same metric click through rate is much higher than unit of analysis) why: we consider what to be independent wrong. Event: every single event is different random draw. Cookie &amp; user id -&gt; we diverting groups of events.</p>
<h3 id="population">Population</h3>
<p>experiment: <strong>intra-user experiment</strong> . Expose the same user to the feature being on and off over time, analyze their behavior. pitfall: Careful about choosing comparable time window. Frustration or learning problem.</p>
<p>searching ranking, preferences(rank order list): <strong>interleaved experiment</strong> . Expose same user to the A and B side at the same time. Useful for reordering list.</p>
<p><strong>inter-user experiment</strong> . Different ppl from A side and B side.</p>
<p><strong>cohort</strong> : try to match up the entering classes. At least have roughly the same parameter in two user groups. (eg. In medical experiments, match up patients in trial based on demographic info, ages, medical history, then do pair analysis.)</p>
<p>target: Based on info required. Restriction. Avoid overlap target.</p>
<blockquote>
<p>Aside: Significance A p-value of 5% or lower is often considered to be statistically significant. statistically significant difference: compute difference and confidence interval and see if it includes 0.(if margin of error is wider than estimated difference -&gt; includes 0 -&gt; diff is not significant)</p>
</blockquote>
<p>Diff between population and cohort: population is having a whole group of users. Whichin the population define cohort -&gt; people who enter the experiment at the same time. (eg. divert cookie or user id, look at a particular country, during the experience could gain/lose users. Cohort: define an entering class and only look at users who entered your experiment on both sides around the same time) cohort are harder to analyze, they will take more data because you'll lose users. Only use they when looking for user stability. - Looking for learning effects - Examining user retention - Want to increase user activity - Anything requiring user to be established &gt;example: - Have existing course and change structure of lesson - Unit of diversion: user-id(but not all users in the course) - Control: need to be a comparable cohort</p>
<h3 id="size">Size</h3>
<p>based on practical significance, statistical significance. To calculate size, assume SE ~ 1/sqrt(N)</p>
<blockquote>
<p>example: Experiment: change order of courses on course list Metric: click-though-rate Unit-of-diversion:cookies α: 0.05 β: 0.2 dmin: 0.01 SE = 0.0628/1000 pageview</p>
</blockquote>
<p>Result: 300,000 -&gt; too much Adjusted: - Increase dmin, α, β - change unit of diversion to page view -&gt; makes unit of diversion same as unit of analysis, variability of the metric will decrease and close to analytical estimate. - target experiment to specific traffic - change metric to cookie-based click-through-probability -&gt; often not make a significant difference to variability</p>
<h3 id="duration">Duration</h3>
<p>consider difference between weekdays and weekends -&gt; run smaller percentage across multiple days, or run multiple tasks at the same time on smaller percentage of traffic</p>
<blockquote>
<p>Aside: learning effects measure user learning, whether a user is adapting to a change or not.</p>
</blockquote>
<h2 id="sanity-check">Sanity check</h2>
<ul>
<li>Population sizing metrics based on unit of diversion -&gt; experiment population and control population are comparable</li>
<li>Invariants(Metrics that don't expect to change)</li>
</ul>
<blockquote>
<p>example: how to figure out whether difference is within expectation(each cookie is randomly assigned to the control or experiment group with probabilty 0.5) 1.compute standard deviation of binomial with probability 0.5 we expect. 2.multiply by z-score to get margin of error. 3.compute confidence interval around 0.5 -&gt; if control group fall within this confidence interval: experiment is setup properly. 4.check whether observed fraction is within interval.</p>
</blockquote>
<p>how to solve: - check technically issues - retrospective analysis (endemic) - pre and post periods</p>
<blockquote>
<p>aside: click through probability: binomial distribution click through rate: poisson distribution</p>
</blockquote>
<p>online calculator:https://www.graphpad.com/quickcalcs/binomial1.cfm</p>
<blockquote>
<p>aside: Simpson's paradox: a trend appears in several different groups of data but disappears or reverses when these groups are combined.</p>
</blockquote>
<h2 id="tracking-metrics">tracking metrics</h2>
<ul>
<li>single:</li>
<li>hypothesis test</li>
<li>sign test</li>
</ul>
<p>hypothesis test: SE ~ 1/sqrt(N) -&gt;when we calculate two groups -&gt; sqrt(1/N1 + 1/N2) Empirical SE/sqrt(1/sample size + 1/sample size) = SE/sqrt(1/group1 size + 1/group2 size) =&gt; then we can find SE different = rate experiment - rate control margin of error = SE * 1.96 confidence interval = different +- margin of error</p>
<p>sign test: numbers of days numbers of days with positive change -&gt; if no difference, 50% of positive change on each day, we do a binomial(small) or normal(big number) check</p>
<ul>
<li>multiple</li>
<li>1.assume independence</li>
<li>2.bonferroni correction</li>
</ul>
<p>independence: α overall = (1 - α individual)^n</p>
<p>bonferroni correction: α individual = α overall / # of metric</p>
<p>from difference and SE -&gt; we get margin of error = SE * 1.96 if margin of error is wider than observed difference -&gt; not statistically significant</p>
<p>control false discovery rate(FDR) FDR = E[# false positives / # rejections]</p>
<p><br> <br> 🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉 <br> <br></p>
<h2 id="example-process">Example process</h2>
<h3 id="experiment-design">Experiment design</h3>
<p><strong>1.metric choice</strong> choose invariant + evaluation metrics - number of cookies - number of user-ids - number of clicks - click-through-probability - gross conversion - retention - net conversion</p>
<blockquote>
<p>aside: gross conversion: number of user-ids to complete checkout and enroll in the free trial divided by number of unique cookies to click the "start free trial" button retention: number of user-ids to remain enrolled past the 14-day boundary(make at least one payment) divided by number of user-ids to complete checkout net conversion: number of user-ids to remain enrolled past the 14-day bounday(make at least one payment) divided by the number of unique cookies to click the "start free trial" button</p>
</blockquote>
<p><strong>2.measuring standard deviation</strong> whether or not use bonferroni correction in analysis phase</p>
<p><strong>3.sizing</strong></p>
<p><strong>3.1.number of samples vs. power</strong></p>
<p><strong>3.2.duration vs. exposure</strong></p>
<p><br></p>
<h2 id="experiment-analysis">Experiment analysis</h2>
<p><strong>4.sanity checks</strong> calculate lower bound, upper bound, observed</p>
<p><strong>5.result analysis</strong></p>
<p><strong>5.1.effect size test</strong> calculate lower bound, upper bound, statistical significance, practical significance</p>
<p><strong>5.2.sigh tests</strong> p-value, statistical significance</p>
<p><strong>summary</strong> state whether used bonferroni correction, why and why not. If there are any discrepancies between the effect size hypothesis tests and the sigh test, describe the discrepancy and why think it arose.</p>
<p><br> <br> 🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉 <br> <br></p>
<h2 id="example-process-ver2.0">Example process-ver2.0</h2>
<p><strong>1.metric choice</strong> choose invariant metrics and evaluation metric</p>
<p><strong>2.measuring standard deviation</strong> whether analytic estimate would be comparable to the empirical variability whether expect them to be different (in which case it might be worth doing an empirical estimate if there is time)</p>
<p><strong>3.sizing</strong></p>
<p><strong>3.1.number of samples vs. power</strong> whether use Bonferroni correction during analysis phase, give number of pageviews need to power experiment appropriately</p>
<p><strong>3.2.duration vs. exposure</strong> indicate what fraction of traffic would divert to this experiment and how many days would need to run the experiment</p>
<h2 id="experiment-analysis-1">Experiment analysis</h2>
<p><strong>4.sanity checks</strong> for each of invariant metrics, give the 95% confidence interval for the value expect to observe, the actual observed value, and whether the metric passes sanity check if not pass -&gt; guess what went wrong based on day-by-day data</p>
<p><strong>5.result analysis</strong></p>
<p><strong>5.1.effect size test</strong> for each of evaluation metrics, give 95% confidence interval around the difference between the experiment and control groups. Indicate whether each metric is statistically and practically significant.</p>
<p><strong>5.2.sigh tests</strong> for each of evaluation metrics, do sign test using day-by-day data, report the p-value of the sign test and whether the result is statistically significant.</p>
<p><strong>summary</strong></p>
<h2 id="final-notes">final notes</h2>
<blockquote>
<p>Aside for terms:</p>
</blockquote>
<blockquote>
<p>Closed testing procedure: a general method for performing more than one hypothesis test simultaneously. Suppose there are k hypotheses H1,..., Hk to be tested and the overall type I error rate is α. The closed testing principle allows the rejection of any one of these elementary hypotheses, say Hi, if all possible intersection hypotheses involving Hi can be rejected by using valid local level α tests. It controls the familywise error rate for all the k hypotheses at level α in the strong sense. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Closed_testing_procedure">wiki</a></p>
</blockquote>
<blockquote>
<p>Boole's inequality In probability theory, Boole's inequality, also known as the union bound, says that for any finite or countable set of events, the probability that at least one of the events happens is no greater than the sum of the probabilities of the individual events. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Boole%27s_inequality">wiki</a> Holm–Bonferroni method <img src="/2020/11/03/P124/P124.png" class=""> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Holm%E2%80%93Bonferroni_method">wiki</a></p>
</blockquote>
<blockquote>
<p>Note: Type I error: Erroneously rejecting the null hypothesis with a statistical analysis, then the null hypothesis is in fact true in the population.</p>
</blockquote>
<blockquote>
<p>Bonferroni correction: An adjustment applied to p-values that is "supposed to be" applied, when two or more statistical analyses have been performed on the <strong>same</strong> sample of data. The correction is supposed to be applied, as the familywise type I error rate is known to be larger than the per analysis error rate(eg. alpha = 0.05) α individual = α overall / # of metric (eg. 0.05 / 3 metric = 0.017) <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Bonferroni_correction">wiki</a></p>
</blockquote>
<blockquote>
<p>Familywise error rate: The probability of committing at least one type 1 error amongst two or more statistical analyses on the <strong>same</strong> sample of data. αFW = 1 - (1 - αPC)^c c : number of comparisons performed αPC : specified per contrast error rate(usually 0.05)</p>
</blockquote>
<blockquote>
<p>Multiple comparisons problem: In statistics, the multiple comparisons, multiplicity or multiple testing problem occurs when one considers a set of statistical inferences simultaneously or infers a subset of parameters selected based on the observed values. In certain fields it is known as the look-elsewhere effect. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Multiple_comparisons_problem">wiki</a></p>
</blockquote>
<blockquote>
<p>False discovery rate The false discovery rate (FDR) is a method of conceptualizing the rate of type I errors in null hypothesis testing when conducting multiple comparisons. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/False_discovery_rate">wiki</a></p>
</blockquote>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E4%BB%A5%E5%A4%B4%E6%8A%A2%E5%9C%B0-%E8%AF%9A/" rel="tag"># 以头抢地(诚)</a>
              <a href="/tags/data/" rel="tag"># data</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/11/10/P125/" rel="prev" title="sore家的obake和sore给我的">
      <i class="fa fa-chevron-left"></i> sore家的obake和sore给我的
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/10/31/P122/" rel="next" title="宾果和老兔和乱七八糟的万圣节快乐">
      宾果和老兔和乱七八糟的万圣节快乐 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#intro"><span class="nav-number">1.</span> <span class="nav-text">intro</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#metric-choice"><span class="nav-number">2.</span> <span class="nav-text">metric choice</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#asidebinomial-distruibution"><span class="nav-number">2.0.0.0.1.</span> <span class="nav-text">Aside:binomial distruibution</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hypothesis-testing"><span class="nav-number">3.</span> <span class="nav-text">hypothesis testing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pooled-standard-error"><span class="nav-number">4.</span> <span class="nav-text">pooled standard error</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sampling"><span class="nav-number">5.</span> <span class="nav-text">sampling</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#policy-and-ethics-for-experiment"><span class="nav-number">6.</span> <span class="nav-text">policy and ethics for experiment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#metric"><span class="nav-number">7.</span> <span class="nav-text">metric</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#compute-data-from-metric"><span class="nav-number">8.</span> <span class="nav-text">compute data from metric</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#aside-segmenting-and-filtering-data"><span class="nav-number">8.0.0.0.1.</span> <span class="nav-text">Aside: Segmenting and filtering data</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#aside-calculating-variabilityvariance-or-standard-deviation-distribution"><span class="nav-number">8.0.0.0.2.</span> <span class="nav-text">Aside: Calculating variability(variance or standard deviation &amp;&amp; distribution)</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#calculating-variability-empirically"><span class="nav-number">9.</span> <span class="nav-text">calculating variability empirically</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#boot-strapping"><span class="nav-number">9.0.0.0.1.</span> <span class="nav-text">Boot strapping</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#designing-an-experiment"><span class="nav-number">10.</span> <span class="nav-text">designing an experiment</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#unit-of-diversion"><span class="nav-number">10.1.</span> <span class="nav-text">Unit of diversion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#population"><span class="nav-number">10.2.</span> <span class="nav-text">Population</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#size"><span class="nav-number">10.3.</span> <span class="nav-text">Size</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#duration"><span class="nav-number">10.4.</span> <span class="nav-text">Duration</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sanity-check"><span class="nav-number">11.</span> <span class="nav-text">Sanity check</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tracking-metrics"><span class="nav-number">12.</span> <span class="nav-text">tracking metrics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#example-process"><span class="nav-number">13.</span> <span class="nav-text">Example process</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#experiment-design"><span class="nav-number">13.1.</span> <span class="nav-text">Experiment design</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#experiment-analysis"><span class="nav-number">14.</span> <span class="nav-text">Experiment analysis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#example-process-ver2.0"><span class="nav-number">15.</span> <span class="nav-text">Example process-ver2.0</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#experiment-analysis-1"><span class="nav-number">16.</span> <span class="nav-text">Experiment analysis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#final-notes"><span class="nav-number">17.</span> <span class="nav-text">final notes</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mazui"
      src="/images/logo_2.png">
  <p class="site-author-name" itemprop="name">Mazui</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">153</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:mazui.and.rio@gmail.com" title="E-Mail → mailto:mazui.and.rio@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/3032131561?topnav=1&wvr=6&topsug=1&ssl_rnd=1606158448.6943&is_all=1" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;3032131561?topnav&#x3D;1&amp;wvr&#x3D;6&amp;topsug&#x3D;1&amp;ssl_rnd&#x3D;1606158448.6943&amp;is_all&#x3D;1" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/mazui_3" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/mazui_3" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;mazui_3" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mazui</span>

<!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>


    <span title="Symbols count total">174k</span>
  -->

  <!--
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">2:38</span>

  -->
  
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>
<br>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">休息室一共有104.7k的老兔正在打瞌睡</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

  <script type="text/javascript" src="/js/my_js/firework.js"></script>

</body>
</html>
